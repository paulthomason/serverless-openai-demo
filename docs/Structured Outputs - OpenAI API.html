<!DOCTYPE html>
<html lang="en-US" class="light" data-theme="light" style="color-scheme: light;"><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <link rel="icon" type="image/png" href="https://platform.openai.com/favicon-platform.png">
        <link rel="icon" type="image/svg+xml" href="https://platform.openai.com/favicon-platform.svg">
        <link rel="preconnect" href="https://cdn.openai.com/">
        <link rel="preconnect" href="https://owz3qoiija-dsn.algolia.net/" crossorigin="">
        <!-- Preload critical fonts -->
        <link rel="preload" href="https://cdn.openai.com/common/fonts/openai-sans/v2/OpenAISans-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
        <link rel="preload" href="https://cdn.openai.com/common/fonts/openai-sans/v2/OpenAISans-Semibold.woff2" as="font" type="font/woff2" crossorigin="anonymous">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#000000">
        <title>Structured Outputs - OpenAI API</title>
        <meta name="description" content="Understand how to ensure model responses follow specific JSON Schema with OpenAI's Structured Outputs.">
        <link rel="manifest" href="https://platform.openai.com/manifest.json">

        <!-- Facebook / LinkedIn Meta Tags -->
        <meta property="og:title" content="Structured Outputs - OpenAI API">
        <meta property="og:image" content="https://cdn.openai.com/API/images/platform-opengraph.png">
        <meta property="og:description" content="Understand how to ensure model responses follow specific JSON Schema with OpenAI's Structured Outputs.">
        <meta property="og:type" content="website">
        <meta property="og:url" content="https://platform.openai.com">

        <!-- Twitter Meta Tags -->
        <meta name="twitter:card" content="summary_large_image">
        <meta property="twitter:domain" content="platform.openai.com">
        <meta property="twitter:url" content="https://platform.openai.com">
        <meta name="twitter:title" content="Structured Outputs - OpenAI API">
        <meta name="twitter:description" content="Understand how to ensure model responses follow specific JSON Schema with OpenAI's Structured Outputs.">
        <meta name="twitter:image" content="https://cdn.openai.com/API/images/platform-opengraph.png">
      <script type="text/javascript" async="" src="Structured%20Outputs%20-%20OpenAI%20API_files/dgkjq2bp"></script><script nonce="" type="module" crossorigin="" src="Structured%20Outputs%20-%20OpenAI%20API_files/index-CUhUS41z.js"></script>
      <link rel="stylesheet" crossorigin="" href="Structured%20Outputs%20-%20OpenAI%20API_files/Tf9Scn7HlD.css">
      <script nonce="" type="module">import.meta.url;import("_").catch(()=>1);(async function*(){})().next();if(location.protocol!="file:"){window.__vite_is_modern_browser=true}</script>
      <script nonce="" type="module">!function(){if(window.__vite_is_modern_browser)return;console.warn("vite: loading legacy chunks, syntax error above and the same error below should be ignored");var e=document.getElementById("vite-legacy-polyfill"),n=document.createElement("script");n.src=e.src,n.onload=function(){System.import(document.getElementById('vite-legacy-entry').getAttribute('data-src'))},document.body.appendChild(n)}();</script>
    <link rel="modulepreload" as="script" crossorigin="" href="https://platform.openai.com/static/DanqnpkOwz.js"><link rel="modulepreload" as="script" crossorigin="" href="https://platform.openai.com/static/BnLesebcyh.js"><link rel="stylesheet" crossorigin="" href="Structured%20Outputs%20-%20OpenAI%20API_files/D8SAGYDlQp.css"><link rel="modulepreload" as="script" crossorigin="" href="https://platform.openai.com/static/S7g7FJTJ_m.js"><link rel="stylesheet" crossorigin="" href="Structured%20Outputs%20-%20OpenAI%20API_files/BLSEjdNlXJ.css"><link rel="stylesheet" crossorigin="" href="Structured%20Outputs%20-%20OpenAI%20API_files/n0fgI5NQ5T.css"><link rel="modulepreload" as="script" crossorigin="" href="https://platform.openai.com/static/DJwy5b9fXP.js"><link rel="modulepreload" as="script" crossorigin="" href="https://platform.openai.com/static/C5xOfthwhu.js"><link rel="modulepreload" as="script" crossorigin="" href="https://platform.openai.com/static/MdXJnvAqQ5.js"><link rel="stylesheet" crossorigin="" href="Structured%20Outputs%20-%20OpenAI%20API_files/DNTBtIC2-e.css"><link rel="modulepreload" as="script" crossorigin="" href="https://platform.openai.com/static/Dd95zyUG6k.js"><link rel="stylesheet" crossorigin="" href="Structured%20Outputs%20-%20OpenAI%20API_files/Dj4tHECZ-_.css"><link rel="modulepreload" as="script" crossorigin="" href="https://platform.openai.com/static/B0L9_BmstH.js"><link rel="modulepreload" as="script" crossorigin="" href="https://platform.openai.com/static/CxVzecVx0n.js"><link rel="modulepreload" as="script" crossorigin="" href="https://platform.openai.com/static/DZ15YQKkeR.js"><link rel="stylesheet" crossorigin="" href="Structured%20Outputs%20-%20OpenAI%20API_files/D4l3-xueTB.css"><link rel="modulepreload" as="script" crossorigin="" href="https://platform.openai.com/static/BQVTL7LYio.js"><link rel="stylesheet" crossorigin="" href="Structured%20Outputs%20-%20OpenAI%20API_files/CpLHP_YlQM.css"><link rel="modulepreload" as="script" crossorigin="" href="https://platform.openai.com/static/CgMb9Wck8S.js"><link rel="stylesheet" crossorigin="" href="Structured%20Outputs%20-%20OpenAI%20API_files/CbwplyKibJ.css"><link rel="modulepreload" as="script" crossorigin="" href="https://platform.openai.com/static/BOSpk8yqXE.js"><link rel="modulepreload" as="script" crossorigin="" href="https://platform.openai.com/static/Cg6EiwrWnU.js"><link rel="stylesheet" crossorigin="" href="Structured%20Outputs%20-%20OpenAI%20API_files/ByCNtn1G2a.css"><link rel="modulepreload" as="script" crossorigin="" href="https://platform.openai.com/static/DSXzc7NRbX.js"><link rel="modulepreload" as="script" crossorigin="" href="https://platform.openai.com/static/DljxSUbqky.js"><link rel="modulepreload" as="script" crossorigin="" href="https://platform.openai.com/static/DO-FDNarRD.js"><link rel="modulepreload" as="script" crossorigin="" href="https://platform.openai.com/static/C5BHFRwSgL.js"><link rel="modulepreload" as="script" crossorigin="" href="https://platform.openai.com/static/0vbeQ64Aqf.js"><link rel="modulepreload" as="script" crossorigin="" href="https://platform.openai.com/static/DpU4GDVZfG.js"><link rel="stylesheet" crossorigin="" href="Structured%20Outputs%20-%20OpenAI%20API_files/Dx3ujmnaub.css"><link rel="modulepreload" as="script" crossorigin="" href="https://platform.openai.com/static/WgpdSQrSLB.js"><link rel="stylesheet" crossorigin="" href="Structured%20Outputs%20-%20OpenAI%20API_files/wB0aeyMdiF.css"><link rel="modulepreload" as="script" crossorigin="" href="https://platform.openai.com/static/udX_hWwSXu.js"><link rel="modulepreload" as="script" crossorigin="" href="https://platform.openai.com/static/DkrwAq998f.js"><link rel="stylesheet" crossorigin="" href="Structured%20Outputs%20-%20OpenAI%20API_files/Bp62j323HB.css"><link rel="modulepreload" as="script" crossorigin="" href="https://platform.openai.com/static/DZLR5wQT4F.js"><link rel="modulepreload" as="script" crossorigin="" href="https://platform.openai.com/static/QzfHDpYJYj.js"><link rel="stylesheet" crossorigin="" href="Structured%20Outputs%20-%20OpenAI%20API_files/BKs9Z-mNGk.css"><link rel="stylesheet" crossorigin="" href="Structured%20Outputs%20-%20OpenAI%20API_files/CF0ZEZNtbd.css"><link rel="modulepreload" as="script" crossorigin="" href="https://platform.openai.com/static/fSj4JHDMSI.js"><link rel="stylesheet" crossorigin="" href="Structured%20Outputs%20-%20OpenAI%20API_files/CY6sklTIgA.css"><link rel="canonical" href="https://platform.openai.com/docs/guides/structured-outputs"></head>
    <body>
        <div id="root"><div class="rl7uK"><div class="hDvly"><div class="vpev1"><span class="block _6fZQu"><a class="qcq-H" href="https://platform.openai.com/docs/overview"><svg fill="none" xmlns="http://www.w3.org/2000/svg" width="169" height="24" viewBox="0 0 169 24"><path d="M8.11 4.452C3.958 4.452.562 7.849.562 12c0 4.152 3.396 7.549 7.548 7.549 4.151 0 7.548-3.376 7.548-7.549A7.543 7.543 0 0 0 8.11 4.452Zm0 12.392c-2.58 0-4.655-2.118-4.655-4.844 0-2.725 2.076-4.843 4.655-4.843S12.765 9.275 12.765 12c0 2.726-2.076 4.844-4.655 4.844ZM23.29 8.645c-1.363 0-2.684.545-3.376 1.468V8.855h-2.726v14.677h2.726v-5.305c.692.86 1.971 1.321 3.376 1.321 2.935 0 5.242-2.306 5.242-5.451 0-3.145-2.307-5.452-5.242-5.452Zm-.461 8.534c-1.552 0-2.936-1.216-2.936-3.082 0-1.866 1.384-3.082 2.936-3.082 1.551 0 2.935 1.216 2.935 3.082 0 1.866-1.384 3.082-2.935 3.082ZM34.948 8.645c-2.977 0-5.325 2.328-5.325 5.452s2.054 5.451 5.41 5.451c2.746 0 4.507-1.656 5.052-3.522h-2.663c-.335.776-1.278 1.32-2.41 1.32-1.406 0-2.475-.985-2.727-2.39h7.926v-1.069c0-2.851-1.992-5.242-5.263-5.242Zm-2.642 4.382c.294-1.32 1.384-2.18 2.705-2.18 1.405 0 2.474.922 2.6 2.18h-5.305ZM47.466 8.645c-1.217 0-2.495.545-3.083 1.447V8.855h-2.725v10.484h2.725v-5.64c0-1.636.881-2.705 2.307-2.705 1.32 0 2.034 1.006 2.034 2.41v5.935h2.725v-6.374c0-2.6-1.593-4.32-3.983-4.32ZM58.43 4.662l-5.933 14.677h2.914l1.258-3.208h6.752l1.258 3.208h2.956L61.743 4.662H58.43Zm-.817 9.037 2.432-6.144 2.411 6.144h-4.843ZM71.514 4.662h-2.768v14.677h2.768V4.662ZM93.11 4.661h-6.5v14.677h2.768v-5.514h3.753c2.894 0 4.948-1.698 4.948-4.55 0-2.851-2.054-4.613-4.969-4.613Zm-.188 6.73h-3.544V7.178h3.544c1.425 0 2.348.818 2.348 2.097 0 1.28-.923 2.118-2.348 2.118ZM102.399 4.661h-2.726v14.677h2.726V4.661ZM113.575 12.502c0-2.39-1.636-3.858-4.655-3.858-2.474 0-4.445 1.384-4.781 3.397h2.748c.209-.692.963-1.237 2.012-1.237 1.363 0 2.013.713 2.013 1.95v.063l-2.663.23c-2.789.231-4.34 1.364-4.34 3.502 0 1.803 1.551 2.998 3.711 2.998 1.447 0 2.851-.566 3.439-1.51 0 .462.042.881.126 1.3h2.537c-.106-.67-.147-1.446-.147-2.348v-4.487Zm-2.663 2.495c0 1.238-.923 2.496-2.789 2.496-1.006 0-1.551-.483-1.551-1.195 0-.776.524-1.258 1.698-1.363l2.642-.231v.293ZM119.298 5.457h-2.725v3.397h-2.18v2.201h2.18v5.158c0 1.992 1.027 3.124 3.229 3.124h2.18v-2.264h-1.383c-.923 0-1.301-.314-1.301-1.174v-4.844h2.684V8.854h-2.684V5.457ZM127.811 8.142c0-.755.336-1.216 1.259-1.216h1.95V4.66h-2.306c-2.37 0-3.628 1.216-3.628 3.23v.964h-2.18v2.201h2.18v8.282h2.725v-8.282h2.685V8.855h-2.685v-.713ZM136.428 8.645c-3.123 0-5.535 2.474-5.535 5.451 0 2.977 2.412 5.451 5.535 5.451 3.124 0 5.536-2.474 5.536-5.451 0-2.977-2.412-5.451-5.536-5.451Zm0 8.47c-1.446 0-2.831-1.174-2.831-3.019 0-1.845 1.385-3.02 2.831-3.02 1.447 0 2.831 1.175 2.831 3.02s-1.384 3.02-2.831 3.02ZM146.115 10.448V8.855h-2.704V19.34h2.725v-4.97c0-1.991 1.006-2.998 2.789-2.998h.839V8.73h-.545c-1.321 0-2.559.65-3.104 1.72ZM163.854 8.645c-1.636 0-2.873.629-3.627 1.76-.651-1.11-1.845-1.76-3.23-1.76-1.3 0-2.474.545-3.061 1.446V8.854h-2.726v10.484h2.726v-5.64c0-1.636.86-2.705 2.265-2.705 1.299 0 2.013 1.006 2.013 2.411v5.934h2.725v-5.64c0-1.636.88-2.705 2.265-2.705 1.3 0 2.013 1.006 2.013 2.411v5.934h2.725v-6.374c0-2.6-1.656-4.32-4.088-4.32Z" fill="var(--text-primary)"></path></svg></a></span></div><div class="Aip-a"><div class="zWMrv"><span class="block"><div class="zWMrv"><nav class="okBd0"><a class="w9s17 _1T-tk" data-primary-nav-item="" href="https://platform.openai.com/docs" aria-current="page"><span class="EsOWR vaD2P" data-title="Docs">Docs</span><span class="EsOWR ksWxL" data-title="Docs">Docs</span></a><a class="w9s17" data-primary-nav-item="" href="https://platform.openai.com/docs/api-reference/responses"><span class="EsOWR vaD2P" data-title="API reference">API reference</span><span class="EsOWR ksWxL" data-title="API">API</span></a></nav></div></span><div class="flex gap-3 mt-3 md:mt-0"><button type="button" class="Wmjjd" data-color="secondary" data-variant="filled" data-size="md" data-gutter-size="md" data-icon-size="md" data-block="" style="--scale: 0.96;"><span class="_6jr41">Log in</span></button><a class="Wmjjd" data-color="primary" data-variant="filled" data-size="md" data-gutter-size="md" data-icon-size="md" data-block="" href="https://platform.openai.com/signup"><span class="_6jr41">Sign up</span></a></div></div></div><div class="_3fO9I"><svg fill="none" xmlns="http://www.w3.org/2000/svg" width="169" height="24" viewBox="0 0 169 24"><path d="M8.11 4.452C3.958 4.452.562 7.849.562 12c0 4.152 3.396 7.549 7.548 7.549 4.151 0 7.548-3.376 7.548-7.549A7.543 7.543 0 0 0 8.11 4.452Zm0 12.392c-2.58 0-4.655-2.118-4.655-4.844 0-2.725 2.076-4.843 4.655-4.843S12.765 9.275 12.765 12c0 2.726-2.076 4.844-4.655 4.844ZM23.29 8.645c-1.363 0-2.684.545-3.376 1.468V8.855h-2.726v14.677h2.726v-5.305c.692.86 1.971 1.321 3.376 1.321 2.935 0 5.242-2.306 5.242-5.451 0-3.145-2.307-5.452-5.242-5.452Zm-.461 8.534c-1.552 0-2.936-1.216-2.936-3.082 0-1.866 1.384-3.082 2.936-3.082 1.551 0 2.935 1.216 2.935 3.082 0 1.866-1.384 3.082-2.935 3.082ZM34.948 8.645c-2.977 0-5.325 2.328-5.325 5.452s2.054 5.451 5.41 5.451c2.746 0 4.507-1.656 5.052-3.522h-2.663c-.335.776-1.278 1.32-2.41 1.32-1.406 0-2.475-.985-2.727-2.39h7.926v-1.069c0-2.851-1.992-5.242-5.263-5.242Zm-2.642 4.382c.294-1.32 1.384-2.18 2.705-2.18 1.405 0 2.474.922 2.6 2.18h-5.305ZM47.466 8.645c-1.217 0-2.495.545-3.083 1.447V8.855h-2.725v10.484h2.725v-5.64c0-1.636.881-2.705 2.307-2.705 1.32 0 2.034 1.006 2.034 2.41v5.935h2.725v-6.374c0-2.6-1.593-4.32-3.983-4.32ZM58.43 4.662l-5.933 14.677h2.914l1.258-3.208h6.752l1.258 3.208h2.956L61.743 4.662H58.43Zm-.817 9.037 2.432-6.144 2.411 6.144h-4.843ZM71.514 4.662h-2.768v14.677h2.768V4.662ZM93.11 4.661h-6.5v14.677h2.768v-5.514h3.753c2.894 0 4.948-1.698 4.948-4.55 0-2.851-2.054-4.613-4.969-4.613Zm-.188 6.73h-3.544V7.178h3.544c1.425 0 2.348.818 2.348 2.097 0 1.28-.923 2.118-2.348 2.118ZM102.399 4.661h-2.726v14.677h2.726V4.661ZM113.575 12.502c0-2.39-1.636-3.858-4.655-3.858-2.474 0-4.445 1.384-4.781 3.397h2.748c.209-.692.963-1.237 2.012-1.237 1.363 0 2.013.713 2.013 1.95v.063l-2.663.23c-2.789.231-4.34 1.364-4.34 3.502 0 1.803 1.551 2.998 3.711 2.998 1.447 0 2.851-.566 3.439-1.51 0 .462.042.881.126 1.3h2.537c-.106-.67-.147-1.446-.147-2.348v-4.487Zm-2.663 2.495c0 1.238-.923 2.496-2.789 2.496-1.006 0-1.551-.483-1.551-1.195 0-.776.524-1.258 1.698-1.363l2.642-.231v.293ZM119.298 5.457h-2.725v3.397h-2.18v2.201h2.18v5.158c0 1.992 1.027 3.124 3.229 3.124h2.18v-2.264h-1.383c-.923 0-1.301-.314-1.301-1.174v-4.844h2.684V8.854h-2.684V5.457ZM127.811 8.142c0-.755.336-1.216 1.259-1.216h1.95V4.66h-2.306c-2.37 0-3.628 1.216-3.628 3.23v.964h-2.18v2.201h2.18v8.282h2.725v-8.282h2.685V8.855h-2.685v-.713ZM136.428 8.645c-3.123 0-5.535 2.474-5.535 5.451 0 2.977 2.412 5.451 5.535 5.451 3.124 0 5.536-2.474 5.536-5.451 0-2.977-2.412-5.451-5.536-5.451Zm0 8.47c-1.446 0-2.831-1.174-2.831-3.019 0-1.845 1.385-3.02 2.831-3.02 1.447 0 2.831 1.175 2.831 3.02s-1.384 3.02-2.831 3.02ZM146.115 10.448V8.855h-2.704V19.34h2.725v-4.97c0-1.991 1.006-2.998 2.789-2.998h.839V8.73h-.545c-1.321 0-2.559.65-3.104 1.72ZM163.854 8.645c-1.636 0-2.873.629-3.627 1.76-.651-1.11-1.845-1.76-3.23-1.76-1.3 0-2.474.545-3.061 1.446V8.854h-2.726v10.484h2.726v-5.64c0-1.636.86-2.705 2.265-2.705 1.299 0 2.013 1.006 2.013 2.411v5.934h2.725v-5.64c0-1.636.88-2.705 2.265-2.705 1.3 0 2.013 1.006 2.013 2.411v5.934h2.725v-6.374c0-2.6-1.656-4.32-4.088-4.32Z" fill="var(--text-primary)"></path></svg></div></div><main class="unjkE" data-sidebar="expanded" data-mobile-menu="hidden"><aside class="EpwGB"><div class="GVIPA"><div class="JGDzZ"><div class="fKGG4"><div class="NmUvH"><span class="block _00hoS"><div class="aTuAl"><div class="_0MyKb qyrrQ"><div class="search mt-[-6px]"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div></div><div class="DH-HY qyrrQ QeXPj"><div class="side-nav-section"><div class="side-nav-header subheading">Get started</div><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/overview"><span class="side-nav-item-name">Overview</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/quickstart"><span class="side-nav-item-name">Quickstart</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/models"><span class="side-nav-item-name">Models</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/pricing"><span class="side-nav-item-name">Pricing</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/libraries"><span class="side-nav-item-name">Libraries</span></a></div><div class="side-nav-section"><div class="side-nav-header subheading">Core Concepts</div><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/text"><span class="side-nav-item-name">Text and prompting</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/images-vision"><span class="side-nav-item-name">Images and vision</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/audio"><span class="side-nav-item-name">Audio and speech</span></a><a class="scroll-link side-nav-item active active-exact" href="https://platform.openai.com/docs/guides/structured-outputs"><span class="side-nav-item-name">Structured Outputs</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/function-calling"><span class="side-nav-item-name">Function calling</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/conversation-state"><span class="side-nav-item-name">Conversation state</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/reasoning"><span class="side-nav-item-name">Reasoning</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/streaming-responses"><span class="side-nav-item-name">Streaming</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/pdf-files"><span class="side-nav-item-name">File inputs</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/background"><span class="side-nav-item-name">Background</span></a></div><div class="side-nav-section"><div class="side-nav-header subheading">Tools</div><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/tools"><span class="side-nav-item-name">Using tools</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/tools-remote-mcp"><span class="side-nav-item-name">Remote MCP</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/tools-web-search"><span class="side-nav-item-name">Web search</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/tools-file-search"><span class="side-nav-item-name">File search</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/tools-image-generation"><span class="side-nav-item-name">Image generation</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/tools-code-interpreter"><span class="side-nav-item-name">Code interpreter</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/tools-computer-use"><span class="side-nav-item-name">Computer use</span></a></div><div class="side-nav-section"><div class="side-nav-header subheading">Agents</div><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/agents"><span class="side-nav-item-name">Building agents</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/voice-agents"><span class="side-nav-item-name">Voice agents</span></a><a href="https://openai.github.io/openai-agents-python" class="scroll-link side-nav-item" target="_blank" rel="noreferrer"><span class="side-nav-item-name">Agents SDK Python</span><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24" class="side-nav-icon"><path fill-rule="evenodd" d="M15 5a1 1 0 1 1 0-2h5a1 1 0 0 1 1 1v5a1 1 0 1 1-2 0V6.414l-5.293 5.293a1 1 0 0 1-1.414-1.414L17.586 5H15ZM4 7a3 3 0 0 1 3-3h3a1 1 0 1 1 0 2H7a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1v-3a1 1 0 1 1 2 0v3a3 3 0 0 1-3 3H7a3 3 0 0 1-3-3V7Z" clip-rule="evenodd"></path></svg></a><a href="https://openai.github.io/openai-agents-js" class="scroll-link side-nav-item" target="_blank" rel="noreferrer"><span class="side-nav-item-name">Agents SDK TypeScript</span><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24" class="side-nav-icon"><path fill-rule="evenodd" d="M15 5a1 1 0 1 1 0-2h5a1 1 0 0 1 1 1v5a1 1 0 1 1-2 0V6.414l-5.293 5.293a1 1 0 0 1-1.414-1.414L17.586 5H15ZM4 7a3 3 0 0 1 3-3h3a1 1 0 1 1 0 2H7a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1v-3a1 1 0 1 1 2 0v3a3 3 0 0 1-3 3H7a3 3 0 0 1-3-3V7Z" clip-rule="evenodd"></path></svg></a></div><div class="side-nav-section"><div class="side-nav-header subheading">Realtime API</div><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/realtime"><span class="side-nav-item-name">Using the Realtime API</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/realtime-conversations"><span class="side-nav-item-name">Realtime conversations</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/realtime-transcription"><span class="side-nav-item-name">Realtime transcription</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/realtime-vad"><span class="side-nav-item-name">Voice activity detection</span></a></div><div class="side-nav-section"><div class="side-nav-header subheading">Model optimization</div><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/model-optimization"><span class="side-nav-item-name">Overview</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/evals"><span class="side-nav-item-name">Evals</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/supervised-fine-tuning"><span class="side-nav-item-name">Supervised fine-tuning</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/vision-fine-tuning"><span class="side-nav-item-name">Vision fine-tuning</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/direct-preference-optimization"><span class="side-nav-item-name">Direct preference optimization</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/reinforcement-fine-tuning"><span class="side-nav-item-name">Reinforcement fine-tuning</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/graders"><span class="side-nav-item-name">Graders</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/distillation"><span class="side-nav-item-name">Distillation</span></a></div><div class="side-nav-section"><div class="side-nav-header subheading">Specialized models</div><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/image-generation"><span class="side-nav-item-name">Image generation</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/text-to-speech"><span class="side-nav-item-name">Text to speech</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/speech-to-text"><span class="side-nav-item-name">Speech to text</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/embeddings"><span class="side-nav-item-name">Embeddings</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/moderation"><span class="side-nav-item-name">Moderation</span></a></div><div class="side-nav-section"><div class="side-nav-header subheading">OpenAI Platform</div><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/retrieval"><span class="side-nav-item-name">Retrieval</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/batch"><span class="side-nav-item-name">Batch</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/prompt-generation"><span class="side-nav-item-name">Prompt generation</span></a></div><div class="side-nav-section"><div class="side-nav-header subheading">Codex</div><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/codex/overview"><span class="side-nav-item-name">Codex</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/codex/agent-network"><span class="side-nav-item-name">Agent internet access</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/tools-local-shell"><span class="side-nav-item-name">Local shell tool</span></a><a href="https://github.com/openai/codex" class="scroll-link side-nav-item" target="_blank" rel="noreferrer"><span class="side-nav-item-name">Codex CLI</span><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24" class="side-nav-icon"><path fill-rule="evenodd" d="M15 5a1 1 0 1 1 0-2h5a1 1 0 0 1 1 1v5a1 1 0 1 1-2 0V6.414l-5.293 5.293a1 1 0 0 1-1.414-1.414L17.586 5H15ZM4 7a3 3 0 0 1 3-3h3a1 1 0 1 1 0 2H7a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1v-3a1 1 0 1 1 2 0v3a3 3 0 0 1-3 3H7a3 3 0 0 1-3-3V7Z" clip-rule="evenodd"></path></svg></a><a href="https://help.openai.com/en/articles/11428266-codex-changelog" class="scroll-link side-nav-item" target="_blank" rel="noreferrer"><span class="side-nav-item-name">Codex Changelog</span><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24" class="side-nav-icon"><path fill-rule="evenodd" d="M15 5a1 1 0 1 1 0-2h5a1 1 0 0 1 1 1v5a1 1 0 1 1-2 0V6.414l-5.293 5.293a1 1 0 0 1-1.414-1.414L17.586 5H15ZM4 7a3 3 0 0 1 3-3h3a1 1 0 1 1 0 2H7a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1v-3a1 1 0 1 1 2 0v3a3 3 0 0 1-3 3H7a3 3 0 0 1-3-3V7Z" clip-rule="evenodd"></path></svg></a></div><div class="side-nav-section"><div class="side-nav-header subheading">Best practices</div><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/production-best-practices"><span class="side-nav-item-name">Production best practices</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/safety-best-practices"><span class="side-nav-item-name">Safety best practices</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/prompt-caching"><span class="side-nav-item-name">Prompt Caching</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/predicted-outputs"><span class="side-nav-item-name">Predicted Outputs</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/reasoning-best-practices"><span class="side-nav-item-name">Reasoning best practices</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/evals-design"><span class="side-nav-item-name">Evals design</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/fine-tuning-best-practices"><span class="side-nav-item-name">Fine-tuning best practices</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/rft-use-cases"><span class="side-nav-item-name">Reinforcement fine-tuning use cases</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/model-selection"><span class="side-nav-item-name">Model selection</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/latency-optimization"><span class="side-nav-item-name">Latency optimization</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/optimizing-llm-accuracy"><span class="side-nav-item-name">Accuracy optimization</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/advanced-usage"><span class="side-nav-item-name">Advanced usage</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/responses-vs-chat-completions"><span class="side-nav-item-name">Responses vs. Chat Completions</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/flex-processing"><span class="side-nav-item-name">Flex processing</span></a></div><div class="side-nav-section"><div class="side-nav-header subheading">Assistants API</div><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/assistants/overview"><span class="side-nav-item-name">Overview</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/assistants/quickstart"><span class="side-nav-item-name">Quickstart</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/assistants/deep-dive"><span class="side-nav-item-name">Deep dive</span></a><a class="scroll-link side-nav-item side-nav-item-has-subitems" data-side-nav-subitems="hidden" href="https://platform.openai.com/docs/assistants/tools"><span class="side-nav-item-name">Tools</span><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24" class="side-nav-mobile-chevron"><path fill-rule="evenodd" d="M4.293 8.293a1 1 0 0 1 1.414 0L12 14.586l6.293-6.293a1 1 0 1 1 1.414 1.414l-7 7a1 1 0 0 1-1.414 0l-7-7a1 1 0 0 1 0-1.414Z" clip-rule="evenodd"></path></svg></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/assistants/whats-new"><span class="side-nav-item-name">What's new?</span></a></div><div class="side-nav-section"><div class="side-nav-header subheading">Resources</div><a href="https://openai.com/policies" class="scroll-link side-nav-item" target="_blank" rel="noreferrer"><span class="side-nav-item-name">Terms and policies</span><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24" class="side-nav-icon"><path fill-rule="evenodd" d="M15 5a1 1 0 1 1 0-2h5a1 1 0 0 1 1 1v5a1 1 0 1 1-2 0V6.414l-5.293 5.293a1 1 0 0 1-1.414-1.414L17.586 5H15ZM4 7a3 3 0 0 1 3-3h3a1 1 0 1 1 0 2H7a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1v-3a1 1 0 1 1 2 0v3a3 3 0 0 1-3 3H7a3 3 0 0 1-3-3V7Z" clip-rule="evenodd"></path></svg></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/changelog"><span class="side-nav-item-name">Changelog</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/your-data"><span class="side-nav-item-name">Your data</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/guides/rate-limits"><span class="side-nav-item-name">Rate limits</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/deprecations"><span class="side-nav-item-name">Deprecations</span></a><a class="scroll-link side-nav-item" href="https://platform.openai.com/docs/mcp"><span class="side-nav-item-name">MCP servers</span></a><a class="scroll-link side-nav-item side-nav-item-has-subitems" data-side-nav-subitems="hidden" href="https://platform.openai.com/docs/actions"><span class="side-nav-item-name">ChatGPT Actions</span><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24" class="side-nav-mobile-chevron"><path fill-rule="evenodd" d="M4.293 8.293a1 1 0 0 1 1.414 0L12 14.586l6.293-6.293a1 1 0 1 1 1.414 1.414l-7 7a1 1 0 0 1-1.414 0l-7-7a1 1 0 0 1 0-1.414Z" clip-rule="evenodd"></path></svg></a></div></div></div></span></div></div></div></div><div class="EDOEc qyrrQ"><div class="q3jBs"><a href="https://cookbook.openai.com/" target="_blank" rel="noopener noreferrer" class="-ySo1 FDGXZ" data-state="closed"><span class="_1h-SG"><span class="-k7Gw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M14.447 7.106a1 1 0 0 1 .447 1.341l-4 8a1 1 0 1 1-1.788-.894l4-8a1 1 0 0 1 1.341-.447ZM6.6 7.2a1 1 0 0 1 .2 1.4L4.25 12l2.55 3.4a1 1 0 0 1-1.6 1.2l-3-4a1 1 0 0 1 0-1.2l3-4a1 1 0 0 1 1.4-.2Zm10.8 0a1 1 0 0 1 1.4.2l3 4a1 1 0 0 1 0 1.2l-3 4a1 1 0 0 1-1.6-1.2l2.55-3.4-2.55-3.4a1 1 0 0 1 .2-1.4Z" clip-rule="evenodd"></path></svg></span><span class="_0LIzz">Cookbook</span></span></a><a href="https://community.openai.com/categories" target="_blank" rel="noopener noreferrer" class="-ySo1 FDGXZ" data-state="closed"><span class="_1h-SG"><span class="-k7Gw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M10.5 8.5a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM12 5a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7ZM3 9.5a1 1 0 1 1 2 0 1 1 0 0 1-2 0Zm1-3a3 3 0 1 0 0 6 3 3 0 0 0 0-6Zm16 2a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm-3 1a3 3 0 1 1 6 0 3 3 0 0 1-6 0ZM8 18c0-.974.438-1.684 1.142-2.185C9.876 15.293 10.911 15 12 15c1.09 0 2.124.293 2.858.815.704.5 1.142 1.21 1.142 2.185a1 1 0 1 0 2 0c0-1.692-.812-2.982-1.983-3.815C14.876 13.373 13.411 13 12 13c-1.41 0-2.876.373-4.017 1.185C6.812 15.018 6 16.308 6 18a1 1 0 1 0 2 0Zm-3.016-3.675a1 1 0 0 1-.809 1.16C2.79 15.732 2 16.486 2 17.5a1 1 0 1 1-2 0c0-2.41 1.978-3.655 3.825-3.985a1 1 0 0 1 1.16.81Zm14.84 1.16a1 1 0 1 1 .351-1.97C22.022 13.845 24 15.09 24 17.5a1 1 0 1 1-2 0c0-1.014-.79-1.768-2.175-2.015Z" clip-rule="evenodd"></path></svg></span><span class="_0LIzz">Forum</span></span></a><button class="-ySo1 FDGXZ" data-state="closed"><span class="_1h-SG"><span class="-k7Gw"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16ZM2 12C2 6.477 6.477 2 12 2s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12Z" clip-rule="evenodd"></path><path fill-rule="evenodd" d="M12 9a1 1 0 0 0-.879.522 1 1 0 0 1-1.754-.96A3 3 0 0 1 12 7c1.515 0 2.567 1.006 2.866 2.189.302 1.189-.156 2.574-1.524 3.258A.618.618 0 0 0 13 13a1 1 0 1 1-2 0c0-.992.56-1.898 1.447-2.342.455-.227.572-.618.48-.978C12.836 9.314 12.529 9 12 9Z" clip-rule="evenodd"></path><path d="M13.1 16a1.1 1.1 0 1 1-2.2 0 1.1 1.1 0 0 1 2.2 0Z"></path></svg></span><span class="_0LIzz">Help</span></span></button></div></div></aside><div class="_7j8ow"><div class="qLnXc"><div class="JGDzZ"><div class="fKGG4"><div class="NmUvH"><span class="block _00hoS"><div class="ImBcX"><div class="docs-scroll-container" data-important-algolia-crawl="true"><div class="page-body full-width flush docs-page"><div class="docs-markdown-page docs-markdown-content markdown-prompt-blockquote"><div class="flex w-full items-start"><div class="docs-markdown-page-inner"><div><div class="title-container flex flex-col lg:flex-row items-baseline justify-between"><div class="order-2 lg:order-1"><h1 id="page-top" class="docs-markdown-page-title m-0">Structured Outputs</h1><div class="docs-markdown-page-subtitle">Ensure responses adhere to a JSON schema.</div></div><div class="w-full lg:w-auto flex justify-between lg:justify-start flex-row lg:flex-col gap-2 items-end -mt-2.5 lg:mt-0 mb-4 lg:mb-0 lg:ml-4 lg:px-1 order-1 lg:order-2"><div class="-order-1 -ml-1.5 lg:ml-0"><button type="button" class="Wmjjd copy-button" data-color="secondary" data-variant="bare" data-size="2xs" data-gutter-size="2xs" data-icon-size="sm"><span class="_6jr41"><span class="eRdFc" data-align="start"><span class="block beN8R"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2V5Zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1v2ZM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1H5Z" clip-rule="evenodd"></path></svg></span></span>Copy page</span></button></div></div></div><div class="anchor-heading-wrapper"><h2 id="try-it-out" class="anchor-heading" data-name="try-it-out">Try it out<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h2></div>
<p>Try it out in the <a href="https://platform.openai.com/playground">Playground</a> or generate a ready-to-use schema definition to experiment with structured outputs.</p>
<span data-state="closed"><button type="button" class="Wmjjd" data-color="neutral" data-variant="filled" data-size="md" data-gutter-size="md" data-icon-size="md" disabled="disabled" aria-label="Generate" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:r13b:" data-state="closed"><span class="_6jr41"><span class="flex items-center" data-icon-only="false"><span class="fq-SE" data-animate="false"><svg width="14" height="15" viewBox="0 0 14 15" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="i8gzK v2EZs"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 0.714966C6.57172 0.714966 6.19841 1.00644 6.09453 1.42193C5.64458 3.22175 5.11525 4.31311 4.3567 5.07167C3.59815 5.83022 2.50678 6.35955 0.706966 6.8095C0.291477 6.91337 -3.32794e-07 7.28669 -3.32794e-07 7.71497C-3.32794e-07 8.14324 0.291477 8.51656 0.706966 8.62043C2.50678 9.07039 3.59815 9.59971 4.3567 10.3583C5.11525 11.1168 5.64458 12.2082 6.09453 14.008C6.19841 14.4235 6.57172 14.715 7 14.715C7.42828 14.715 7.80159 14.4235 7.90547 14.008C8.35542 12.2082 8.88475 11.1168 9.6433 10.3583C10.4019 9.59971 11.4932 9.07039 13.293 8.62043C13.7085 8.51656 14 8.14324 14 7.71497C14 7.28669 13.7085 6.91337 13.293 6.8095C11.4932 6.35955 10.4019 5.83022 9.6433 5.07167C8.88475 4.31311 8.35542 3.22175 7.90547 1.42193C7.80159 1.00644 7.42828 0.714966 7 0.714966Z"></path></svg><svg width="14" height="15" viewBox="0 0 14 15" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="i8gzK b5gx5"><path fill-rule="evenodd" clip-rule="evenodd" d="M7 0.714966C6.57172 0.714966 6.19841 1.00644 6.09453 1.42193C5.64458 3.22175 5.11525 4.31311 4.3567 5.07167C3.59815 5.83022 2.50678 6.35955 0.706966 6.8095C0.291477 6.91337 -3.32794e-07 7.28669 -3.32794e-07 7.71497C-3.32794e-07 8.14324 0.291477 8.51656 0.706966 8.62043C2.50678 9.07039 3.59815 9.59971 4.3567 10.3583C5.11525 11.1168 5.64458 12.2082 6.09453 14.008C6.19841 14.4235 6.57172 14.715 7 14.715C7.42828 14.715 7.80159 14.4235 7.90547 14.008C8.35542 12.2082 8.88475 11.1168 9.6433 10.3583C10.4019 9.59971 11.4932 9.07039 13.293 8.62043C13.7085 8.51656 14 8.14324 14 7.71497C14 7.28669 13.7085 6.91337 13.293 6.8095C11.4932 6.35955 10.4019 5.83022 9.6433 5.07167C8.88475 4.31311 8.35542 3.22175 7.90547 1.42193C7.80159 1.00644 7.42828 0.714966 7 0.714966Z"></path></svg><span class="OfJ2L"></span></span><span class="jr6PP" aria-hidden="true">Generate</span></span></span></button></span>
<div class="anchor-heading-wrapper"><h2 id="introduction" class="anchor-heading" data-name="introduction">Introduction<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h2></div>
<p>JSON is one of the most widely used formats in the world for applications to exchange data.</p>
<p>Structured Outputs is a feature that ensures the model will always generate responses that adhere to your supplied <a href="https://json-schema.org/overview/what-is-jsonschema" target="_blank" rel="noopener noreferrer">JSON Schema</a>, so you don't need to worry about the model omitting a required key, or hallucinating an invalid enum value.</p>
<p>Some benefits of Structured Outputs include:</p>
<ol>
<li><strong>Reliable type-safety:</strong> No need to validate or retry incorrectly formatted responses</li>
<li><strong>Explicit refusals:</strong> Safety-based model refusals are now programmatically detectable</li>
<li><strong>Simpler prompting:</strong> No need for strongly worded prompts to achieve consistent formatting</li>
</ol>
<p>In addition to supporting JSON Schema in the REST API, the OpenAI SDKs for <a href="https://github.com/openai/openai-python/blob/main/helpers.md#structured-outputs-parsing-helpers" target="_blank" rel="noopener noreferrer">Python</a> and <a href="https://github.com/openai/openai-node/blob/master/helpers.md#structured-outputs-parsing-helpers" target="_blank" rel="noopener noreferrer">JavaScript</a> also make it easy to define object schemas using <a href="https://docs.pydantic.dev/latest/" target="_blank" rel="noopener noreferrer">Pydantic</a> and <a href="https://zod.dev/" target="_blank" rel="noopener noreferrer">Zod</a> respectively. Below, you can see how to extract information from unstructured text that conforms to a schema defined in code.</p>

<div class="code-sample light-mode"><div class="code-sample-header"><div class="code-sample-title body-small">Getting a structured response</div><div class="exclude-from-copy"><button id="select-trigger-radix-:r13d:" type="button" class="ICo9Y" data-variant="bare" data-size="sm" data-gutter-size="xs" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:r13f:" data-state="closed"><span class="RWOJJ">python</span><div class="relative flex items-center gap-2"><svg width="8" height="11" viewBox="0 0 10 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="uF-Qb"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.34151 0.747423C4.71854 0.417526 5.28149 0.417526 5.65852 0.747423L9.65852 4.24742C10.0742 4.61111 10.1163 5.24287 9.75259 5.6585C9.38891 6.07414 8.75715 6.11626 8.34151 5.75258L5.00001 2.82877L1.65852 5.75258C1.24288 6.11626 0.61112 6.07414 0.247438 5.6585C-0.116244 5.24287 -0.0741267 4.61111 0.34151 4.24742L4.34151 0.747423ZM0.246065 10.3578C0.608879 9.94139 1.24055 9.89795 1.65695 10.2608L5.00001 13.1737L8.34308 10.2608C8.75948 9.89795 9.39115 9.94139 9.75396 10.3578C10.1168 10.7742 10.0733 11.4058 9.65695 11.7687L5.65695 15.2539C5.28043 15.582 4.7196 15.582 4.34308 15.2539L0.343082 11.7687C-0.0733128 11.4058 -0.116749 10.7742 0.246065 10.3578Z"></path></svg></div></button></div><button type="button" class="Wmjjd Ry4P0" data-color="secondary" data-variant="bare" data-size="sm" data-gutter-size="xs" data-icon-size="sm"><span class="_6jr41"><span class="eRdFc" data-align="start"><span class="block beN8R"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2V5Zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1v2ZM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1H5Z" clip-rule="evenodd"></path></svg></span></span></span></button></div><div class="code-sample-body code-sample-body-small code-sample-body-with-header"><div class="code-block hidden"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-javascript" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span><span class="react-syntax-highlighter-line-number">24
</span><span class="react-syntax-highlighter-line-number">25
</span><span class="react-syntax-highlighter-line-number">26
</span><span class="react-syntax-highlighter-line-number">27
</span></code><span><span class="hljs-keyword">import</span><span> OpenAI </span><span class="hljs-keyword">from</span><span> </span><span class="hljs-string">"openai"</span><span>;
</span></span><span><span></span><span class="hljs-keyword">import</span><span> { zodTextFormat } </span><span class="hljs-keyword">from</span><span> </span><span class="hljs-string">"openai/helpers/zod"</span><span>;
</span></span><span><span></span><span class="hljs-keyword">import</span><span> { z } </span><span class="hljs-keyword">from</span><span> </span><span class="hljs-string">"zod"</span><span>;
</span></span><span>
</span><span><span></span><span class="hljs-keyword">const</span><span> openai = </span><span class="hljs-keyword">new</span><span> OpenAI();
</span></span><span>
</span><span><span></span><span class="hljs-keyword">const</span><span> CalendarEvent = z.object({
</span></span><span><span>  </span><span class="hljs-attr">name</span><span>: z.string(),
</span></span><span><span>  </span><span class="hljs-attr">date</span><span>: z.string(),
</span></span><span><span>  </span><span class="hljs-attr">participants</span><span>: z.array(z.string()),
</span></span><span>});
</span><span>
</span><span><span></span><span class="hljs-keyword">const</span><span> response = </span><span class="hljs-keyword">await</span><span> openai.responses.parse({
</span></span><span><span>  </span><span class="hljs-attr">model</span><span>: </span><span class="hljs-string">"gpt-4o-2024-08-06"</span><span>,
</span></span><span><span>  </span><span class="hljs-attr">input</span><span>: [
</span></span><span><span>    { </span><span class="hljs-attr">role</span><span>: </span><span class="hljs-string">"system"</span><span>, </span><span class="hljs-attr">content</span><span>: </span><span class="hljs-string">"Extract the event information."</span><span> },
</span></span><span>    {
</span><span><span>      </span><span class="hljs-attr">role</span><span>: </span><span class="hljs-string">"user"</span><span>,
</span></span><span><span>      </span><span class="hljs-attr">content</span><span>: </span><span class="hljs-string">"Alice and Bob are going to a science fair on Friday."</span><span>,
</span></span><span>    },
</span><span>  ],
</span><span><span>  </span><span class="hljs-attr">text</span><span>: {
</span></span><span><span>    </span><span class="hljs-attr">format</span><span>: zodTextFormat(CalendarEvent, </span><span class="hljs-string">"event"</span><span>),
</span></span><span>  },
</span><span>});
</span><span>
</span><span><span></span><span class="hljs-keyword">const</span><span> event = response.output_parsed;</span></span></code></pre></div><div class="code-block"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-python" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span></code><span><span class="hljs-keyword">from</span><span> openai </span><span class="hljs-keyword">import</span><span> OpenAI
</span></span><span><span></span><span class="hljs-keyword">from</span><span> pydantic </span><span class="hljs-keyword">import</span><span> BaseModel
</span></span><span>
</span><span>client = OpenAI()
</span><span>
</span><span><span></span><span class="hljs-class hljs-keyword">class</span><span class="hljs-class"> </span><span class="hljs-class hljs-title">CalendarEvent</span><span class="hljs-class">(</span><span class="hljs-class hljs-params">BaseModel</span><span class="hljs-class">):</span><span>
</span></span><span><span>    name: </span><span class="hljs-built_in">str</span><span>
</span></span><span><span>    date: </span><span class="hljs-built_in">str</span><span>
</span></span><span><span>    participants: </span><span class="hljs-built_in">list</span><span>[</span><span class="hljs-built_in">str</span><span>]
</span></span><span>
</span><span>response = client.responses.parse(
</span><span><span>    model=</span><span class="hljs-string">"gpt-4o-2024-08-06"</span><span>,
</span></span><span><span>    </span><span class="hljs-built_in">input</span><span>=[
</span></span><span><span>        {</span><span class="hljs-string">"role"</span><span>: </span><span class="hljs-string">"system"</span><span>, </span><span class="hljs-string">"content"</span><span>: </span><span class="hljs-string">"Extract the event information."</span><span>},
</span></span><span>        {
</span><span><span>            </span><span class="hljs-string">"role"</span><span>: </span><span class="hljs-string">"user"</span><span>,
</span></span><span><span>            </span><span class="hljs-string">"content"</span><span>: </span><span class="hljs-string">"Alice and Bob are going to a science fair on Friday."</span><span>,
</span></span><span>        },
</span><span>    ],
</span><span>    text_format=CalendarEvent,
</span><span>)
</span><span>
</span><span>event = response.output_parsed</span></code></pre></div></div></div>
<div class="anchor-heading-wrapper"><h3 id="supported-models" class="anchor-heading" data-name="supported-models">Supported models<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h3></div>
<p>Structured Outputs is available in our <a href="https://platform.openai.com/docs/models">latest large language models</a>, starting with GPT-4o. Older models like <code>gpt-4-turbo</code> and earlier may use <a href="#json-mode">JSON mode</a> instead.</p>

<div class="anchor-heading-wrapper"><h2 id="function-calling-vs-response-format" class="anchor-heading" data-name="function-calling-vs-response-format">When to use Structured Outputs via function calling vs via <span class="monospace">text.format</span><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h2></div>
<p>Structured Outputs is available in two forms in the OpenAI API:</p>
<ol>
<li>When using <a href="https://platform.openai.com/docs/guides/function-calling">function calling</a></li>
<li>When using a <code>json_schema</code> response format</li>
</ol>
<p>Function calling is useful when you are building an application that bridges the models and functionality of your application.</p>
<p>For example, you can give the model access to functions that query a 
database in order to build an AI assistant that can help users with 
their orders, or functions that can interact with the UI.</p>
<p>Conversely, Structured Outputs via <code>response_format</code> are 
more suitable when you want to indicate a structured schema for use when
 the model responds to the user, rather than when the model calls a 
tool.</p>
<p>For example, if you are building a math tutoring application, you 
might want the assistant to respond to your user using a specific JSON 
Schema so that you can generate a UI that displays different parts of 
the model's output in distinct ways.</p>
<p>Put simply:</p>

<ul>
<li>If you are connecting the model to tools, functions, data, etc. in your system, then you should use function calling</li>
<li>If you want to structure the model's output when it responds to the user, then you should use a structured <code>text.format</code></li>
</ul>

<div class="eyfSy"><div class="kQ2ry" data-variant="neutral"><div class="KtDSh"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path d="M13 12a1 1 0 1 0-2 0v4a1 1 0 1 0 2 0v-4Zm-1-2.5A1.25 1.25 0 1 0 12 7a1.25 1.25 0 0 0 0 2.5Z"></path><path fill-rule="evenodd" d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2ZM4 12a8 8 0 1 1 16 0 8 8 0 0 1-16 0Z" clip-rule="evenodd"></path></svg></div><div class="d3NUC"><div class="hFW1r"><div class="_9ohtt"><p>The
 remainder of this guide will focus on non-function calling use cases in
 the Responses API. To learn more about how to use Structured Outputs 
with function calling, check out the <a href="https://platform.openai.com/docs/guides/function-calling#function-calling-with-structured-outputs">Function Calling</a> guide.</p></div></div></div></div></div>
<div class="anchor-heading-wrapper"><h3 id="structured-outputs-vs-json-mode" class="anchor-heading" data-name="structured-outputs-vs-json-mode">Structured Outputs vs JSON mode<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h3></div>
<p>Structured Outputs is the evolution of <a href="#json-mode">JSON mode</a>.
 While both ensure valid JSON is produced, only Structured Outputs 
ensure schema adherance. Both Structured Outputs and JSON mode are 
supported in the Responses API,Chat Completions API, Assistants API, 
Fine-tuning API and Batch API.</p>
<p>We recommend always using Structured Outputs instead of JSON mode when possible.</p>
<p>However, Structured Outputs with <code>response_format: {type: "json_schema", ...}</code> is only supported with the <code>gpt-4o-mini</code>, <code>gpt-4o-mini-2024-07-18</code>, and <code>gpt-4o-2024-08-06</code> model snapshots and later.</p>

<table><thead><tr><th></th><th>Structured Outputs</th><th>JSON Mode</th></tr></thead><tbody><tr><td><strong>Outputs valid JSON</strong></td><td>Yes</td><td>Yes</td></tr><tr><td><strong>Adheres to schema</strong></td><td>Yes (see <a href="#supported-schemas">supported schemas</a>)</td><td>No</td></tr><tr><td><strong>Compatible models</strong></td><td><code>gpt-4o-mini</code>, <code>gpt-4o-2024-08-06</code>, and later</td><td><code>gpt-3.5-turbo</code>, <code>gpt-4-*</code> and <code>gpt-4o-*</code> models</td></tr><tr><td><strong>Enabling</strong></td><td><code>text: { format: { type: "json_schema", "strict": true, "schema": ... } }</code></td><td><code>text: { format: { type: "json_object" } }</code></td></tr></tbody></table>
<div class="anchor-heading-wrapper"><h2 id="examples" class="anchor-heading" data-name="examples">Examples<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h2></div>
<div class="mt-6"><div class="mb-6 exclude-from-copy"><div class="flex"><div role="group" dir="ltr" class="Z6PRs" data-block="false" data-size="md" data-variant="pill" aria-label="Content switcher" tabindex="0" style="outline: none;"><div class="-X3Ew" data-variant="pill" style="width: 132px; transform: translateX(2px); transition: width var(--segmented-control-transition-duration) var(--cubic-enter), transform var(--segmented-control-transition-duration) var(--cubic-enter);"></div><button type="button" data-state="on" role="radio" aria-checked="true" class="fC8KU" tabindex="-1" data-radix-collection-item=""><span class="JfMyo" aria-hidden="true">Chain of thought</span><span class="ZDw29">Chain of thought</span></button><button type="button" data-state="off" role="radio" aria-checked="false" class="fC8KU" tabindex="-1" data-radix-collection-item=""><span class="JfMyo" aria-hidden="true">Structured data extraction</span><span class="ZDw29">Structured data extraction</span></button><button type="button" data-state="off" role="radio" aria-checked="false" class="fC8KU" tabindex="-1" data-radix-collection-item=""><span class="JfMyo" aria-hidden="true">UI generation</span><span class="ZDw29">UI generation</span></button><button type="button" data-state="off" role="radio" aria-checked="false" class="fC8KU" tabindex="-1" data-radix-collection-item=""><span class="JfMyo" aria-hidden="true">Moderation</span><span class="ZDw29">Moderation</span></button></div></div></div><div><div class="hidden">Chain of thought</div><div class=""><div class="anchor-heading-wrapper"><h3 id="chain-of-thought" class="anchor-heading" data-name="chain-of-thought">Chain of thought<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h3></div>
<p>You can ask the model to output an answer in a structured, step-by-step way, to guide the user through the solution.</p>

<div class="code-sample light-mode"><div class="code-sample-header"><div class="code-sample-title body-small">Structured Outputs for chain-of-thought math tutoring</div><div class="exclude-from-copy"><button id="select-trigger-radix-:r13k:" type="button" class="ICo9Y" data-variant="bare" data-size="sm" data-gutter-size="xs" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:r13m:" data-state="closed"><span class="RWOJJ">python</span><div class="relative flex items-center gap-2"><svg width="8" height="11" viewBox="0 0 10 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="uF-Qb"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.34151 0.747423C4.71854 0.417526 5.28149 0.417526 5.65852 0.747423L9.65852 4.24742C10.0742 4.61111 10.1163 5.24287 9.75259 5.6585C9.38891 6.07414 8.75715 6.11626 8.34151 5.75258L5.00001 2.82877L1.65852 5.75258C1.24288 6.11626 0.61112 6.07414 0.247438 5.6585C-0.116244 5.24287 -0.0741267 4.61111 0.34151 4.24742L4.34151 0.747423ZM0.246065 10.3578C0.608879 9.94139 1.24055 9.89795 1.65695 10.2608L5.00001 13.1737L8.34308 10.2608C8.75948 9.89795 9.39115 9.94139 9.75396 10.3578C10.1168 10.7742 10.0733 11.4058 9.65695 11.7687L5.65695 15.2539C5.28043 15.582 4.7196 15.582 4.34308 15.2539L0.343082 11.7687C-0.0733128 11.4058 -0.116749 10.7742 0.246065 10.3578Z"></path></svg></div></button></div><button type="button" class="Wmjjd Ry4P0" data-color="secondary" data-variant="bare" data-size="sm" data-gutter-size="xs" data-icon-size="sm"><span class="_6jr41"><span class="eRdFc" data-align="start"><span class="block beN8R"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2V5Zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1v2ZM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1H5Z" clip-rule="evenodd"></path></svg></span></span></span></button></div><div class="code-sample-body code-sample-body-small code-sample-body-with-header"><div class="code-block hidden"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-javascript" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span><span class="react-syntax-highlighter-line-number">24
</span><span class="react-syntax-highlighter-line-number">25
</span><span class="react-syntax-highlighter-line-number">26
</span><span class="react-syntax-highlighter-line-number">27
</span><span class="react-syntax-highlighter-line-number">28
</span><span class="react-syntax-highlighter-line-number">29
</span><span class="react-syntax-highlighter-line-number">30
</span><span class="react-syntax-highlighter-line-number">31
</span><span class="react-syntax-highlighter-line-number">32
</span></code><span><span class="hljs-keyword">import</span><span> OpenAI </span><span class="hljs-keyword">from</span><span> </span><span class="hljs-string">"openai"</span><span>;
</span></span><span><span></span><span class="hljs-keyword">import</span><span> { zodTextFormat } </span><span class="hljs-keyword">from</span><span> </span><span class="hljs-string">"openai/helpers/zod"</span><span>;
</span></span><span><span></span><span class="hljs-keyword">import</span><span> { z } </span><span class="hljs-keyword">from</span><span> </span><span class="hljs-string">"zod"</span><span>;
</span></span><span>
</span><span><span></span><span class="hljs-keyword">const</span><span> openai = </span><span class="hljs-keyword">new</span><span> OpenAI();
</span></span><span>
</span><span><span></span><span class="hljs-keyword">const</span><span> Step = z.object({
</span></span><span><span>  </span><span class="hljs-attr">explanation</span><span>: z.string(),
</span></span><span><span>  </span><span class="hljs-attr">output</span><span>: z.string(),
</span></span><span>});
</span><span>
</span><span><span></span><span class="hljs-keyword">const</span><span> MathReasoning = z.object({
</span></span><span><span>  </span><span class="hljs-attr">steps</span><span>: z.array(Step),
</span></span><span><span>  </span><span class="hljs-attr">final_answer</span><span>: z.string(),
</span></span><span>});
</span><span>
</span><span><span></span><span class="hljs-keyword">const</span><span> response = </span><span class="hljs-keyword">await</span><span> openai.responses.parse({
</span></span><span><span>  </span><span class="hljs-attr">model</span><span>: </span><span class="hljs-string">"gpt-4o-2024-08-06"</span><span>,
</span></span><span><span>  </span><span class="hljs-attr">input</span><span>: [
</span></span><span>    {
</span><span><span>      </span><span class="hljs-attr">role</span><span>: </span><span class="hljs-string">"system"</span><span>,
</span></span><span><span>      </span><span class="hljs-attr">content</span><span>:
</span></span><span><span>        </span><span class="hljs-string">"You are a helpful math tutor. Guide the user through the solution step by step."</span><span>,
</span></span><span>    },
</span><span><span>    { </span><span class="hljs-attr">role</span><span>: </span><span class="hljs-string">"user"</span><span>, </span><span class="hljs-attr">content</span><span>: </span><span class="hljs-string">"how can I solve 8x + 7 = -23"</span><span> },
</span></span><span>  ],
</span><span><span>  </span><span class="hljs-attr">text</span><span>: {
</span></span><span><span>    </span><span class="hljs-attr">format</span><span>: zodTextFormat(MathReasoning, </span><span class="hljs-string">"math_reasoning"</span><span>),
</span></span><span>  },
</span><span>});
</span><span>
</span><span><span></span><span class="hljs-keyword">const</span><span> math_reasoning = response.output_parsed;</span></span></code></pre></div><div class="code-block"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-python" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span><span class="react-syntax-highlighter-line-number">24
</span><span class="react-syntax-highlighter-line-number">25
</span><span class="react-syntax-highlighter-line-number">26
</span></code><span><span class="hljs-keyword">from</span><span> openai </span><span class="hljs-keyword">import</span><span> OpenAI
</span></span><span><span></span><span class="hljs-keyword">from</span><span> pydantic </span><span class="hljs-keyword">import</span><span> BaseModel
</span></span><span>
</span><span>client = OpenAI()
</span><span>
</span><span><span></span><span class="hljs-class hljs-keyword">class</span><span class="hljs-class"> </span><span class="hljs-class hljs-title">Step</span><span class="hljs-class">(</span><span class="hljs-class hljs-params">BaseModel</span><span class="hljs-class">):</span><span>
</span></span><span><span>    explanation: </span><span class="hljs-built_in">str</span><span>
</span></span><span><span>    output: </span><span class="hljs-built_in">str</span><span>
</span></span><span>
</span><span><span></span><span class="hljs-class hljs-keyword">class</span><span class="hljs-class"> </span><span class="hljs-class hljs-title">MathReasoning</span><span class="hljs-class">(</span><span class="hljs-class hljs-params">BaseModel</span><span class="hljs-class">):</span><span>
</span></span><span><span>    steps: </span><span class="hljs-built_in">list</span><span>[Step]
</span></span><span><span>    final_answer: </span><span class="hljs-built_in">str</span><span>
</span></span><span>
</span><span>response = client.responses.parse(
</span><span><span>    model=</span><span class="hljs-string">"gpt-4o-2024-08-06"</span><span>,
</span></span><span><span>    </span><span class="hljs-built_in">input</span><span>=[
</span></span><span>        {
</span><span><span>            </span><span class="hljs-string">"role"</span><span>: </span><span class="hljs-string">"system"</span><span>,
</span></span><span><span>            </span><span class="hljs-string">"content"</span><span>: </span><span class="hljs-string">"You are a helpful math tutor. Guide the user through the solution step by step."</span><span>,
</span></span><span>        },
</span><span><span>        {</span><span class="hljs-string">"role"</span><span>: </span><span class="hljs-string">"user"</span><span>, </span><span class="hljs-string">"content"</span><span>: </span><span class="hljs-string">"how can I solve 8x + 7 = -23"</span><span>},
</span></span><span>    ],
</span><span>    text_format=MathReasoning,
</span><span>)
</span><span>
</span><span>math_reasoning = response.output_parsed</span></code></pre></div><div class="code-block hidden"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-bash" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span><span class="react-syntax-highlighter-line-number">24
</span><span class="react-syntax-highlighter-line-number">25
</span><span class="react-syntax-highlighter-line-number">26
</span><span class="react-syntax-highlighter-line-number">27
</span><span class="react-syntax-highlighter-line-number">28
</span><span class="react-syntax-highlighter-line-number">29
</span><span class="react-syntax-highlighter-line-number">30
</span><span class="react-syntax-highlighter-line-number">31
</span><span class="react-syntax-highlighter-line-number">32
</span><span class="react-syntax-highlighter-line-number">33
</span><span class="react-syntax-highlighter-line-number">34
</span><span class="react-syntax-highlighter-line-number">35
</span><span class="react-syntax-highlighter-line-number">36
</span><span class="react-syntax-highlighter-line-number">37
</span><span class="react-syntax-highlighter-line-number">38
</span><span class="react-syntax-highlighter-line-number">39
</span><span class="react-syntax-highlighter-line-number">40
</span><span class="react-syntax-highlighter-line-number">41
</span><span class="react-syntax-highlighter-line-number">42
</span><span class="react-syntax-highlighter-line-number">43
</span></code><span><span>curl https://api.openai.com/v1/responses \
</span></span><span><span>  -H </span><span class="hljs-string">"Authorization: Bearer </span><span class="hljs-string hljs-variable">$OPENAI_API_KEY</span><span class="hljs-string">"</span><span> \
</span></span><span><span>  -H </span><span class="hljs-string">"Content-Type: application/json"</span><span> \
</span></span><span><span>  -d </span><span class="hljs-string">'{
</span></span><span class="hljs-string">    "model": "gpt-4o-2024-08-06",
</span><span class="hljs-string">    "input": [
</span><span class="hljs-string">      {
</span><span class="hljs-string">        "role": "system",
</span><span class="hljs-string">        "content": "You are a helpful math tutor. Guide the user through the solution step by step."
</span><span class="hljs-string">      },
</span><span class="hljs-string">      {
</span><span class="hljs-string">        "role": "user",
</span><span class="hljs-string">        "content": "how can I solve 8x + 7 = -23"
</span><span class="hljs-string">      }
</span><span class="hljs-string">    ],
</span><span class="hljs-string">    "text": {
</span><span class="hljs-string">      "format": {
</span><span class="hljs-string">        "type": "json_schema",
</span><span class="hljs-string">        "name": "math_reasoning",
</span><span class="hljs-string">        "schema": {
</span><span class="hljs-string">          "type": "object",
</span><span class="hljs-string">          "properties": {
</span><span class="hljs-string">            "steps": {
</span><span class="hljs-string">              "type": "array",
</span><span class="hljs-string">              "items": {
</span><span class="hljs-string">                "type": "object",
</span><span class="hljs-string">                "properties": {
</span><span class="hljs-string">                  "explanation": { "type": "string" },
</span><span class="hljs-string">                  "output": { "type": "string" }
</span><span class="hljs-string">                },
</span><span class="hljs-string">                "required": ["explanation", "output"],
</span><span class="hljs-string">                "additionalProperties": false
</span><span class="hljs-string">              }
</span><span class="hljs-string">            },
</span><span class="hljs-string">            "final_answer": { "type": "string" }
</span><span class="hljs-string">          },
</span><span class="hljs-string">          "required": ["steps", "final_answer"],
</span><span class="hljs-string">          "additionalProperties": false
</span><span class="hljs-string">        },
</span><span class="hljs-string">        "strict": true
</span><span class="hljs-string">      }
</span><span class="hljs-string">    }
</span><span class="hljs-string">  }'</span></code></pre></div></div></div>
<div class="anchor-heading-wrapper"><h4 id="example-response" class="anchor-heading" data-name="example-response">Example response<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h4></div>
<div class="code-sample light-mode"><div class="code-sample-body code-sample-body-large"><div class="code-sample-copy-float"><button type="button" class="Wmjjd Ry4P0" data-color="secondary" data-variant="bare" data-size="sm" data-gutter-size="xs" data-icon-size="sm"><span class="_6jr41"><span class="eRdFc" data-align="start"><span class="block beN8R"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2V5Zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1v2ZM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1H5Z" clip-rule="evenodd"></path></svg></span></span></span></button></div><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-json" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span><span class="react-syntax-highlighter-line-number">24
</span><span class="react-syntax-highlighter-line-number">25
</span></code><span><span>{
</span></span><span><span>  </span><span class="hljs-attr">"steps"</span><span>: [
</span></span><span>    {
</span><span><span>      </span><span class="hljs-attr">"explanation"</span><span>: </span><span class="hljs-string">"Start with the equation 8x + 7 = -23."</span><span>,
</span></span><span><span>      </span><span class="hljs-attr">"output"</span><span>: </span><span class="hljs-string">"8x + 7 = -23"</span><span>
</span></span><span>    },
</span><span>    {
</span><span><span>      </span><span class="hljs-attr">"explanation"</span><span>: </span><span class="hljs-string">"Subtract 7 from both sides to isolate the term with the variable."</span><span>,
</span></span><span><span>      </span><span class="hljs-attr">"output"</span><span>: </span><span class="hljs-string">"8x = -23 - 7"</span><span>
</span></span><span>    },
</span><span>    {
</span><span><span>      </span><span class="hljs-attr">"explanation"</span><span>: </span><span class="hljs-string">"Simplify the right side of the equation."</span><span>,
</span></span><span><span>      </span><span class="hljs-attr">"output"</span><span>: </span><span class="hljs-string">"8x = -30"</span><span>
</span></span><span>    },
</span><span>    {
</span><span><span>      </span><span class="hljs-attr">"explanation"</span><span>: </span><span class="hljs-string">"Divide both sides by 8 to solve for x."</span><span>,
</span></span><span><span>      </span><span class="hljs-attr">"output"</span><span>: </span><span class="hljs-string">"x = -30 / 8"</span><span>
</span></span><span>    },
</span><span>    {
</span><span><span>      </span><span class="hljs-attr">"explanation"</span><span>: </span><span class="hljs-string">"Simplify the fraction."</span><span>,
</span></span><span><span>      </span><span class="hljs-attr">"output"</span><span>: </span><span class="hljs-string">"x = -15 / 4"</span><span>
</span></span><span>    }
</span><span>  ],
</span><span><span>  </span><span class="hljs-attr">"final_answer"</span><span>: </span><span class="hljs-string">"x = -15 / 4"</span><span>
</span></span><span>}</span></code></pre></div></div></div></div><div><div class="hidden">Structured data extraction</div><div class="hidden"><div class="anchor-heading-wrapper"><h3 id="structured-data-extraction" class="anchor-heading" data-name="structured-data-extraction">Structured data extraction<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h3></div>
<p>You can define structured fields to extract from unstructured input data, such as research papers.</p>

<div class="code-sample light-mode"><div class="code-sample-header"><div class="code-sample-title body-small">Extracting data from research papers using Structured Outputs</div><div class="exclude-from-copy"><button id="select-trigger-radix-:r13n:" type="button" class="ICo9Y" data-variant="bare" data-size="sm" data-gutter-size="xs" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:r13p:" data-state="closed"><span class="RWOJJ">python</span><div class="relative flex items-center gap-2"><svg width="8" height="11" viewBox="0 0 10 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="uF-Qb"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.34151 0.747423C4.71854 0.417526 5.28149 0.417526 5.65852 0.747423L9.65852 4.24742C10.0742 4.61111 10.1163 5.24287 9.75259 5.6585C9.38891 6.07414 8.75715 6.11626 8.34151 5.75258L5.00001 2.82877L1.65852 5.75258C1.24288 6.11626 0.61112 6.07414 0.247438 5.6585C-0.116244 5.24287 -0.0741267 4.61111 0.34151 4.24742L4.34151 0.747423ZM0.246065 10.3578C0.608879 9.94139 1.24055 9.89795 1.65695 10.2608L5.00001 13.1737L8.34308 10.2608C8.75948 9.89795 9.39115 9.94139 9.75396 10.3578C10.1168 10.7742 10.0733 11.4058 9.65695 11.7687L5.65695 15.2539C5.28043 15.582 4.7196 15.582 4.34308 15.2539L0.343082 11.7687C-0.0733128 11.4058 -0.116749 10.7742 0.246065 10.3578Z"></path></svg></div></button></div><button type="button" class="Wmjjd Ry4P0" data-color="secondary" data-variant="bare" data-size="sm" data-gutter-size="xs" data-icon-size="sm"><span class="_6jr41"><span class="eRdFc" data-align="start"><span class="block beN8R"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2V5Zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1v2ZM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1H5Z" clip-rule="evenodd"></path></svg></span></span></span></button></div><div class="code-sample-body code-sample-body-small code-sample-body-with-header"><div class="code-block hidden"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-javascript" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span><span class="react-syntax-highlighter-line-number">24
</span><span class="react-syntax-highlighter-line-number">25
</span><span class="react-syntax-highlighter-line-number">26
</span><span class="react-syntax-highlighter-line-number">27
</span><span class="react-syntax-highlighter-line-number">28
</span><span class="react-syntax-highlighter-line-number">29
</span></code><span><span class="hljs-keyword">import</span><span> OpenAI </span><span class="hljs-keyword">from</span><span> </span><span class="hljs-string">"openai"</span><span>;
</span></span><span><span></span><span class="hljs-keyword">import</span><span> { zodTextFormat } </span><span class="hljs-keyword">from</span><span> </span><span class="hljs-string">"openai/helpers/zod"</span><span>;
</span></span><span><span></span><span class="hljs-keyword">import</span><span> { z } </span><span class="hljs-keyword">from</span><span> </span><span class="hljs-string">"zod"</span><span>;
</span></span><span>
</span><span><span></span><span class="hljs-keyword">const</span><span> openai = </span><span class="hljs-keyword">new</span><span> OpenAI();
</span></span><span>
</span><span><span></span><span class="hljs-keyword">const</span><span> ResearchPaperExtraction = z.object({
</span></span><span><span>  </span><span class="hljs-attr">title</span><span>: z.string(),
</span></span><span><span>  </span><span class="hljs-attr">authors</span><span>: z.array(z.string()),
</span></span><span><span>  </span><span class="hljs-attr">abstract</span><span>: z.string(),
</span></span><span><span>  </span><span class="hljs-attr">keywords</span><span>: z.array(z.string()),
</span></span><span>});
</span><span>
</span><span><span></span><span class="hljs-keyword">const</span><span> response = </span><span class="hljs-keyword">await</span><span> openai.responses.parse({
</span></span><span><span>  </span><span class="hljs-attr">model</span><span>: </span><span class="hljs-string">"gpt-4o-2024-08-06"</span><span>,
</span></span><span><span>  </span><span class="hljs-attr">input</span><span>: [
</span></span><span>    {
</span><span><span>      </span><span class="hljs-attr">role</span><span>: </span><span class="hljs-string">"system"</span><span>,
</span></span><span><span>      </span><span class="hljs-attr">content</span><span>:
</span></span><span><span>        </span><span class="hljs-string">"You are an expert at structured data extraction. You will be given unstructured text from a research paper and should convert it into the given structure."</span><span>,
</span></span><span>    },
</span><span><span>    { </span><span class="hljs-attr">role</span><span>: </span><span class="hljs-string">"user"</span><span>, </span><span class="hljs-attr">content</span><span>: </span><span class="hljs-string">"..."</span><span> },
</span></span><span>  ],
</span><span><span>  </span><span class="hljs-attr">text</span><span>: {
</span></span><span><span>    </span><span class="hljs-attr">format</span><span>: zodTextFormat(ResearchPaperExtraction, </span><span class="hljs-string">"research_paper_extraction"</span><span>),
</span></span><span>  },
</span><span>});
</span><span>
</span><span><span></span><span class="hljs-keyword">const</span><span> research_paper = response.output_parsed;</span></span></code></pre></div><div class="code-block"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-python" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span><span class="react-syntax-highlighter-line-number">24
</span></code><span><span class="hljs-keyword">from</span><span> openai </span><span class="hljs-keyword">import</span><span> OpenAI
</span></span><span><span></span><span class="hljs-keyword">from</span><span> pydantic </span><span class="hljs-keyword">import</span><span> BaseModel
</span></span><span>
</span><span>client = OpenAI()
</span><span>
</span><span><span></span><span class="hljs-class hljs-keyword">class</span><span class="hljs-class"> </span><span class="hljs-class hljs-title">ResearchPaperExtraction</span><span class="hljs-class">(</span><span class="hljs-class hljs-params">BaseModel</span><span class="hljs-class">):</span><span>
</span></span><span><span>    title: </span><span class="hljs-built_in">str</span><span>
</span></span><span><span>    authors: </span><span class="hljs-built_in">list</span><span>[</span><span class="hljs-built_in">str</span><span>]
</span></span><span><span>    abstract: </span><span class="hljs-built_in">str</span><span>
</span></span><span><span>    keywords: </span><span class="hljs-built_in">list</span><span>[</span><span class="hljs-built_in">str</span><span>]
</span></span><span>
</span><span>response = client.responses.parse(
</span><span><span>    model=</span><span class="hljs-string">"gpt-4o-2024-08-06"</span><span>,
</span></span><span><span>    </span><span class="hljs-built_in">input</span><span>=[
</span></span><span>        {
</span><span><span>            </span><span class="hljs-string">"role"</span><span>: </span><span class="hljs-string">"system"</span><span>,
</span></span><span><span>            </span><span class="hljs-string">"content"</span><span>: </span><span class="hljs-string">"You are an expert at structured data extraction. You will be given unstructured text from a research paper and should convert it into the given structure."</span><span>,
</span></span><span>        },
</span><span><span>        {</span><span class="hljs-string">"role"</span><span>: </span><span class="hljs-string">"user"</span><span>, </span><span class="hljs-string">"content"</span><span>: </span><span class="hljs-string">"..."</span><span>},
</span></span><span>    ],
</span><span>    text_format=ResearchPaperExtraction,
</span><span>)
</span><span>
</span><span>research_paper = response.output_parsed</span></code></pre></div><div class="code-block hidden"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-bash" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span><span class="react-syntax-highlighter-line-number">24
</span><span class="react-syntax-highlighter-line-number">25
</span><span class="react-syntax-highlighter-line-number">26
</span><span class="react-syntax-highlighter-line-number">27
</span><span class="react-syntax-highlighter-line-number">28
</span><span class="react-syntax-highlighter-line-number">29
</span><span class="react-syntax-highlighter-line-number">30
</span><span class="react-syntax-highlighter-line-number">31
</span><span class="react-syntax-highlighter-line-number">32
</span><span class="react-syntax-highlighter-line-number">33
</span><span class="react-syntax-highlighter-line-number">34
</span><span class="react-syntax-highlighter-line-number">35
</span><span class="react-syntax-highlighter-line-number">36
</span><span class="react-syntax-highlighter-line-number">37
</span><span class="react-syntax-highlighter-line-number">38
</span><span class="react-syntax-highlighter-line-number">39
</span><span class="react-syntax-highlighter-line-number">40
</span></code><span><span>curl https://api.openai.com/v1/responses \
</span></span><span><span>  -H </span><span class="hljs-string">"Authorization: Bearer </span><span class="hljs-string hljs-variable">$OPENAI_API_KEY</span><span class="hljs-string">"</span><span> \
</span></span><span><span>  -H </span><span class="hljs-string">"Content-Type: application/json"</span><span> \
</span></span><span><span>  -d </span><span class="hljs-string">'{
</span></span><span class="hljs-string">    "model": "gpt-4o-2024-08-06",
</span><span class="hljs-string">    "input": [
</span><span class="hljs-string">      {
</span><span class="hljs-string">        "role": "system",
</span><span class="hljs-string">        "content": "You are an expert at structured data extraction. You will be given unstructured text from a research paper and should convert it into the given structure."
</span><span class="hljs-string">      },
</span><span class="hljs-string">      {
</span><span class="hljs-string">        "role": "user",
</span><span class="hljs-string">        "content": "..."
</span><span class="hljs-string">      }
</span><span class="hljs-string">    ],
</span><span class="hljs-string">    "text": {
</span><span class="hljs-string">      "format": {
</span><span class="hljs-string">        "type": "json_schema",
</span><span class="hljs-string">        "name": "research_paper_extraction",
</span><span class="hljs-string">        "schema": {
</span><span class="hljs-string">          "type": "object",
</span><span class="hljs-string">          "properties": {
</span><span class="hljs-string">            "title": { "type": "string" },
</span><span class="hljs-string">            "authors": {
</span><span class="hljs-string">              "type": "array",
</span><span class="hljs-string">              "items": { "type": "string" }
</span><span class="hljs-string">            },
</span><span class="hljs-string">            "abstract": { "type": "string" },
</span><span class="hljs-string">            "keywords": {
</span><span class="hljs-string">              "type": "array",
</span><span class="hljs-string">              "items": { "type": "string" }
</span><span class="hljs-string">            }
</span><span class="hljs-string">          },
</span><span class="hljs-string">          "required": ["title", "authors", "abstract", "keywords"],
</span><span class="hljs-string">          "additionalProperties": false
</span><span class="hljs-string">        },
</span><span class="hljs-string">        "strict": true
</span><span class="hljs-string">      }
</span><span class="hljs-string">    }
</span><span class="hljs-string">  }'</span></code></pre></div></div></div>
<div class="anchor-heading-wrapper"><h4 id="example-response" class="anchor-heading" data-name="example-response">Example response<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h4></div>
<div class="code-sample light-mode"><div class="code-sample-body code-sample-body-large"><div class="code-sample-copy-float"><button type="button" class="Wmjjd Ry4P0" data-color="secondary" data-variant="bare" data-size="sm" data-gutter-size="xs" data-icon-size="sm"><span class="_6jr41"><span class="eRdFc" data-align="start"><span class="block beN8R"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2V5Zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1v2ZM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1H5Z" clip-rule="evenodd"></path></svg></span></span></span></button></div><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-json" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span></code><span><span>{
</span></span><span><span>  </span><span class="hljs-attr">"title"</span><span>: </span><span class="hljs-string">"Application of Quantum Algorithms in Interstellar Navigation: A New Frontier"</span><span>,
</span></span><span><span>  </span><span class="hljs-attr">"authors"</span><span>: [
</span></span><span><span>    </span><span class="hljs-string">"Dr. Stella Voyager"</span><span>,
</span></span><span><span>    </span><span class="hljs-string">"Dr. Nova Star"</span><span>,
</span></span><span><span>    </span><span class="hljs-string">"Dr. Lyra Hunter"</span><span>
</span></span><span>  ],
</span><span><span>  </span><span class="hljs-attr">"abstract"</span><span>: </span><span class="hljs-string">"This paper investigates the utilization of quantum algorithms to improve interstellar navigation systems. By leveraging quantum superposition and entanglement, our proposed navigation system can calculate optimal travel paths through space-time anomalies more efficiently than classical methods. Experimental simulations suggest a significant reduction in travel time and fuel consumption for interstellar missions."</span><span>,
</span></span><span><span>  </span><span class="hljs-attr">"keywords"</span><span>: [
</span></span><span><span>    </span><span class="hljs-string">"Quantum algorithms"</span><span>,
</span></span><span><span>    </span><span class="hljs-string">"interstellar navigation"</span><span>,
</span></span><span><span>    </span><span class="hljs-string">"space-time anomalies"</span><span>,
</span></span><span><span>    </span><span class="hljs-string">"quantum superposition"</span><span>,
</span></span><span><span>    </span><span class="hljs-string">"quantum entanglement"</span><span>,
</span></span><span><span>    </span><span class="hljs-string">"space travel"</span><span>
</span></span><span>  ]
</span><span>}</span></code></pre></div></div></div></div><div><div class="hidden">UI generation</div><div class="hidden"><div class="anchor-heading-wrapper"><h3 id="ui-generation" class="anchor-heading" data-name="ui-generation">UI Generation<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h3></div>
<p>You can generate valid HTML by representing it as recursive data structures with constraints, like enums.</p>

<div class="code-sample light-mode"><div class="code-sample-header"><div class="code-sample-title body-small">Generating HTML using Structured Outputs</div><div class="exclude-from-copy"><button id="select-trigger-radix-:r13q:" type="button" class="ICo9Y" data-variant="bare" data-size="sm" data-gutter-size="xs" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:r13s:" data-state="closed"><span class="RWOJJ">python</span><div class="relative flex items-center gap-2"><svg width="8" height="11" viewBox="0 0 10 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="uF-Qb"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.34151 0.747423C4.71854 0.417526 5.28149 0.417526 5.65852 0.747423L9.65852 4.24742C10.0742 4.61111 10.1163 5.24287 9.75259 5.6585C9.38891 6.07414 8.75715 6.11626 8.34151 5.75258L5.00001 2.82877L1.65852 5.75258C1.24288 6.11626 0.61112 6.07414 0.247438 5.6585C-0.116244 5.24287 -0.0741267 4.61111 0.34151 4.24742L4.34151 0.747423ZM0.246065 10.3578C0.608879 9.94139 1.24055 9.89795 1.65695 10.2608L5.00001 13.1737L8.34308 10.2608C8.75948 9.89795 9.39115 9.94139 9.75396 10.3578C10.1168 10.7742 10.0733 11.4058 9.65695 11.7687L5.65695 15.2539C5.28043 15.582 4.7196 15.582 4.34308 15.2539L0.343082 11.7687C-0.0733128 11.4058 -0.116749 10.7742 0.246065 10.3578Z"></path></svg></div></button></div><button type="button" class="Wmjjd Ry4P0" data-color="secondary" data-variant="bare" data-size="sm" data-gutter-size="xs" data-icon-size="sm"><span class="_6jr41"><span class="eRdFc" data-align="start"><span class="block beN8R"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2V5Zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1v2ZM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1H5Z" clip-rule="evenodd"></path></svg></span></span></span></button></div><div class="code-sample-body code-sample-body-small code-sample-body-with-header"><div class="code-block hidden"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-javascript" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span><span class="react-syntax-highlighter-line-number">24
</span><span class="react-syntax-highlighter-line-number">25
</span><span class="react-syntax-highlighter-line-number">26
</span><span class="react-syntax-highlighter-line-number">27
</span><span class="react-syntax-highlighter-line-number">28
</span><span class="react-syntax-highlighter-line-number">29
</span><span class="react-syntax-highlighter-line-number">30
</span><span class="react-syntax-highlighter-line-number">31
</span><span class="react-syntax-highlighter-line-number">32
</span><span class="react-syntax-highlighter-line-number">33
</span><span class="react-syntax-highlighter-line-number">34
</span><span class="react-syntax-highlighter-line-number">35
</span><span class="react-syntax-highlighter-line-number">36
</span><span class="react-syntax-highlighter-line-number">37
</span><span class="react-syntax-highlighter-line-number">38
</span></code><span><span class="hljs-keyword">import</span><span> OpenAI </span><span class="hljs-keyword">from</span><span> </span><span class="hljs-string">"openai"</span><span>;
</span></span><span><span></span><span class="hljs-keyword">import</span><span> { zodTextFormat } </span><span class="hljs-keyword">from</span><span> </span><span class="hljs-string">"openai/helpers/zod"</span><span>;
</span></span><span><span></span><span class="hljs-keyword">import</span><span> { z } </span><span class="hljs-keyword">from</span><span> </span><span class="hljs-string">"zod"</span><span>;
</span></span><span>
</span><span><span></span><span class="hljs-keyword">const</span><span> openai = </span><span class="hljs-keyword">new</span><span> OpenAI();
</span></span><span>
</span><span><span></span><span class="hljs-keyword">const</span><span> UI = z.lazy(</span><span class="hljs-function">() =&gt;</span><span>
</span></span><span>  z.object({
</span><span><span>    </span><span class="hljs-attr">type</span><span>: z.enum([</span><span class="hljs-string">"div"</span><span>, </span><span class="hljs-string">"button"</span><span>, </span><span class="hljs-string">"header"</span><span>, </span><span class="hljs-string">"section"</span><span>, </span><span class="hljs-string">"field"</span><span>, </span><span class="hljs-string">"form"</span><span>]),
</span></span><span><span>    </span><span class="hljs-attr">label</span><span>: z.string(),
</span></span><span><span>    </span><span class="hljs-attr">children</span><span>: z.array(UI),
</span></span><span><span>    </span><span class="hljs-attr">attributes</span><span>: z.array(
</span></span><span>      z.object({
</span><span><span>        </span><span class="hljs-attr">name</span><span>: z.string(),
</span></span><span><span>        </span><span class="hljs-attr">value</span><span>: z.string(),
</span></span><span>      })
</span><span>    ),
</span><span>  })
</span><span>);
</span><span>
</span><span><span></span><span class="hljs-keyword">const</span><span> response = </span><span class="hljs-keyword">await</span><span> openai.responses.parse({
</span></span><span><span>  </span><span class="hljs-attr">model</span><span>: </span><span class="hljs-string">"gpt-4o-2024-08-06"</span><span>,
</span></span><span><span>  </span><span class="hljs-attr">input</span><span>: [
</span></span><span>    {
</span><span><span>      </span><span class="hljs-attr">role</span><span>: </span><span class="hljs-string">"system"</span><span>,
</span></span><span><span>      </span><span class="hljs-attr">content</span><span>: </span><span class="hljs-string">"You are a UI generator AI. Convert the user input into a UI."</span><span>,
</span></span><span>    },
</span><span>    {
</span><span><span>      </span><span class="hljs-attr">role</span><span>: </span><span class="hljs-string">"user"</span><span>,
</span></span><span><span>      </span><span class="hljs-attr">content</span><span>: </span><span class="hljs-string">"Make a User Profile Form"</span><span>,
</span></span><span>    },
</span><span>  ],
</span><span><span>  </span><span class="hljs-attr">text</span><span>: {
</span></span><span><span>    </span><span class="hljs-attr">format</span><span>: zodTextFormat(UI, </span><span class="hljs-string">"ui"</span><span>),
</span></span><span>  },
</span><span>});
</span><span>
</span><span><span></span><span class="hljs-keyword">const</span><span> ui = response.output_parsed;</span></span></code></pre></div><div class="code-block"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-python" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span><span class="react-syntax-highlighter-line-number">24
</span><span class="react-syntax-highlighter-line-number">25
</span><span class="react-syntax-highlighter-line-number">26
</span><span class="react-syntax-highlighter-line-number">27
</span><span class="react-syntax-highlighter-line-number">28
</span><span class="react-syntax-highlighter-line-number">29
</span><span class="react-syntax-highlighter-line-number">30
</span><span class="react-syntax-highlighter-line-number">31
</span><span class="react-syntax-highlighter-line-number">32
</span><span class="react-syntax-highlighter-line-number">33
</span><span class="react-syntax-highlighter-line-number">34
</span><span class="react-syntax-highlighter-line-number">35
</span><span class="react-syntax-highlighter-line-number">36
</span><span class="react-syntax-highlighter-line-number">37
</span><span class="react-syntax-highlighter-line-number">38
</span><span class="react-syntax-highlighter-line-number">39
</span><span class="react-syntax-highlighter-line-number">40
</span><span class="react-syntax-highlighter-line-number">41
</span><span class="react-syntax-highlighter-line-number">42
</span><span class="react-syntax-highlighter-line-number">43
</span><span class="react-syntax-highlighter-line-number">44
</span></code><span><span class="hljs-keyword">from</span><span> enum </span><span class="hljs-keyword">import</span><span> Enum
</span></span><span><span></span><span class="hljs-keyword">from</span><span> typing </span><span class="hljs-keyword">import</span><span> </span><span class="hljs-type">List</span><span>
</span></span><span>
</span><span><span></span><span class="hljs-keyword">from</span><span> openai </span><span class="hljs-keyword">import</span><span> OpenAI
</span></span><span><span></span><span class="hljs-keyword">from</span><span> pydantic </span><span class="hljs-keyword">import</span><span> BaseModel
</span></span><span>
</span><span>client = OpenAI()
</span><span>
</span><span><span></span><span class="hljs-class hljs-keyword">class</span><span class="hljs-class"> </span><span class="hljs-class hljs-title">UIType</span><span class="hljs-class">(</span><span class="hljs-class hljs-params hljs-built_in">str</span><span class="hljs-class hljs-params">, Enum</span><span class="hljs-class">):</span><span>
</span></span><span><span>    div = </span><span class="hljs-string">"div"</span><span>
</span></span><span><span>    button = </span><span class="hljs-string">"button"</span><span>
</span></span><span><span>    header = </span><span class="hljs-string">"header"</span><span>
</span></span><span><span>    section = </span><span class="hljs-string">"section"</span><span>
</span></span><span><span>    field = </span><span class="hljs-string">"field"</span><span>
</span></span><span><span>    form = </span><span class="hljs-string">"form"</span><span>
</span></span><span>
</span><span><span></span><span class="hljs-class hljs-keyword">class</span><span class="hljs-class"> </span><span class="hljs-class hljs-title">Attribute</span><span class="hljs-class">(</span><span class="hljs-class hljs-params">BaseModel</span><span class="hljs-class">):</span><span>
</span></span><span><span>    name: </span><span class="hljs-built_in">str</span><span>
</span></span><span><span>    value: </span><span class="hljs-built_in">str</span><span>
</span></span><span>
</span><span><span></span><span class="hljs-class hljs-keyword">class</span><span class="hljs-class"> </span><span class="hljs-class hljs-title">UI</span><span class="hljs-class">(</span><span class="hljs-class hljs-params">BaseModel</span><span class="hljs-class">):</span><span>
</span></span><span><span>    </span><span class="hljs-built_in">type</span><span>: UIType
</span></span><span><span>    label: </span><span class="hljs-built_in">str</span><span>
</span></span><span><span>    children: </span><span class="hljs-type">List</span><span>[</span><span class="hljs-string">"UI"</span><span>]
</span></span><span><span>    attributes: </span><span class="hljs-type">List</span><span>[Attribute]
</span></span><span>
</span><span><span>UI.model_rebuild()  </span><span class="hljs-comment"># This is required to enable recursive types</span><span>
</span></span><span>
</span><span><span></span><span class="hljs-class hljs-keyword">class</span><span class="hljs-class"> </span><span class="hljs-class hljs-title">Response</span><span class="hljs-class">(</span><span class="hljs-class hljs-params">BaseModel</span><span class="hljs-class">):</span><span>
</span></span><span>    ui: UI
</span><span>
</span><span>response = client.responses.parse(
</span><span><span>    model=</span><span class="hljs-string">"gpt-4o-2024-08-06"</span><span>,
</span></span><span><span>    </span><span class="hljs-built_in">input</span><span>=[
</span></span><span>        {
</span><span><span>            </span><span class="hljs-string">"role"</span><span>: </span><span class="hljs-string">"system"</span><span>,
</span></span><span><span>            </span><span class="hljs-string">"content"</span><span>: </span><span class="hljs-string">"You are a UI generator AI. Convert the user input into a UI."</span><span>,
</span></span><span>        },
</span><span><span>        {</span><span class="hljs-string">"role"</span><span>: </span><span class="hljs-string">"user"</span><span>, </span><span class="hljs-string">"content"</span><span>: </span><span class="hljs-string">"Make a User Profile Form"</span><span>},
</span></span><span>    ],
</span><span>    text_format=Response,
</span><span>)
</span><span>
</span><span>ui = response.output_parsed</span></code></pre></div><div class="code-block hidden"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-bash" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span><span class="react-syntax-highlighter-line-number">24
</span><span class="react-syntax-highlighter-line-number">25
</span><span class="react-syntax-highlighter-line-number">26
</span><span class="react-syntax-highlighter-line-number">27
</span><span class="react-syntax-highlighter-line-number">28
</span><span class="react-syntax-highlighter-line-number">29
</span><span class="react-syntax-highlighter-line-number">30
</span><span class="react-syntax-highlighter-line-number">31
</span><span class="react-syntax-highlighter-line-number">32
</span><span class="react-syntax-highlighter-line-number">33
</span><span class="react-syntax-highlighter-line-number">34
</span><span class="react-syntax-highlighter-line-number">35
</span><span class="react-syntax-highlighter-line-number">36
</span><span class="react-syntax-highlighter-line-number">37
</span><span class="react-syntax-highlighter-line-number">38
</span><span class="react-syntax-highlighter-line-number">39
</span><span class="react-syntax-highlighter-line-number">40
</span><span class="react-syntax-highlighter-line-number">41
</span><span class="react-syntax-highlighter-line-number">42
</span><span class="react-syntax-highlighter-line-number">43
</span><span class="react-syntax-highlighter-line-number">44
</span><span class="react-syntax-highlighter-line-number">45
</span><span class="react-syntax-highlighter-line-number">46
</span><span class="react-syntax-highlighter-line-number">47
</span><span class="react-syntax-highlighter-line-number">48
</span><span class="react-syntax-highlighter-line-number">49
</span><span class="react-syntax-highlighter-line-number">50
</span><span class="react-syntax-highlighter-line-number">51
</span><span class="react-syntax-highlighter-line-number">52
</span><span class="react-syntax-highlighter-line-number">53
</span><span class="react-syntax-highlighter-line-number">54
</span><span class="react-syntax-highlighter-line-number">55
</span><span class="react-syntax-highlighter-line-number">56
</span><span class="react-syntax-highlighter-line-number">57
</span><span class="react-syntax-highlighter-line-number">58
</span><span class="react-syntax-highlighter-line-number">59
</span><span class="react-syntax-highlighter-line-number">60
</span><span class="react-syntax-highlighter-line-number">61
</span><span class="react-syntax-highlighter-line-number">62
</span><span class="react-syntax-highlighter-line-number">63
</span><span class="react-syntax-highlighter-line-number">64
</span></code><span><span>curl https://api.openai.com/v1/responses \
</span></span><span><span>  -H </span><span class="hljs-string">"Authorization: Bearer </span><span class="hljs-string hljs-variable">$OPENAI_API_KEY</span><span class="hljs-string">"</span><span> \
</span></span><span><span>  -H </span><span class="hljs-string">"Content-Type: application/json"</span><span> \
</span></span><span><span>  -d </span><span class="hljs-string">'{
</span></span><span class="hljs-string">    "model": "gpt-4o-2024-08-06",
</span><span class="hljs-string">    "input": [
</span><span class="hljs-string">      {
</span><span class="hljs-string">        "role": "system",
</span><span class="hljs-string">        "content": "You are a UI generator AI. Convert the user input into a UI."
</span><span class="hljs-string">      },
</span><span class="hljs-string">      {
</span><span class="hljs-string">        "role": "user",
</span><span class="hljs-string">        "content": "Make a User Profile Form"
</span><span class="hljs-string">      }
</span><span class="hljs-string">    ],
</span><span class="hljs-string">    "text": {
</span><span class="hljs-string">      "format": {
</span><span class="hljs-string">        "type": "json_schema",
</span><span class="hljs-string">        "name": "ui",
</span><span class="hljs-string">        "description": "Dynamically generated UI",
</span><span class="hljs-string">        "schema": {
</span><span class="hljs-string">          "type": "object",
</span><span class="hljs-string">          "properties": {
</span><span class="hljs-string">            "type": {
</span><span class="hljs-string">              "type": "string",
</span><span class="hljs-string">              "description": "The type of the UI component",
</span><span class="hljs-string">              "enum": ["div", "button", "header", "section", "field", "form"]
</span><span class="hljs-string">            },
</span><span class="hljs-string">            "label": {
</span><span class="hljs-string">              "type": "string",
</span><span class="hljs-string">              "description": "The label of the UI component, used for buttons or form fields"
</span><span class="hljs-string">            },
</span><span class="hljs-string">            "children": {
</span><span class="hljs-string">              "type": "array",
</span><span class="hljs-string">              "description": "Nested UI components",
</span><span class="hljs-string">              "items": {"$ref": "#"}
</span><span class="hljs-string">            },
</span><span class="hljs-string">            "attributes": {
</span><span class="hljs-string">              "type": "array",
</span><span class="hljs-string">              "description": "Arbitrary attributes for the UI component, suitable for any element",
</span><span class="hljs-string">              "items": {
</span><span class="hljs-string">                "type": "object",
</span><span class="hljs-string">                "properties": {
</span><span class="hljs-string">                  "name": {
</span><span class="hljs-string">                    "type": "string",
</span><span class="hljs-string">                    "description": "The name of the attribute, for example onClick or className"
</span><span class="hljs-string">                  },
</span><span class="hljs-string">                  "value": {
</span><span class="hljs-string">                    "type": "string",
</span><span class="hljs-string">                    "description": "The value of the attribute"
</span><span class="hljs-string">                  }
</span><span class="hljs-string">                },
</span><span class="hljs-string">                "required": ["name", "value"],
</span><span class="hljs-string">                "additionalProperties": false
</span><span class="hljs-string">              }
</span><span class="hljs-string">            }
</span><span class="hljs-string">          },
</span><span class="hljs-string">          "required": ["type", "label", "children", "attributes"],
</span><span class="hljs-string">          "additionalProperties": false
</span><span class="hljs-string">        },
</span><span class="hljs-string">        "strict": true
</span><span class="hljs-string">      }
</span><span class="hljs-string">    }
</span><span class="hljs-string">  }'</span></code></pre></div></div></div>
<div class="anchor-heading-wrapper"><h4 id="example-response" class="anchor-heading" data-name="example-response">Example response<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h4></div>
<div class="code-sample light-mode"><div class="code-sample-body code-sample-body-large"><div class="code-sample-copy-float"><button type="button" class="Wmjjd Ry4P0" data-color="secondary" data-variant="bare" data-size="sm" data-gutter-size="xs" data-icon-size="sm"><span class="_6jr41"><span class="eRdFc" data-align="start"><span class="block beN8R"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2V5Zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1v2ZM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1H5Z" clip-rule="evenodd"></path></svg></span></span></span></button></div><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-json" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span><span class="react-syntax-highlighter-line-number">24
</span><span class="react-syntax-highlighter-line-number">25
</span><span class="react-syntax-highlighter-line-number">26
</span><span class="react-syntax-highlighter-line-number">27
</span><span class="react-syntax-highlighter-line-number">28
</span><span class="react-syntax-highlighter-line-number">29
</span><span class="react-syntax-highlighter-line-number">30
</span><span class="react-syntax-highlighter-line-number">31
</span><span class="react-syntax-highlighter-line-number">32
</span><span class="react-syntax-highlighter-line-number">33
</span><span class="react-syntax-highlighter-line-number">34
</span><span class="react-syntax-highlighter-line-number">35
</span><span class="react-syntax-highlighter-line-number">36
</span><span class="react-syntax-highlighter-line-number">37
</span><span class="react-syntax-highlighter-line-number">38
</span><span class="react-syntax-highlighter-line-number">39
</span><span class="react-syntax-highlighter-line-number">40
</span><span class="react-syntax-highlighter-line-number">41
</span><span class="react-syntax-highlighter-line-number">42
</span><span class="react-syntax-highlighter-line-number">43
</span><span class="react-syntax-highlighter-line-number">44
</span><span class="react-syntax-highlighter-line-number">45
</span><span class="react-syntax-highlighter-line-number">46
</span><span class="react-syntax-highlighter-line-number">47
</span><span class="react-syntax-highlighter-line-number">48
</span><span class="react-syntax-highlighter-line-number">49
</span><span class="react-syntax-highlighter-line-number">50
</span><span class="react-syntax-highlighter-line-number">51
</span><span class="react-syntax-highlighter-line-number">52
</span><span class="react-syntax-highlighter-line-number">53
</span><span class="react-syntax-highlighter-line-number">54
</span><span class="react-syntax-highlighter-line-number">55
</span><span class="react-syntax-highlighter-line-number">56
</span><span class="react-syntax-highlighter-line-number">57
</span><span class="react-syntax-highlighter-line-number">58
</span><span class="react-syntax-highlighter-line-number">59
</span><span class="react-syntax-highlighter-line-number">60
</span><span class="react-syntax-highlighter-line-number">61
</span><span class="react-syntax-highlighter-line-number">62
</span><span class="react-syntax-highlighter-line-number">63
</span><span class="react-syntax-highlighter-line-number">64
</span><span class="react-syntax-highlighter-line-number">65
</span><span class="react-syntax-highlighter-line-number">66
</span><span class="react-syntax-highlighter-line-number">67
</span><span class="react-syntax-highlighter-line-number">68
</span><span class="react-syntax-highlighter-line-number">69
</span><span class="react-syntax-highlighter-line-number">70
</span><span class="react-syntax-highlighter-line-number">71
</span><span class="react-syntax-highlighter-line-number">72
</span></code><span><span>{
</span></span><span><span>  </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"form"</span><span>,
</span></span><span><span>  </span><span class="hljs-attr">"label"</span><span>: </span><span class="hljs-string">"User Profile Form"</span><span>,
</span></span><span><span>  </span><span class="hljs-attr">"children"</span><span>: [
</span></span><span>    {
</span><span><span>      </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"div"</span><span>,
</span></span><span><span>      </span><span class="hljs-attr">"label"</span><span>: </span><span class="hljs-string">""</span><span>,
</span></span><span><span>      </span><span class="hljs-attr">"children"</span><span>: [
</span></span><span>        {
</span><span><span>          </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"field"</span><span>,
</span></span><span><span>          </span><span class="hljs-attr">"label"</span><span>: </span><span class="hljs-string">"First Name"</span><span>,
</span></span><span><span>          </span><span class="hljs-attr">"children"</span><span>: [],
</span></span><span><span>          </span><span class="hljs-attr">"attributes"</span><span>: [
</span></span><span>            {
</span><span><span>              </span><span class="hljs-attr">"name"</span><span>: </span><span class="hljs-string">"type"</span><span>,
</span></span><span><span>              </span><span class="hljs-attr">"value"</span><span>: </span><span class="hljs-string">"text"</span><span>
</span></span><span>            },
</span><span>            {
</span><span><span>              </span><span class="hljs-attr">"name"</span><span>: </span><span class="hljs-string">"name"</span><span>,
</span></span><span><span>              </span><span class="hljs-attr">"value"</span><span>: </span><span class="hljs-string">"firstName"</span><span>
</span></span><span>            },
</span><span>            {
</span><span><span>              </span><span class="hljs-attr">"name"</span><span>: </span><span class="hljs-string">"placeholder"</span><span>,
</span></span><span><span>              </span><span class="hljs-attr">"value"</span><span>: </span><span class="hljs-string">"Enter your first name"</span><span>
</span></span><span>            }
</span><span>          ]
</span><span>        },
</span><span>        {
</span><span><span>          </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"field"</span><span>,
</span></span><span><span>          </span><span class="hljs-attr">"label"</span><span>: </span><span class="hljs-string">"Last Name"</span><span>,
</span></span><span><span>          </span><span class="hljs-attr">"children"</span><span>: [],
</span></span><span><span>          </span><span class="hljs-attr">"attributes"</span><span>: [
</span></span><span>            {
</span><span><span>              </span><span class="hljs-attr">"name"</span><span>: </span><span class="hljs-string">"type"</span><span>,
</span></span><span><span>              </span><span class="hljs-attr">"value"</span><span>: </span><span class="hljs-string">"text"</span><span>
</span></span><span>            },
</span><span>            {
</span><span><span>              </span><span class="hljs-attr">"name"</span><span>: </span><span class="hljs-string">"name"</span><span>,
</span></span><span><span>              </span><span class="hljs-attr">"value"</span><span>: </span><span class="hljs-string">"lastName"</span><span>
</span></span><span>            },
</span><span>            {
</span><span><span>              </span><span class="hljs-attr">"name"</span><span>: </span><span class="hljs-string">"placeholder"</span><span>,
</span></span><span><span>              </span><span class="hljs-attr">"value"</span><span>: </span><span class="hljs-string">"Enter your last name"</span><span>
</span></span><span>            }
</span><span>          ]
</span><span>        }
</span><span>      ],
</span><span><span>      </span><span class="hljs-attr">"attributes"</span><span>: []
</span></span><span>    },
</span><span>    {
</span><span><span>      </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"button"</span><span>,
</span></span><span><span>      </span><span class="hljs-attr">"label"</span><span>: </span><span class="hljs-string">"Submit"</span><span>,
</span></span><span><span>      </span><span class="hljs-attr">"children"</span><span>: [],
</span></span><span><span>      </span><span class="hljs-attr">"attributes"</span><span>: [
</span></span><span>        {
</span><span><span>          </span><span class="hljs-attr">"name"</span><span>: </span><span class="hljs-string">"type"</span><span>,
</span></span><span><span>          </span><span class="hljs-attr">"value"</span><span>: </span><span class="hljs-string">"submit"</span><span>
</span></span><span>        }
</span><span>      ]
</span><span>    }
</span><span>  ],
</span><span><span>  </span><span class="hljs-attr">"attributes"</span><span>: [
</span></span><span>    {
</span><span><span>      </span><span class="hljs-attr">"name"</span><span>: </span><span class="hljs-string">"method"</span><span>,
</span></span><span><span>      </span><span class="hljs-attr">"value"</span><span>: </span><span class="hljs-string">"post"</span><span>
</span></span><span>    },
</span><span>    {
</span><span><span>      </span><span class="hljs-attr">"name"</span><span>: </span><span class="hljs-string">"action"</span><span>,
</span></span><span><span>      </span><span class="hljs-attr">"value"</span><span>: </span><span class="hljs-string">"/submit-profile"</span><span>
</span></span><span>    }
</span><span>  ]
</span><span>}</span></code></pre></div></div></div></div><div><div class="hidden">Moderation</div><div class="hidden"><div class="anchor-heading-wrapper"><h3 id="moderation" class="anchor-heading" data-name="moderation">Moderation<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h3></div>
<p>You can classify inputs on multiple categories, which is a common way of doing moderation.</p>

<div class="code-sample light-mode"><div class="code-sample-header"><div class="code-sample-title body-small">Moderation using Structured Outputs</div><div class="exclude-from-copy"><button id="select-trigger-radix-:r13t:" type="button" class="ICo9Y" data-variant="bare" data-size="sm" data-gutter-size="xs" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:r13v:" data-state="closed"><span class="RWOJJ">python</span><div class="relative flex items-center gap-2"><svg width="8" height="11" viewBox="0 0 10 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="uF-Qb"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.34151 0.747423C4.71854 0.417526 5.28149 0.417526 5.65852 0.747423L9.65852 4.24742C10.0742 4.61111 10.1163 5.24287 9.75259 5.6585C9.38891 6.07414 8.75715 6.11626 8.34151 5.75258L5.00001 2.82877L1.65852 5.75258C1.24288 6.11626 0.61112 6.07414 0.247438 5.6585C-0.116244 5.24287 -0.0741267 4.61111 0.34151 4.24742L4.34151 0.747423ZM0.246065 10.3578C0.608879 9.94139 1.24055 9.89795 1.65695 10.2608L5.00001 13.1737L8.34308 10.2608C8.75948 9.89795 9.39115 9.94139 9.75396 10.3578C10.1168 10.7742 10.0733 11.4058 9.65695 11.7687L5.65695 15.2539C5.28043 15.582 4.7196 15.582 4.34308 15.2539L0.343082 11.7687C-0.0733128 11.4058 -0.116749 10.7742 0.246065 10.3578Z"></path></svg></div></button></div><button type="button" class="Wmjjd Ry4P0" data-color="secondary" data-variant="bare" data-size="sm" data-gutter-size="xs" data-icon-size="sm"><span class="_6jr41"><span class="eRdFc" data-align="start"><span class="block beN8R"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2V5Zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1v2ZM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1H5Z" clip-rule="evenodd"></path></svg></span></span></span></button></div><div class="code-sample-body code-sample-body-small code-sample-body-with-header"><div class="code-block hidden"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-javascript" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span><span class="react-syntax-highlighter-line-number">24
</span><span class="react-syntax-highlighter-line-number">25
</span><span class="react-syntax-highlighter-line-number">26
</span><span class="react-syntax-highlighter-line-number">27
</span><span class="react-syntax-highlighter-line-number">28
</span><span class="react-syntax-highlighter-line-number">29
</span><span class="react-syntax-highlighter-line-number">30
</span></code><span><span class="hljs-keyword">import</span><span> OpenAI </span><span class="hljs-keyword">from</span><span> </span><span class="hljs-string">"openai"</span><span>;
</span></span><span><span></span><span class="hljs-keyword">import</span><span> { zodTextFormat } </span><span class="hljs-keyword">from</span><span> </span><span class="hljs-string">"openai/helpers/zod"</span><span>;
</span></span><span><span></span><span class="hljs-keyword">import</span><span> { z } </span><span class="hljs-keyword">from</span><span> </span><span class="hljs-string">"zod"</span><span>;
</span></span><span>
</span><span><span></span><span class="hljs-keyword">const</span><span> openai = </span><span class="hljs-keyword">new</span><span> OpenAI();
</span></span><span>
</span><span><span></span><span class="hljs-keyword">const</span><span> ContentCompliance = z.object({
</span></span><span><span>  </span><span class="hljs-attr">is_violating</span><span>: z.boolean(),
</span></span><span><span>  </span><span class="hljs-attr">category</span><span>: z.enum([</span><span class="hljs-string">"violence"</span><span>, </span><span class="hljs-string">"sexual"</span><span>, </span><span class="hljs-string">"self_harm"</span><span>]).nullable(),
</span></span><span><span>  </span><span class="hljs-attr">explanation_if_violating</span><span>: z.string().nullable(),
</span></span><span>});
</span><span>
</span><span><span></span><span class="hljs-keyword">const</span><span> response = </span><span class="hljs-keyword">await</span><span> openai.responses.parse({
</span></span><span><span>    </span><span class="hljs-attr">model</span><span>: </span><span class="hljs-string">"gpt-4o-2024-08-06"</span><span>,
</span></span><span><span>    </span><span class="hljs-attr">input</span><span>: [
</span></span><span>      {
</span><span><span>        </span><span class="hljs-string">"role"</span><span>: </span><span class="hljs-string">"system"</span><span>,
</span></span><span><span>        </span><span class="hljs-string">"content"</span><span>: </span><span class="hljs-string">"Determine if the user input violates specific guidelines and explain if they do."</span><span>
</span></span><span>      },
</span><span>      {
</span><span><span>        </span><span class="hljs-string">"role"</span><span>: </span><span class="hljs-string">"user"</span><span>,
</span></span><span><span>        </span><span class="hljs-string">"content"</span><span>: </span><span class="hljs-string">"How do I prepare for a job interview?"</span><span>
</span></span><span>      }
</span><span>    ],
</span><span><span>    </span><span class="hljs-attr">text</span><span>: {
</span></span><span><span>        </span><span class="hljs-attr">format</span><span>: zodTextFormat(ContentCompliance, </span><span class="hljs-string">"content_compliance"</span><span>),
</span></span><span>    },
</span><span>});
</span><span>
</span><span><span></span><span class="hljs-keyword">const</span><span> compliance = response.output_parsed;</span></span></code></pre></div><div class="code-block"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-python" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span><span class="react-syntax-highlighter-line-number">24
</span><span class="react-syntax-highlighter-line-number">25
</span><span class="react-syntax-highlighter-line-number">26
</span><span class="react-syntax-highlighter-line-number">27
</span><span class="react-syntax-highlighter-line-number">28
</span><span class="react-syntax-highlighter-line-number">29
</span><span class="react-syntax-highlighter-line-number">30
</span><span class="react-syntax-highlighter-line-number">31
</span></code><span><span class="hljs-keyword">from</span><span> enum </span><span class="hljs-keyword">import</span><span> Enum
</span></span><span><span></span><span class="hljs-keyword">from</span><span> typing </span><span class="hljs-keyword">import</span><span> </span><span class="hljs-type">Optional</span><span>
</span></span><span>
</span><span><span></span><span class="hljs-keyword">from</span><span> openai </span><span class="hljs-keyword">import</span><span> OpenAI
</span></span><span><span></span><span class="hljs-keyword">from</span><span> pydantic </span><span class="hljs-keyword">import</span><span> BaseModel
</span></span><span>
</span><span>client = OpenAI()
</span><span>
</span><span><span></span><span class="hljs-class hljs-keyword">class</span><span class="hljs-class"> </span><span class="hljs-class hljs-title">Category</span><span class="hljs-class">(</span><span class="hljs-class hljs-params hljs-built_in">str</span><span class="hljs-class hljs-params">, Enum</span><span class="hljs-class">):</span><span>
</span></span><span><span>    violence = </span><span class="hljs-string">"violence"</span><span>
</span></span><span><span>    sexual = </span><span class="hljs-string">"sexual"</span><span>
</span></span><span><span>    self_harm = </span><span class="hljs-string">"self_harm"</span><span>
</span></span><span>
</span><span><span></span><span class="hljs-class hljs-keyword">class</span><span class="hljs-class"> </span><span class="hljs-class hljs-title">ContentCompliance</span><span class="hljs-class">(</span><span class="hljs-class hljs-params">BaseModel</span><span class="hljs-class">):</span><span>
</span></span><span><span>    is_violating: </span><span class="hljs-built_in">bool</span><span>
</span></span><span><span>    category: </span><span class="hljs-type">Optional</span><span>[Category]
</span></span><span><span>    explanation_if_violating: </span><span class="hljs-type">Optional</span><span>[</span><span class="hljs-built_in">str</span><span>]
</span></span><span>
</span><span>response = client.responses.parse(
</span><span><span>    model=</span><span class="hljs-string">"gpt-4o-2024-08-06"</span><span>,
</span></span><span><span>    </span><span class="hljs-built_in">input</span><span>=[
</span></span><span>        {
</span><span><span>            </span><span class="hljs-string">"role"</span><span>: </span><span class="hljs-string">"system"</span><span>,
</span></span><span><span>            </span><span class="hljs-string">"content"</span><span>: </span><span class="hljs-string">"Determine if the user input violates specific guidelines and explain if they do."</span><span>,
</span></span><span>        },
</span><span><span>        {</span><span class="hljs-string">"role"</span><span>: </span><span class="hljs-string">"user"</span><span>, </span><span class="hljs-string">"content"</span><span>: </span><span class="hljs-string">"How do I prepare for a job interview?"</span><span>},
</span></span><span>    ],
</span><span>    text_format=ContentCompliance,
</span><span>)
</span><span>
</span><span>compliance = response.output_parsed</span></code></pre></div><div class="code-block hidden"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-bash" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span><span class="react-syntax-highlighter-line-number">24
</span><span class="react-syntax-highlighter-line-number">25
</span><span class="react-syntax-highlighter-line-number">26
</span><span class="react-syntax-highlighter-line-number">27
</span><span class="react-syntax-highlighter-line-number">28
</span><span class="react-syntax-highlighter-line-number">29
</span><span class="react-syntax-highlighter-line-number">30
</span><span class="react-syntax-highlighter-line-number">31
</span><span class="react-syntax-highlighter-line-number">32
</span><span class="react-syntax-highlighter-line-number">33
</span><span class="react-syntax-highlighter-line-number">34
</span><span class="react-syntax-highlighter-line-number">35
</span><span class="react-syntax-highlighter-line-number">36
</span><span class="react-syntax-highlighter-line-number">37
</span><span class="react-syntax-highlighter-line-number">38
</span><span class="react-syntax-highlighter-line-number">39
</span><span class="react-syntax-highlighter-line-number">40
</span><span class="react-syntax-highlighter-line-number">41
</span><span class="react-syntax-highlighter-line-number">42
</span><span class="react-syntax-highlighter-line-number">43
</span><span class="react-syntax-highlighter-line-number">44
</span></code><span><span>curl https://api.openai.com/v1/responses \
</span></span><span><span>  -H </span><span class="hljs-string">"Authorization: Bearer </span><span class="hljs-string hljs-variable">$OPENAI_API_KEY</span><span class="hljs-string">"</span><span> \
</span></span><span><span>  -H </span><span class="hljs-string">"Content-Type: application/json"</span><span> \
</span></span><span><span>  -d </span><span class="hljs-string">'{
</span></span><span class="hljs-string">    "model": "gpt-4o-2024-08-06",
</span><span class="hljs-string">    "input": [
</span><span class="hljs-string">      {
</span><span class="hljs-string">        "role": "system",
</span><span class="hljs-string">        "content": "Determine if the user input violates specific guidelines and explain if they do."
</span><span class="hljs-string">      },
</span><span class="hljs-string">      {
</span><span class="hljs-string">        "role": "user",
</span><span class="hljs-string">        "content": "How do I prepare for a job interview?"
</span><span class="hljs-string">      }
</span><span class="hljs-string">    ],
</span><span class="hljs-string">    "text": {
</span><span class="hljs-string">      "format": {
</span><span class="hljs-string">        "type": "json_schema",
</span><span class="hljs-string">        "name": "content_compliance",
</span><span class="hljs-string">        "description": "Determines if content is violating specific moderation rules",
</span><span class="hljs-string">        "schema": {
</span><span class="hljs-string">          "type": "object",
</span><span class="hljs-string">          "properties": {
</span><span class="hljs-string">            "is_violating": {
</span><span class="hljs-string">              "type": "boolean",
</span><span class="hljs-string">              "description": "Indicates if the content is violating guidelines"
</span><span class="hljs-string">            },
</span><span class="hljs-string">            "category": {
</span><span class="hljs-string">              "type": ["string", "null"],
</span><span class="hljs-string">              "description": "Type of violation, if the content is violating guidelines. Null otherwise.",
</span><span class="hljs-string">              "enum": ["violence", "sexual", "self_harm"]
</span><span class="hljs-string">            },
</span><span class="hljs-string">            "explanation_if_violating": {
</span><span class="hljs-string">              "type": ["string", "null"],
</span><span class="hljs-string">              "description": "Explanation of why the content is violating"
</span><span class="hljs-string">            }
</span><span class="hljs-string">          },
</span><span class="hljs-string">          "required": ["is_violating", "category", "explanation_if_violating"],
</span><span class="hljs-string">          "additionalProperties": false
</span><span class="hljs-string">        },
</span><span class="hljs-string">        "strict": true
</span><span class="hljs-string">      }
</span><span class="hljs-string">    }
</span><span class="hljs-string">  }'</span></code></pre></div></div></div>
<div class="anchor-heading-wrapper"><h4 id="example-response" class="anchor-heading" data-name="example-response">Example response<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h4></div>
<div class="code-sample light-mode"><div class="code-sample-body code-sample-body-large"><div class="code-sample-copy-float"><button type="button" class="Wmjjd Ry4P0" data-color="secondary" data-variant="bare" data-size="sm" data-gutter-size="xs" data-icon-size="sm"><span class="_6jr41"><span class="eRdFc" data-align="start"><span class="block beN8R"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2V5Zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1v2ZM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1H5Z" clip-rule="evenodd"></path></svg></span></span></span></button></div><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-json" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span></code><span><span>{
</span></span><span><span>  </span><span class="hljs-attr">"is_violating"</span><span>: </span><span class="hljs-literal">false</span><span>,
</span></span><span><span>  </span><span class="hljs-attr">"category"</span><span>: </span><span class="hljs-literal">null</span><span>,
</span></span><span><span>  </span><span class="hljs-attr">"explanation_if_violating"</span><span>: </span><span class="hljs-literal">null</span><span>
</span></span><span>}</span></code></pre></div></div></div></div></div>

<div class="anchor-heading-wrapper"><h2 id="how-to-use" class="anchor-heading" data-name="how-to-use">How to use Structured Outputs with <span class="monospace">text.format</span><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h2></div><div class="expn"><div class="expn-title" role="button" aria-expanded="false" aria-controls="expander-5"><div class="expn-icon"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M8.293 4.293a1 1 0 0 1 1.414 0l7 7a1 1 0 0 1 0 1.414l-7 7a1 1 0 0 1-1.414-1.414L14.586 12 8.293 5.707a1 1 0 0 1 0-1.414Z" clip-rule="evenodd"></path></svg></div><div class="expn-label">Step 1: Define your schema</div></div><div class="expn-content hidden" id="expander-5"><p>First you must design the JSON Schema that the model should be constrained to follow. See the <a href="https://platform.openai.com/docs/guides/structured-outputs#examples">examples</a> at the top of this guide for reference.</p><p>While
 Structured Outputs supports much of JSON Schema, some features are 
unavailable either for performance or technical reasons. See <a href="https://platform.openai.com/docs/guides/structured-outputs#supported-schemas">here</a> for more details.</p><div class="anchor-heading-wrapper"><h4 id="tips-for-your-json-schema" class="anchor-heading" data-name="tips-for-your-json-schema">Tips for your JSON Schema<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h4></div><p>To maximize the quality of model generations, we recommend the following:</p><ul>
<li>Name keys clearly and intuitively</li>
<li>Create clear titles and descriptions for important keys in your structure</li>
<li>Create and use evals to determine the structure that works best for your use case</li>
</ul></div></div>
<div class="expn"><div class="expn-title" role="button" aria-expanded="false" aria-controls="expander-6"><div class="expn-icon"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M8.293 4.293a1 1 0 0 1 1.414 0l7 7a1 1 0 0 1 0 1.414l-7 7a1 1 0 0 1-1.414-1.414L14.586 12 8.293 5.707a1 1 0 0 1 0-1.414Z" clip-rule="evenodd"></path></svg></div><div class="expn-label">Step 2: Supply your schema in the API call</div></div><div class="expn-content hidden" id="expander-6"><p>To use Structured Outputs, simply specify</p>

<div class="code-sample code-sample-oneliner light-mode"><div class="code-sample-body code-sample-body-large"><div class="code-sample-copy-float"><button type="button" class="Wmjjd Ry4P0" data-color="secondary" data-variant="bare" data-size="sm" data-gutter-size="xs" data-icon-size="sm"><span class="_6jr41"><span class="eRdFc" data-align="start"><span class="block beN8R"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2V5Zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1v2ZM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1H5Z" clip-rule="evenodd"></path></svg></span></span></span></button></div><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-json" style="white-space: pre;"><span><span>text: { format: { type: </span><span class="hljs-string">"json_schema"</span><span>, </span><span class="hljs-attr">"strict"</span><span>: </span><span class="hljs-literal">true</span><span>, </span><span class="hljs-attr">"schema"</span><span>: … } }</span></span></code></pre></div></div>
<p>For example:</p>

<div class="code-sample light-mode"><div class="code-sample-header"><div class="code-sample-title body-small"></div><div class="exclude-from-copy"><button id="select-trigger-radix-:r140:" type="button" class="ICo9Y" data-variant="bare" data-size="sm" data-gutter-size="xs" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:r142:" data-state="closed"><span class="RWOJJ">python</span><div class="relative flex items-center gap-2"><svg width="8" height="11" viewBox="0 0 10 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="uF-Qb"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.34151 0.747423C4.71854 0.417526 5.28149 0.417526 5.65852 0.747423L9.65852 4.24742C10.0742 4.61111 10.1163 5.24287 9.75259 5.6585C9.38891 6.07414 8.75715 6.11626 8.34151 5.75258L5.00001 2.82877L1.65852 5.75258C1.24288 6.11626 0.61112 6.07414 0.247438 5.6585C-0.116244 5.24287 -0.0741267 4.61111 0.34151 4.24742L4.34151 0.747423ZM0.246065 10.3578C0.608879 9.94139 1.24055 9.89795 1.65695 10.2608L5.00001 13.1737L8.34308 10.2608C8.75948 9.89795 9.39115 9.94139 9.75396 10.3578C10.1168 10.7742 10.0733 11.4058 9.65695 11.7687L5.65695 15.2539C5.28043 15.582 4.7196 15.582 4.34308 15.2539L0.343082 11.7687C-0.0733128 11.4058 -0.116749 10.7742 0.246065 10.3578Z"></path></svg></div></button></div><button type="button" class="Wmjjd Ry4P0" data-color="secondary" data-variant="bare" data-size="sm" data-gutter-size="xs" data-icon-size="sm"><span class="_6jr41"><span class="eRdFc" data-align="start"><span class="block beN8R"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2V5Zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1v2ZM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1H5Z" clip-rule="evenodd"></path></svg></span></span></span></button></div><div class="code-sample-body code-sample-body-small code-sample-body-with-header"><div class="code-block"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-python" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span><span class="react-syntax-highlighter-line-number">24
</span><span class="react-syntax-highlighter-line-number">25
</span><span class="react-syntax-highlighter-line-number">26
</span><span class="react-syntax-highlighter-line-number">27
</span><span class="react-syntax-highlighter-line-number">28
</span><span class="react-syntax-highlighter-line-number">29
</span><span class="react-syntax-highlighter-line-number">30
</span><span class="react-syntax-highlighter-line-number">31
</span><span class="react-syntax-highlighter-line-number">32
</span><span class="react-syntax-highlighter-line-number">33
</span><span class="react-syntax-highlighter-line-number">34
</span><span class="react-syntax-highlighter-line-number">35
</span><span class="react-syntax-highlighter-line-number">36
</span></code><span><span>response = client.responses.create(
</span></span><span><span>    model=</span><span class="hljs-string">"gpt-4o-2024-08-06"</span><span>,
</span></span><span><span>    </span><span class="hljs-built_in">input</span><span>=[
</span></span><span><span>        {</span><span class="hljs-string">"role"</span><span>: </span><span class="hljs-string">"system"</span><span>, </span><span class="hljs-string">"content"</span><span>: </span><span class="hljs-string">"You are a helpful math tutor. Guide the user through the solution step by step."</span><span>},
</span></span><span><span>        {</span><span class="hljs-string">"role"</span><span>: </span><span class="hljs-string">"user"</span><span>, </span><span class="hljs-string">"content"</span><span>: </span><span class="hljs-string">"how can I solve 8x + 7 = -23"</span><span>}
</span></span><span>    ],
</span><span>    text={
</span><span><span>        </span><span class="hljs-string">"format"</span><span>: {
</span></span><span><span>            </span><span class="hljs-string">"type"</span><span>: </span><span class="hljs-string">"json_schema"</span><span>,
</span></span><span><span>            </span><span class="hljs-string">"name"</span><span>: </span><span class="hljs-string">"math_response"</span><span>,
</span></span><span><span>            </span><span class="hljs-string">"schema"</span><span>: {
</span></span><span><span>                </span><span class="hljs-string">"type"</span><span>: </span><span class="hljs-string">"object"</span><span>,
</span></span><span><span>                </span><span class="hljs-string">"properties"</span><span>: {
</span></span><span><span>                    </span><span class="hljs-string">"steps"</span><span>: {
</span></span><span><span>                        </span><span class="hljs-string">"type"</span><span>: </span><span class="hljs-string">"array"</span><span>,
</span></span><span><span>                        </span><span class="hljs-string">"items"</span><span>: {
</span></span><span><span>                            </span><span class="hljs-string">"type"</span><span>: </span><span class="hljs-string">"object"</span><span>,
</span></span><span><span>                            </span><span class="hljs-string">"properties"</span><span>: {
</span></span><span><span>                                </span><span class="hljs-string">"explanation"</span><span>: {</span><span class="hljs-string">"type"</span><span>: </span><span class="hljs-string">"string"</span><span>},
</span></span><span><span>                                </span><span class="hljs-string">"output"</span><span>: {</span><span class="hljs-string">"type"</span><span>: </span><span class="hljs-string">"string"</span><span>}
</span></span><span>                            },
</span><span><span>                            </span><span class="hljs-string">"required"</span><span>: [</span><span class="hljs-string">"explanation"</span><span>, </span><span class="hljs-string">"output"</span><span>],
</span></span><span><span>                            </span><span class="hljs-string">"additionalProperties"</span><span>: </span><span class="hljs-literal">False</span><span>
</span></span><span>                        }
</span><span>                    },
</span><span><span>                    </span><span class="hljs-string">"final_answer"</span><span>: {</span><span class="hljs-string">"type"</span><span>: </span><span class="hljs-string">"string"</span><span>}
</span></span><span>                },
</span><span><span>                </span><span class="hljs-string">"required"</span><span>: [</span><span class="hljs-string">"steps"</span><span>, </span><span class="hljs-string">"final_answer"</span><span>],
</span></span><span><span>                </span><span class="hljs-string">"additionalProperties"</span><span>: </span><span class="hljs-literal">False</span><span>
</span></span><span>            },
</span><span><span>            </span><span class="hljs-string">"strict"</span><span>: </span><span class="hljs-literal">True</span><span>
</span></span><span>        }
</span><span>    }
</span><span>)
</span><span>
</span><span><span></span><span class="hljs-built_in">print</span><span>(response.output_text)</span></span></code></pre></div><div class="code-block hidden"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-javascript" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span><span class="react-syntax-highlighter-line-number">24
</span><span class="react-syntax-highlighter-line-number">25
</span><span class="react-syntax-highlighter-line-number">26
</span><span class="react-syntax-highlighter-line-number">27
</span><span class="react-syntax-highlighter-line-number">28
</span><span class="react-syntax-highlighter-line-number">29
</span><span class="react-syntax-highlighter-line-number">30
</span><span class="react-syntax-highlighter-line-number">31
</span><span class="react-syntax-highlighter-line-number">32
</span><span class="react-syntax-highlighter-line-number">33
</span><span class="react-syntax-highlighter-line-number">34
</span><span class="react-syntax-highlighter-line-number">35
</span><span class="react-syntax-highlighter-line-number">36
</span></code><span><span class="hljs-keyword">const</span><span> response = </span><span class="hljs-keyword">await</span><span> openai.responses.create({
</span></span><span><span>    </span><span class="hljs-attr">model</span><span>: </span><span class="hljs-string">"gpt-4o-2024-08-06"</span><span>,
</span></span><span><span>    </span><span class="hljs-attr">input</span><span>: [
</span></span><span><span>        { </span><span class="hljs-attr">role</span><span>: </span><span class="hljs-string">"system"</span><span>, </span><span class="hljs-attr">content</span><span>: </span><span class="hljs-string">"You are a helpful math tutor. Guide the user through the solution step by step."</span><span> },
</span></span><span><span>        { </span><span class="hljs-attr">role</span><span>: </span><span class="hljs-string">"user"</span><span>, </span><span class="hljs-attr">content</span><span>: </span><span class="hljs-string">"how can I solve 8x + 7 = -23"</span><span> }
</span></span><span>    ],
</span><span><span>    </span><span class="hljs-attr">text</span><span>: {
</span></span><span><span>        </span><span class="hljs-attr">format</span><span>: {
</span></span><span><span>            </span><span class="hljs-attr">type</span><span>: </span><span class="hljs-string">"json_schema"</span><span>,
</span></span><span><span>            </span><span class="hljs-attr">name</span><span>: </span><span class="hljs-string">"math_response"</span><span>,
</span></span><span><span>            </span><span class="hljs-attr">schema</span><span>: {
</span></span><span><span>                </span><span class="hljs-attr">type</span><span>: </span><span class="hljs-string">"object"</span><span>,
</span></span><span><span>                </span><span class="hljs-attr">properties</span><span>: {
</span></span><span><span>                    </span><span class="hljs-attr">steps</span><span>: {
</span></span><span><span>                        </span><span class="hljs-attr">type</span><span>: </span><span class="hljs-string">"array"</span><span>,
</span></span><span><span>                        </span><span class="hljs-attr">items</span><span>: {
</span></span><span><span>                            </span><span class="hljs-attr">type</span><span>: </span><span class="hljs-string">"object"</span><span>,
</span></span><span><span>                            </span><span class="hljs-attr">properties</span><span>: {
</span></span><span><span>                                </span><span class="hljs-attr">explanation</span><span>: { </span><span class="hljs-attr">type</span><span>: </span><span class="hljs-string">"string"</span><span> },
</span></span><span><span>                                </span><span class="hljs-attr">output</span><span>: { </span><span class="hljs-attr">type</span><span>: </span><span class="hljs-string">"string"</span><span> }
</span></span><span>                            },
</span><span><span>                            </span><span class="hljs-attr">required</span><span>: [</span><span class="hljs-string">"explanation"</span><span>, </span><span class="hljs-string">"output"</span><span>],
</span></span><span><span>                            </span><span class="hljs-attr">additionalProperties</span><span>: </span><span class="hljs-literal">false</span><span>
</span></span><span>                        }
</span><span>                    },
</span><span><span>                    </span><span class="hljs-attr">final_answer</span><span>: { </span><span class="hljs-attr">type</span><span>: </span><span class="hljs-string">"string"</span><span> }
</span></span><span>                },
</span><span><span>                </span><span class="hljs-attr">required</span><span>: [</span><span class="hljs-string">"steps"</span><span>, </span><span class="hljs-string">"final_answer"</span><span>],
</span></span><span><span>                </span><span class="hljs-attr">additionalProperties</span><span>: </span><span class="hljs-literal">false</span><span>
</span></span><span>            },
</span><span><span>            </span><span class="hljs-attr">strict</span><span>: </span><span class="hljs-literal">true</span><span>
</span></span><span>        }
</span><span>    }
</span><span>});
</span><span>
</span><span><span></span><span class="hljs-built_in">console</span><span>.log(response.output_text);</span></span></code></pre></div><div class="code-block hidden"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-bash" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span><span class="react-syntax-highlighter-line-number">24
</span><span class="react-syntax-highlighter-line-number">25
</span><span class="react-syntax-highlighter-line-number">26
</span><span class="react-syntax-highlighter-line-number">27
</span><span class="react-syntax-highlighter-line-number">28
</span><span class="react-syntax-highlighter-line-number">29
</span><span class="react-syntax-highlighter-line-number">30
</span><span class="react-syntax-highlighter-line-number">31
</span><span class="react-syntax-highlighter-line-number">32
</span><span class="react-syntax-highlighter-line-number">33
</span><span class="react-syntax-highlighter-line-number">34
</span><span class="react-syntax-highlighter-line-number">35
</span><span class="react-syntax-highlighter-line-number">36
</span><span class="react-syntax-highlighter-line-number">37
</span><span class="react-syntax-highlighter-line-number">38
</span><span class="react-syntax-highlighter-line-number">39
</span><span class="react-syntax-highlighter-line-number">40
</span><span class="react-syntax-highlighter-line-number">41
</span><span class="react-syntax-highlighter-line-number">42
</span><span class="react-syntax-highlighter-line-number">43
</span></code><span><span>curl https://api.openai.com/v1/responses \
</span></span><span><span>  -H </span><span class="hljs-string">"Authorization: Bearer </span><span class="hljs-string hljs-variable">$OPENAI_API_KEY</span><span class="hljs-string">"</span><span> \
</span></span><span><span>  -H </span><span class="hljs-string">"Content-Type: application/json"</span><span> \
</span></span><span><span>  -d </span><span class="hljs-string">'{
</span></span><span class="hljs-string">    "model": "gpt-4o-2024-08-06",
</span><span class="hljs-string">    "input": [
</span><span class="hljs-string">      {
</span><span class="hljs-string">        "role": "system",
</span><span class="hljs-string">        "content": "You are a helpful math tutor. Guide the user through the solution step by step."
</span><span class="hljs-string">      },
</span><span class="hljs-string">      {
</span><span class="hljs-string">        "role": "user",
</span><span class="hljs-string">        "content": "how can I solve 8x + 7 = -23"
</span><span class="hljs-string">      }
</span><span class="hljs-string">    ],
</span><span class="hljs-string">    "text": {
</span><span class="hljs-string">      "format": {
</span><span class="hljs-string">        "type": "json_schema",
</span><span class="hljs-string">        "name": "math_response",
</span><span class="hljs-string">        "schema": {
</span><span class="hljs-string">          "type": "object",
</span><span class="hljs-string">          "properties": {
</span><span class="hljs-string">            "steps": {
</span><span class="hljs-string">              "type": "array",
</span><span class="hljs-string">              "items": {
</span><span class="hljs-string">                "type": "object",
</span><span class="hljs-string">                "properties": {
</span><span class="hljs-string">                  "explanation": { "type": "string" },
</span><span class="hljs-string">                  "output": { "type": "string" }
</span><span class="hljs-string">                },
</span><span class="hljs-string">                "required": ["explanation", "output"],
</span><span class="hljs-string">                "additionalProperties": false
</span><span class="hljs-string">              }
</span><span class="hljs-string">            },
</span><span class="hljs-string">            "final_answer": { "type": "string" }
</span><span class="hljs-string">          },
</span><span class="hljs-string">          "required": ["steps", "final_answer"],
</span><span class="hljs-string">          "additionalProperties": false
</span><span class="hljs-string">        },
</span><span class="hljs-string">        "strict": true
</span><span class="hljs-string">      }
</span><span class="hljs-string">    }
</span><span class="hljs-string">  }'</span></code></pre></div></div></div><p><strong>Note:</strong>
 the first request you make with any schema will have additional latency
 as our API processes the schema, but subsequent requests with the same 
schema will not have additional latency.</p></div></div>
<div class="expn"><div class="expn-title" role="button" aria-expanded="false" aria-controls="expander-7"><div class="expn-icon"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M8.293 4.293a1 1 0 0 1 1.414 0l7 7a1 1 0 0 1 0 1.414l-7 7a1 1 0 0 1-1.414-1.414L14.586 12 8.293 5.707a1 1 0 0 1 0-1.414Z" clip-rule="evenodd"></path></svg></div><div class="expn-label">Step 3: Handle edge cases</div></div><div class="expn-content hidden" id="expander-7"><p>In some cases, the model might not generate a valid response that matches the provided JSON schema.</p>
<p>This can happen in the case of a refusal, if the model refuses to 
answer for safety reasons, or if for example you reach a max tokens 
limit and the response is incomplete.</p>

<div class="code-sample light-mode"><div class="code-sample-header"><div class="code-sample-title body-small"></div><div class="exclude-from-copy"><button id="select-trigger-radix-:r143:" type="button" class="ICo9Y" data-variant="bare" data-size="sm" data-gutter-size="xs" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:r145:" data-state="closed"><span class="RWOJJ">python</span><div class="relative flex items-center gap-2"><svg width="8" height="11" viewBox="0 0 10 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="uF-Qb"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.34151 0.747423C4.71854 0.417526 5.28149 0.417526 5.65852 0.747423L9.65852 4.24742C10.0742 4.61111 10.1163 5.24287 9.75259 5.6585C9.38891 6.07414 8.75715 6.11626 8.34151 5.75258L5.00001 2.82877L1.65852 5.75258C1.24288 6.11626 0.61112 6.07414 0.247438 5.6585C-0.116244 5.24287 -0.0741267 4.61111 0.34151 4.24742L4.34151 0.747423ZM0.246065 10.3578C0.608879 9.94139 1.24055 9.89795 1.65695 10.2608L5.00001 13.1737L8.34308 10.2608C8.75948 9.89795 9.39115 9.94139 9.75396 10.3578C10.1168 10.7742 10.0733 11.4058 9.65695 11.7687L5.65695 15.2539C5.28043 15.582 4.7196 15.582 4.34308 15.2539L0.343082 11.7687C-0.0733128 11.4058 -0.116749 10.7742 0.246065 10.3578Z"></path></svg></div></button></div><button type="button" class="Wmjjd Ry4P0" data-color="secondary" data-variant="bare" data-size="sm" data-gutter-size="xs" data-icon-size="sm"><span class="_6jr41"><span class="eRdFc" data-align="start"><span class="block beN8R"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2V5Zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1v2ZM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1H5Z" clip-rule="evenodd"></path></svg></span></span></span></button></div><div class="code-sample-body code-sample-body-small code-sample-body-with-header"><div class="code-block hidden"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-javascript" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span><span class="react-syntax-highlighter-line-number">24
</span><span class="react-syntax-highlighter-line-number">25
</span><span class="react-syntax-highlighter-line-number">26
</span><span class="react-syntax-highlighter-line-number">27
</span><span class="react-syntax-highlighter-line-number">28
</span><span class="react-syntax-highlighter-line-number">29
</span><span class="react-syntax-highlighter-line-number">30
</span><span class="react-syntax-highlighter-line-number">31
</span><span class="react-syntax-highlighter-line-number">32
</span><span class="react-syntax-highlighter-line-number">33
</span><span class="react-syntax-highlighter-line-number">34
</span><span class="react-syntax-highlighter-line-number">35
</span><span class="react-syntax-highlighter-line-number">36
</span><span class="react-syntax-highlighter-line-number">37
</span><span class="react-syntax-highlighter-line-number">38
</span><span class="react-syntax-highlighter-line-number">39
</span><span class="react-syntax-highlighter-line-number">40
</span><span class="react-syntax-highlighter-line-number">41
</span><span class="react-syntax-highlighter-line-number">42
</span><span class="react-syntax-highlighter-line-number">43
</span><span class="react-syntax-highlighter-line-number">44
</span><span class="react-syntax-highlighter-line-number">45
</span><span class="react-syntax-highlighter-line-number">46
</span><span class="react-syntax-highlighter-line-number">47
</span><span class="react-syntax-highlighter-line-number">48
</span><span class="react-syntax-highlighter-line-number">49
</span><span class="react-syntax-highlighter-line-number">50
</span><span class="react-syntax-highlighter-line-number">51
</span><span class="react-syntax-highlighter-line-number">52
</span><span class="react-syntax-highlighter-line-number">53
</span><span class="react-syntax-highlighter-line-number">54
</span><span class="react-syntax-highlighter-line-number">55
</span><span class="react-syntax-highlighter-line-number">56
</span><span class="react-syntax-highlighter-line-number">57
</span><span class="react-syntax-highlighter-line-number">58
</span><span class="react-syntax-highlighter-line-number">59
</span><span class="react-syntax-highlighter-line-number">60
</span><span class="react-syntax-highlighter-line-number">61
</span><span class="react-syntax-highlighter-line-number">62
</span><span class="react-syntax-highlighter-line-number">63
</span><span class="react-syntax-highlighter-line-number">64
</span><span class="react-syntax-highlighter-line-number">65
</span><span class="react-syntax-highlighter-line-number">66
</span><span class="react-syntax-highlighter-line-number">67
</span></code><span><span class="hljs-keyword">try</span><span> {
</span></span><span><span>  </span><span class="hljs-keyword">const</span><span> response = </span><span class="hljs-keyword">await</span><span> openai.responses.create({
</span></span><span><span>    </span><span class="hljs-attr">model</span><span>: </span><span class="hljs-string">"gpt-4o-2024-08-06"</span><span>,
</span></span><span><span>    </span><span class="hljs-attr">input</span><span>: [{
</span></span><span><span>        </span><span class="hljs-attr">role</span><span>: </span><span class="hljs-string">"system"</span><span>,
</span></span><span><span>        </span><span class="hljs-attr">content</span><span>: </span><span class="hljs-string">"You are a helpful math tutor. Guide the user through the solution step by step."</span><span>,
</span></span><span>      },
</span><span>      {
</span><span><span>        </span><span class="hljs-attr">role</span><span>: </span><span class="hljs-string">"user"</span><span>,
</span></span><span><span>        </span><span class="hljs-attr">content</span><span>: </span><span class="hljs-string">"how can I solve 8x + 7 = -23"</span><span>
</span></span><span>      },
</span><span>    ],
</span><span><span>    </span><span class="hljs-attr">max_output_tokens</span><span>: </span><span class="hljs-number">50</span><span>,
</span></span><span><span>    </span><span class="hljs-attr">text</span><span>: {
</span></span><span><span>      </span><span class="hljs-attr">format</span><span>: {
</span></span><span><span>        </span><span class="hljs-attr">type</span><span>: </span><span class="hljs-string">"json_schema"</span><span>,
</span></span><span><span>        </span><span class="hljs-attr">name</span><span>: </span><span class="hljs-string">"math_response"</span><span>,
</span></span><span><span>        </span><span class="hljs-attr">schema</span><span>: {
</span></span><span><span>          </span><span class="hljs-attr">type</span><span>: </span><span class="hljs-string">"object"</span><span>,
</span></span><span><span>          </span><span class="hljs-attr">properties</span><span>: {
</span></span><span><span>            </span><span class="hljs-attr">steps</span><span>: {
</span></span><span><span>              </span><span class="hljs-attr">type</span><span>: </span><span class="hljs-string">"array"</span><span>,
</span></span><span><span>              </span><span class="hljs-attr">items</span><span>: {
</span></span><span><span>                </span><span class="hljs-attr">type</span><span>: </span><span class="hljs-string">"object"</span><span>,
</span></span><span><span>                </span><span class="hljs-attr">properties</span><span>: {
</span></span><span><span>                  </span><span class="hljs-attr">explanation</span><span>: {
</span></span><span><span>                    </span><span class="hljs-attr">type</span><span>: </span><span class="hljs-string">"string"</span><span>
</span></span><span>                  },
</span><span><span>                  </span><span class="hljs-attr">output</span><span>: {
</span></span><span><span>                    </span><span class="hljs-attr">type</span><span>: </span><span class="hljs-string">"string"</span><span>
</span></span><span>                  },
</span><span>                },
</span><span><span>                </span><span class="hljs-attr">required</span><span>: [</span><span class="hljs-string">"explanation"</span><span>, </span><span class="hljs-string">"output"</span><span>],
</span></span><span><span>                </span><span class="hljs-attr">additionalProperties</span><span>: </span><span class="hljs-literal">false</span><span>,
</span></span><span>              },
</span><span>            },
</span><span><span>            </span><span class="hljs-attr">final_answer</span><span>: {
</span></span><span><span>              </span><span class="hljs-attr">type</span><span>: </span><span class="hljs-string">"string"</span><span>
</span></span><span>            },
</span><span>          },
</span><span><span>          </span><span class="hljs-attr">required</span><span>: [</span><span class="hljs-string">"steps"</span><span>, </span><span class="hljs-string">"final_answer"</span><span>],
</span></span><span><span>          </span><span class="hljs-attr">additionalProperties</span><span>: </span><span class="hljs-literal">false</span><span>,
</span></span><span>        },
</span><span><span>        </span><span class="hljs-attr">strict</span><span>: </span><span class="hljs-literal">true</span><span>,
</span></span><span>      },
</span><span>    }
</span><span>  });
</span><span>
</span><span><span>  </span><span class="hljs-keyword">if</span><span> (response.status === </span><span class="hljs-string">"incomplete"</span><span> &amp;&amp; response.incomplete_details.reason === </span><span class="hljs-string">"max_output_tokens"</span><span>) {
</span></span><span><span>    </span><span class="hljs-comment">// Handle the case where the model did not return a complete response</span><span>
</span></span><span><span>    </span><span class="hljs-keyword">throw</span><span> </span><span class="hljs-keyword">new</span><span> </span><span class="hljs-built_in">Error</span><span>(</span><span class="hljs-string">"Incomplete response"</span><span>);
</span></span><span>  }
</span><span>
</span><span><span>  </span><span class="hljs-keyword">const</span><span> math_response = response.output[</span><span class="hljs-number">0</span><span>].content[</span><span class="hljs-number">0</span><span>];
</span></span><span>
</span><span><span>  </span><span class="hljs-keyword">if</span><span> (math_response.type === </span><span class="hljs-string">"refusal"</span><span>) {
</span></span><span><span>    </span><span class="hljs-comment">// handle refusal</span><span>
</span></span><span><span>    </span><span class="hljs-built_in">console</span><span>.log(math_response.refusal);
</span></span><span><span>  } </span><span class="hljs-keyword">else</span><span> </span><span class="hljs-keyword">if</span><span> (math_response.type === </span><span class="hljs-string">"output_text"</span><span>) {
</span></span><span><span>    </span><span class="hljs-built_in">console</span><span>.log(math_response.text);
</span></span><span><span>  } </span><span class="hljs-keyword">else</span><span> {
</span></span><span><span>    </span><span class="hljs-keyword">throw</span><span> </span><span class="hljs-keyword">new</span><span> </span><span class="hljs-built_in">Error</span><span>(</span><span class="hljs-string">"No response content"</span><span>);
</span></span><span>  }
</span><span><span>} </span><span class="hljs-keyword">catch</span><span> (e) {
</span></span><span><span>  </span><span class="hljs-comment">// Handle edge cases</span><span>
</span></span><span><span>  </span><span class="hljs-built_in">console</span><span>.error(e);
</span></span><span>}</span></code></pre></div><div class="code-block"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-python" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span><span class="react-syntax-highlighter-line-number">24
</span><span class="react-syntax-highlighter-line-number">25
</span><span class="react-syntax-highlighter-line-number">26
</span><span class="react-syntax-highlighter-line-number">27
</span><span class="react-syntax-highlighter-line-number">28
</span><span class="react-syntax-highlighter-line-number">29
</span><span class="react-syntax-highlighter-line-number">30
</span><span class="react-syntax-highlighter-line-number">31
</span><span class="react-syntax-highlighter-line-number">32
</span><span class="react-syntax-highlighter-line-number">33
</span><span class="react-syntax-highlighter-line-number">34
</span><span class="react-syntax-highlighter-line-number">35
</span><span class="react-syntax-highlighter-line-number">36
</span><span class="react-syntax-highlighter-line-number">37
</span><span class="react-syntax-highlighter-line-number">38
</span><span class="react-syntax-highlighter-line-number">39
</span><span class="react-syntax-highlighter-line-number">40
</span><span class="react-syntax-highlighter-line-number">41
</span><span class="react-syntax-highlighter-line-number">42
</span></code><span><span class="hljs-keyword">try</span><span>:
</span></span><span>    response = client.responses.create(
</span><span><span>        model=</span><span class="hljs-string">"gpt-4o-2024-08-06"</span><span>,
</span></span><span><span>        </span><span class="hljs-built_in">input</span><span>=[
</span></span><span>            {
</span><span><span>                </span><span class="hljs-string">"role"</span><span>: </span><span class="hljs-string">"system"</span><span>,
</span></span><span><span>                </span><span class="hljs-string">"content"</span><span>: </span><span class="hljs-string">"You are a helpful math tutor. Guide the user through the solution step by step."</span><span>,
</span></span><span>            },
</span><span><span>            {</span><span class="hljs-string">"role"</span><span>: </span><span class="hljs-string">"user"</span><span>, </span><span class="hljs-string">"content"</span><span>: </span><span class="hljs-string">"how can I solve 8x + 7 = -23"</span><span>},
</span></span><span>        ],
</span><span>        text={
</span><span><span>            </span><span class="hljs-string">"format"</span><span>: {
</span></span><span><span>                </span><span class="hljs-string">"type"</span><span>: </span><span class="hljs-string">"json_schema"</span><span>,
</span></span><span><span>                </span><span class="hljs-string">"name"</span><span>: </span><span class="hljs-string">"math_response"</span><span>,
</span></span><span><span>                </span><span class="hljs-string">"strict"</span><span>: </span><span class="hljs-literal">True</span><span>,
</span></span><span><span>                </span><span class="hljs-string">"schema"</span><span>: {
</span></span><span><span>                    </span><span class="hljs-string">"type"</span><span>: </span><span class="hljs-string">"object"</span><span>,
</span></span><span><span>                    </span><span class="hljs-string">"properties"</span><span>: {
</span></span><span><span>                        </span><span class="hljs-string">"steps"</span><span>: {
</span></span><span><span>                            </span><span class="hljs-string">"type"</span><span>: </span><span class="hljs-string">"array"</span><span>,
</span></span><span><span>                            </span><span class="hljs-string">"items"</span><span>: {
</span></span><span><span>                                </span><span class="hljs-string">"type"</span><span>: </span><span class="hljs-string">"object"</span><span>,
</span></span><span><span>                                </span><span class="hljs-string">"properties"</span><span>: {
</span></span><span><span>                                    </span><span class="hljs-string">"explanation"</span><span>: {</span><span class="hljs-string">"type"</span><span>: </span><span class="hljs-string">"string"</span><span>},
</span></span><span><span>                                    </span><span class="hljs-string">"output"</span><span>: {</span><span class="hljs-string">"type"</span><span>: </span><span class="hljs-string">"string"</span><span>},
</span></span><span>                                },
</span><span><span>                                </span><span class="hljs-string">"required"</span><span>: [</span><span class="hljs-string">"explanation"</span><span>, </span><span class="hljs-string">"output"</span><span>],
</span></span><span><span>                                </span><span class="hljs-string">"additionalProperties"</span><span>: </span><span class="hljs-literal">False</span><span>,
</span></span><span>                            },
</span><span>                        },
</span><span><span>                        </span><span class="hljs-string">"final_answer"</span><span>: {</span><span class="hljs-string">"type"</span><span>: </span><span class="hljs-string">"string"</span><span>},
</span></span><span>                    },
</span><span><span>                    </span><span class="hljs-string">"required"</span><span>: [</span><span class="hljs-string">"steps"</span><span>, </span><span class="hljs-string">"final_answer"</span><span>],
</span></span><span><span>                    </span><span class="hljs-string">"additionalProperties"</span><span>: </span><span class="hljs-literal">False</span><span>,
</span></span><span>                },
</span><span><span>                </span><span class="hljs-string">"strict"</span><span>: </span><span class="hljs-literal">True</span><span>,
</span></span><span>            },
</span><span>        },
</span><span>    )
</span><span><span></span><span class="hljs-keyword">except</span><span> Exception </span><span class="hljs-keyword">as</span><span> e:
</span></span><span><span>    </span><span class="hljs-comment"># handle errors like finish_reason, refusal, content_filter, etc.</span><span>
</span></span><span><span>    </span><span class="hljs-keyword">pass</span></span></code></pre></div></div></div></div></div>

<div class="anchor-heading-wrapper"><h3 id="refusals" class="anchor-heading" data-name="refusals">Refusals with Structured Outputs<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h3></div>
<p>When using Structured Outputs with user-generated input, OpenAI 
models may occasionally refuse to fulfill the request for safety 
reasons. Since a refusal does not necessarily follow the schema you have
 supplied in <code>response_format</code>, the API response will include a new field called <code>refusal</code> to indicate that the model refused to fulfill the request.</p>
<p>When the <code>refusal</code> property appears in your output object,
 you might present the refusal in your UI, or include conditional logic 
in code that consumes the response to handle the case of a refused 
request.</p>
<div class="code-sample light-mode"><div class="code-sample-header"><div class="code-sample-title body-small"></div><div class="exclude-from-copy"><button id="select-trigger-radix-:r146:" type="button" class="ICo9Y" data-variant="bare" data-size="sm" data-gutter-size="xs" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:r148:" data-state="closed"><span class="RWOJJ">python</span><div class="relative flex items-center gap-2"><svg width="8" height="11" viewBox="0 0 10 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="uF-Qb"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.34151 0.747423C4.71854 0.417526 5.28149 0.417526 5.65852 0.747423L9.65852 4.24742C10.0742 4.61111 10.1163 5.24287 9.75259 5.6585C9.38891 6.07414 8.75715 6.11626 8.34151 5.75258L5.00001 2.82877L1.65852 5.75258C1.24288 6.11626 0.61112 6.07414 0.247438 5.6585C-0.116244 5.24287 -0.0741267 4.61111 0.34151 4.24742L4.34151 0.747423ZM0.246065 10.3578C0.608879 9.94139 1.24055 9.89795 1.65695 10.2608L5.00001 13.1737L8.34308 10.2608C8.75948 9.89795 9.39115 9.94139 9.75396 10.3578C10.1168 10.7742 10.0733 11.4058 9.65695 11.7687L5.65695 15.2539C5.28043 15.582 4.7196 15.582 4.34308 15.2539L0.343082 11.7687C-0.0733128 11.4058 -0.116749 10.7742 0.246065 10.3578Z"></path></svg></div></button></div><button type="button" class="Wmjjd Ry4P0" data-color="secondary" data-variant="bare" data-size="sm" data-gutter-size="xs" data-icon-size="sm"><span class="_6jr41"><span class="eRdFc" data-align="start"><span class="block beN8R"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2V5Zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1v2ZM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1H5Z" clip-rule="evenodd"></path></svg></span></span></span></button></div><div class="code-sample-body code-sample-body-small code-sample-body-with-header"><div class="code-block"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-python" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span><span class="react-syntax-highlighter-line-number">24
</span></code><span><span class="hljs-class hljs-keyword">class</span><span class="hljs-class"> </span><span class="hljs-class hljs-title">Step</span><span class="hljs-class">(</span><span class="hljs-class hljs-params">BaseModel</span><span class="hljs-class">):</span><span>
</span></span><span><span>    explanation: </span><span class="hljs-built_in">str</span><span>
</span></span><span><span>    output: </span><span class="hljs-built_in">str</span><span>
</span></span><span>
</span><span><span></span><span class="hljs-class hljs-keyword">class</span><span class="hljs-class"> </span><span class="hljs-class hljs-title">MathReasoning</span><span class="hljs-class">(</span><span class="hljs-class hljs-params">BaseModel</span><span class="hljs-class">):</span><span>
</span></span><span><span>    steps: </span><span class="hljs-built_in">list</span><span>[Step]
</span></span><span><span>    final_answer: </span><span class="hljs-built_in">str</span><span>
</span></span><span>
</span><span>completion = client.beta.chat.completions.parse(
</span><span><span>    model=</span><span class="hljs-string">"gpt-4o-2024-08-06"</span><span>,
</span></span><span>    messages=[
</span><span><span>        {</span><span class="hljs-string">"role"</span><span>: </span><span class="hljs-string">"system"</span><span>, </span><span class="hljs-string">"content"</span><span>: </span><span class="hljs-string">"You are a helpful math tutor. Guide the user through the solution step by step."</span><span>},
</span></span><span><span>        {</span><span class="hljs-string">"role"</span><span>: </span><span class="hljs-string">"user"</span><span>, </span><span class="hljs-string">"content"</span><span>: </span><span class="hljs-string">"how can I solve 8x + 7 = -23"</span><span>}
</span></span><span>    ],
</span><span>    response_format=MathReasoning,
</span><span>)
</span><span>
</span><span><span>math_reasoning = completion.choices[</span><span class="hljs-number">0</span><span>].message
</span></span><span>
</span><span><span></span><span class="hljs-comment"># If the model refuses to respond, you will get a refusal message</span><span>
</span></span><span><span></span><span class="hljs-keyword">if</span><span> (math_reasoning.refusal):
</span></span><span><span>    </span><span class="hljs-built_in">print</span><span>(math_reasoning.refusal)
</span></span><span><span></span><span class="hljs-keyword">else</span><span>:
</span></span><span><span>    </span><span class="hljs-built_in">print</span><span>(math_reasoning.parsed)</span></span></code></pre></div><div class="code-block hidden"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-javascript" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span><span class="react-syntax-highlighter-line-number">24
</span><span class="react-syntax-highlighter-line-number">25
</span><span class="react-syntax-highlighter-line-number">26
</span><span class="react-syntax-highlighter-line-number">27
</span></code><span><span class="hljs-keyword">const</span><span> Step = z.object({
</span></span><span><span>  </span><span class="hljs-attr">explanation</span><span>: z.string(),
</span></span><span><span>  </span><span class="hljs-attr">output</span><span>: z.string(),
</span></span><span>});
</span><span>
</span><span><span></span><span class="hljs-keyword">const</span><span> MathReasoning = z.object({
</span></span><span><span>  </span><span class="hljs-attr">steps</span><span>: z.array(Step),
</span></span><span><span>  </span><span class="hljs-attr">final_answer</span><span>: z.string(),
</span></span><span>});
</span><span>
</span><span><span></span><span class="hljs-keyword">const</span><span> completion = </span><span class="hljs-keyword">await</span><span> openai.beta.chat.completions.parse({
</span></span><span><span>  </span><span class="hljs-attr">model</span><span>: </span><span class="hljs-string">"gpt-4o-2024-08-06"</span><span>,
</span></span><span><span>  </span><span class="hljs-attr">messages</span><span>: [
</span></span><span><span>    { </span><span class="hljs-attr">role</span><span>: </span><span class="hljs-string">"system"</span><span>, </span><span class="hljs-attr">content</span><span>: </span><span class="hljs-string">"You are a helpful math tutor. Guide the user through the solution step by step."</span><span> },
</span></span><span><span>    { </span><span class="hljs-attr">role</span><span>: </span><span class="hljs-string">"user"</span><span>, </span><span class="hljs-attr">content</span><span>: </span><span class="hljs-string">"how can I solve 8x + 7 = -23"</span><span> },
</span></span><span>  ],
</span><span><span>  </span><span class="hljs-attr">response_format</span><span>: zodResponseFormat(MathReasoning, </span><span class="hljs-string">"math_reasoning"</span><span>),
</span></span><span>});
</span><span>
</span><span><span></span><span class="hljs-keyword">const</span><span> math_reasoning = completion.choices[</span><span class="hljs-number">0</span><span>].message
</span></span><span>
</span><span><span></span><span class="hljs-comment">// If the model refuses to respond, you will get a refusal message</span><span>
</span></span><span><span></span><span class="hljs-keyword">if</span><span> (math_reasoning.refusal) {
</span></span><span><span>  </span><span class="hljs-built_in">console</span><span>.log(math_reasoning.refusal);
</span></span><span><span>} </span><span class="hljs-keyword">else</span><span> {
</span></span><span><span>  </span><span class="hljs-built_in">console</span><span>.log(math_reasoning.parsed);
</span></span><span>}</span></code></pre></div></div></div>
<p>The API response from a refusal will look something like this:</p>

<div class="code-sample light-mode"><div class="code-sample-header"><div class="code-sample-title body-small"></div><div class="exclude-from-copy"><button id="select-trigger-radix-:r149:" type="button" class="ICo9Y" data-variant="bare" data-size="sm" data-gutter-size="xs" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:r14b:" data-state="closed"><span class="RWOJJ">json</span><div class="relative flex items-center gap-2"><svg width="8" height="11" viewBox="0 0 10 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="uF-Qb"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.34151 0.747423C4.71854 0.417526 5.28149 0.417526 5.65852 0.747423L9.65852 4.24742C10.0742 4.61111 10.1163 5.24287 9.75259 5.6585C9.38891 6.07414 8.75715 6.11626 8.34151 5.75258L5.00001 2.82877L1.65852 5.75258C1.24288 6.11626 0.61112 6.07414 0.247438 5.6585C-0.116244 5.24287 -0.0741267 4.61111 0.34151 4.24742L4.34151 0.747423ZM0.246065 10.3578C0.608879 9.94139 1.24055 9.89795 1.65695 10.2608L5.00001 13.1737L8.34308 10.2608C8.75948 9.89795 9.39115 9.94139 9.75396 10.3578C10.1168 10.7742 10.0733 11.4058 9.65695 11.7687L5.65695 15.2539C5.28043 15.582 4.7196 15.582 4.34308 15.2539L0.343082 11.7687C-0.0733128 11.4058 -0.116749 10.7742 0.246065 10.3578Z"></path></svg></div></button></div><button type="button" class="Wmjjd Ry4P0" data-color="secondary" data-variant="bare" data-size="sm" data-gutter-size="xs" data-icon-size="sm"><span class="_6jr41"><span class="eRdFc" data-align="start"><span class="block beN8R"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2V5Zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1v2ZM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1H5Z" clip-rule="evenodd"></path></svg></span></span></span></button></div><div class="code-sample-body code-sample-body-small code-sample-body-with-header"><div class="code-block"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-json" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span><span class="react-syntax-highlighter-line-number">24
</span><span class="react-syntax-highlighter-line-number">25
</span><span class="react-syntax-highlighter-line-number">26
</span><span class="react-syntax-highlighter-line-number">27
</span><span class="react-syntax-highlighter-line-number">28
</span><span class="react-syntax-highlighter-line-number">29
</span><span class="react-syntax-highlighter-line-number">30
</span><span class="react-syntax-highlighter-line-number">31
</span></code><span><span>{
</span></span><span><span>  </span><span class="hljs-attr">"id"</span><span>: </span><span class="hljs-string">"resp_1234567890"</span><span>,
</span></span><span><span>  </span><span class="hljs-attr">"object"</span><span>: </span><span class="hljs-string">"response"</span><span>,
</span></span><span><span>  </span><span class="hljs-attr">"created_at"</span><span>: </span><span class="hljs-number">1721596428</span><span>,
</span></span><span><span>  </span><span class="hljs-attr">"status"</span><span>: </span><span class="hljs-string">"completed"</span><span>,
</span></span><span><span>  </span><span class="hljs-attr">"error"</span><span>: </span><span class="hljs-literal">null</span><span>,
</span></span><span><span>  </span><span class="hljs-attr">"incomplete_details"</span><span>: </span><span class="hljs-literal">null</span><span>,
</span></span><span><span>  </span><span class="hljs-attr">"input"</span><span>: [],
</span></span><span><span>  </span><span class="hljs-attr">"instructions"</span><span>: </span><span class="hljs-literal">null</span><span>,
</span></span><span><span>  </span><span class="hljs-attr">"max_output_tokens"</span><span>: </span><span class="hljs-literal">null</span><span>,
</span></span><span><span>  </span><span class="hljs-attr">"model"</span><span>: </span><span class="hljs-string">"gpt-4o-2024-08-06"</span><span>,
</span></span><span><span>  </span><span class="hljs-attr">"output"</span><span>: [{
</span></span><span><span>    </span><span class="hljs-attr">"id"</span><span>: </span><span class="hljs-string">"msg_1234567890"</span><span>,
</span></span><span><span>    </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"message"</span><span>,
</span></span><span><span>    </span><span class="hljs-attr">"role"</span><span>: </span><span class="hljs-string">"assistant"</span><span>,
</span></span><span><span>    </span><span class="hljs-attr">"content"</span><span>: [
</span></span><span data-highlighted-row="true" data-highlighted-row-="true">      {
</span><span data-highlighted-row="true" data-highlighted-row-="true"><span>        </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"refusal"</span><span>,
</span></span><span data-highlighted-row="true" data-highlighted-row-="true"><span>        </span><span class="hljs-attr">"refusal"</span><span>: </span><span class="hljs-string">"I'm sorry, I cannot assist with that request."</span><span>
</span></span><span data-highlighted-row="true" data-highlighted-row-="true">      }
</span><span>    ]
</span><span>  }],
</span><span><span>  </span><span class="hljs-attr">"usage"</span><span>: {
</span></span><span><span>    </span><span class="hljs-attr">"input_tokens"</span><span>: </span><span class="hljs-number">81</span><span>,
</span></span><span><span>    </span><span class="hljs-attr">"output_tokens"</span><span>: </span><span class="hljs-number">11</span><span>,
</span></span><span><span>    </span><span class="hljs-attr">"total_tokens"</span><span>: </span><span class="hljs-number">92</span><span>,
</span></span><span><span>    </span><span class="hljs-attr">"output_tokens_details"</span><span>: {
</span></span><span><span>      </span><span class="hljs-attr">"reasoning_tokens"</span><span>: </span><span class="hljs-number">0</span><span>,
</span></span><span>    }
</span><span>  },
</span><span>}</span></code></pre></div></div></div>
<div class="anchor-heading-wrapper"><h3 id="best-practices" class="anchor-heading" data-name="best-practices">Tips and best practices<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h3></div>
<div class="anchor-heading-wrapper"><h4 id="handling-user-generated-input" class="anchor-heading" data-name="handling-user-generated-input">Handling user-generated input<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h4></div>
<p>If your application is using user-generated input, make sure your 
prompt includes instructions on how to handle situations where the input
 cannot result in a valid response.</p>
<p>The model will always try to adhere to the provided schema, which can
 result in hallucinations if the input is completely unrelated to the 
schema.</p>
<p>You could include language in your prompt to specify that you want to
 return empty parameters, or a specific sentence, if the model detects 
that the input is incompatible with the task.</p>
<div class="anchor-heading-wrapper"><h4 id="handling-mistakes" class="anchor-heading" data-name="handling-mistakes">Handling mistakes<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h4></div>
<p>Structured Outputs can still contain mistakes. If you see mistakes, 
try adjusting your instructions, providing examples in the system 
instructions, or splitting tasks into simpler subtasks. Refer to the <a href="https://platform.openai.com/docs/guides/prompt-engineering">prompt engineering guide</a> for more guidance on how to tweak your inputs.</p>
<div class="anchor-heading-wrapper"><h4 id="avoid-json-schema-divergence" class="anchor-heading" data-name="avoid-json-schema-divergence">Avoid JSON schema divergence<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h4></div>
<p>To prevent your JSON Schema and corresponding types in your 
programming language from diverging, we strongly recommend using the 
native Pydantic/zod sdk support.</p>
<p>If you prefer to specify the JSON schema directly, you could add CI 
rules that flag when either the JSON schema or underlying data objects 
are edited, or add a CI step that auto-generates the JSON Schema from 
type definitions (or vice-versa).</p>
<div class="anchor-heading-wrapper"><h2 id="streaming" class="anchor-heading" data-name="streaming">Streaming<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h2></div>
<p>You can use streaming to process model responses or function call 
arguments as they are being generated, and parse them as structured 
data.</p>
<p>That way, you don't have to wait for the entire response to complete 
before handling it.
This is particularly useful if you would like to display JSON fields one
 by one, or handle function call arguments as soon as they are 
available.</p>
<p>We recommend relying on the SDKs to handle streaming with Structured Outputs.</p>

<div class="code-sample light-mode"><div class="code-sample-header"><div class="code-sample-title body-small"></div><div class="exclude-from-copy"><button id="select-trigger-radix-:r14c:" type="button" class="ICo9Y" data-variant="bare" data-size="sm" data-gutter-size="xs" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:r14e:" data-state="closed"><span class="RWOJJ">python</span><div class="relative flex items-center gap-2"><svg width="8" height="11" viewBox="0 0 10 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="uF-Qb"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.34151 0.747423C4.71854 0.417526 5.28149 0.417526 5.65852 0.747423L9.65852 4.24742C10.0742 4.61111 10.1163 5.24287 9.75259 5.6585C9.38891 6.07414 8.75715 6.11626 8.34151 5.75258L5.00001 2.82877L1.65852 5.75258C1.24288 6.11626 0.61112 6.07414 0.247438 5.6585C-0.116244 5.24287 -0.0741267 4.61111 0.34151 4.24742L4.34151 0.747423ZM0.246065 10.3578C0.608879 9.94139 1.24055 9.89795 1.65695 10.2608L5.00001 13.1737L8.34308 10.2608C8.75948 9.89795 9.39115 9.94139 9.75396 10.3578C10.1168 10.7742 10.0733 11.4058 9.65695 11.7687L5.65695 15.2539C5.28043 15.582 4.7196 15.582 4.34308 15.2539L0.343082 11.7687C-0.0733128 11.4058 -0.116749 10.7742 0.246065 10.3578Z"></path></svg></div></button></div><button type="button" class="Wmjjd Ry4P0" data-color="secondary" data-variant="bare" data-size="sm" data-gutter-size="xs" data-icon-size="sm"><span class="_6jr41"><span class="eRdFc" data-align="start"><span class="block beN8R"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2V5Zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1v2ZM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1H5Z" clip-rule="evenodd"></path></svg></span></span></span></button></div><div class="code-sample-body code-sample-body-small code-sample-body-with-header"><div class="code-block"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-python" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span><span class="react-syntax-highlighter-line-number">24
</span><span class="react-syntax-highlighter-line-number">25
</span><span class="react-syntax-highlighter-line-number">26
</span><span class="react-syntax-highlighter-line-number">27
</span><span class="react-syntax-highlighter-line-number">28
</span><span class="react-syntax-highlighter-line-number">29
</span><span class="react-syntax-highlighter-line-number">30
</span><span class="react-syntax-highlighter-line-number">31
</span><span class="react-syntax-highlighter-line-number">32
</span><span class="react-syntax-highlighter-line-number">33
</span><span class="react-syntax-highlighter-line-number">34
</span><span class="react-syntax-highlighter-line-number">35
</span><span class="react-syntax-highlighter-line-number">36
</span></code><span><span class="hljs-keyword">from</span><span> typing </span><span class="hljs-keyword">import</span><span> </span><span class="hljs-type">List</span><span>
</span></span><span>
</span><span><span></span><span class="hljs-keyword">from</span><span> openai </span><span class="hljs-keyword">import</span><span> OpenAI
</span></span><span><span></span><span class="hljs-keyword">from</span><span> pydantic </span><span class="hljs-keyword">import</span><span> BaseModel
</span></span><span>
</span><span><span></span><span class="hljs-class hljs-keyword">class</span><span class="hljs-class"> </span><span class="hljs-class hljs-title">EntitiesModel</span><span class="hljs-class">(</span><span class="hljs-class hljs-params">BaseModel</span><span class="hljs-class">):</span><span>
</span></span><span><span>    attributes: </span><span class="hljs-type">List</span><span>[</span><span class="hljs-built_in">str</span><span>]
</span></span><span><span>    colors: </span><span class="hljs-type">List</span><span>[</span><span class="hljs-built_in">str</span><span>]
</span></span><span><span>    animals: </span><span class="hljs-type">List</span><span>[</span><span class="hljs-built_in">str</span><span>]
</span></span><span>
</span><span>client = OpenAI()
</span><span>
</span><span><span></span><span class="hljs-keyword">with</span><span> client.responses.stream(
</span></span><span><span>    model=</span><span class="hljs-string">"gpt-4.1"</span><span>,
</span></span><span><span>    </span><span class="hljs-built_in">input</span><span>=[
</span></span><span><span>        {</span><span class="hljs-string">"role"</span><span>: </span><span class="hljs-string">"system"</span><span>, </span><span class="hljs-string">"content"</span><span>: </span><span class="hljs-string">"Extract entities from the input text"</span><span>},
</span></span><span>        {
</span><span><span>            </span><span class="hljs-string">"role"</span><span>: </span><span class="hljs-string">"user"</span><span>,
</span></span><span><span>            </span><span class="hljs-string">"content"</span><span>: </span><span class="hljs-string">"The quick brown fox jumps over the lazy dog with piercing blue eyes"</span><span>,
</span></span><span>        },
</span><span>    ],
</span><span>    text_format=EntitiesModel,
</span><span><span>) </span><span class="hljs-keyword">as</span><span> stream:
</span></span><span><span>    </span><span class="hljs-keyword">for</span><span> event </span><span class="hljs-keyword">in</span><span> stream:
</span></span><span><span>        </span><span class="hljs-keyword">if</span><span> event.</span><span class="hljs-built_in">type</span><span> == </span><span class="hljs-string">"response.refusal.delta"</span><span>:
</span></span><span><span>            </span><span class="hljs-built_in">print</span><span>(event.delta, end=</span><span class="hljs-string">""</span><span>)
</span></span><span><span>        </span><span class="hljs-keyword">elif</span><span> event.</span><span class="hljs-built_in">type</span><span> == </span><span class="hljs-string">"response.output_text.delta"</span><span>:
</span></span><span><span>            </span><span class="hljs-built_in">print</span><span>(event.delta, end=</span><span class="hljs-string">""</span><span>)
</span></span><span><span>        </span><span class="hljs-keyword">elif</span><span> event.</span><span class="hljs-built_in">type</span><span> == </span><span class="hljs-string">"response.error"</span><span>:
</span></span><span><span>            </span><span class="hljs-built_in">print</span><span>(event.error, end=</span><span class="hljs-string">""</span><span>)
</span></span><span><span>        </span><span class="hljs-keyword">elif</span><span> event.</span><span class="hljs-built_in">type</span><span> == </span><span class="hljs-string">"response.completed"</span><span>:
</span></span><span><span>            </span><span class="hljs-built_in">print</span><span>(</span><span class="hljs-string">"Completed"</span><span>)
</span></span><span><span>            </span><span class="hljs-comment"># print(event.response.output)</span><span>
</span></span><span>
</span><span>    final_response = stream.get_final_response()
</span><span><span>    </span><span class="hljs-built_in">print</span><span>(final_response)</span></span></code></pre></div><div class="code-block hidden"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-javascript" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span><span class="react-syntax-highlighter-line-number">24
</span><span class="react-syntax-highlighter-line-number">25
</span><span class="react-syntax-highlighter-line-number">26
</span><span class="react-syntax-highlighter-line-number">27
</span><span class="react-syntax-highlighter-line-number">28
</span><span class="react-syntax-highlighter-line-number">29
</span><span class="react-syntax-highlighter-line-number">30
</span><span class="react-syntax-highlighter-line-number">31
</span><span class="react-syntax-highlighter-line-number">32
</span><span class="react-syntax-highlighter-line-number">33
</span><span class="react-syntax-highlighter-line-number">34
</span><span class="react-syntax-highlighter-line-number">35
</span><span class="react-syntax-highlighter-line-number">36
</span><span class="react-syntax-highlighter-line-number">37
</span></code><span><span class="hljs-keyword">import</span><span> { OpenAI } </span><span class="hljs-keyword">from</span><span> </span><span class="hljs-string">"openai"</span><span>;
</span></span><span><span></span><span class="hljs-keyword">import</span><span> { zodTextFormat } </span><span class="hljs-keyword">from</span><span> </span><span class="hljs-string">"openai/helpers/zod"</span><span>;
</span></span><span><span></span><span class="hljs-keyword">import</span><span> { z } </span><span class="hljs-keyword">from</span><span> </span><span class="hljs-string">"zod"</span><span>;
</span></span><span>
</span><span><span></span><span class="hljs-keyword">const</span><span> EntitiesSchema = z.object({
</span></span><span><span>  </span><span class="hljs-attr">attributes</span><span>: z.array(z.string()),
</span></span><span><span>  </span><span class="hljs-attr">colors</span><span>: z.array(z.string()),
</span></span><span><span>  </span><span class="hljs-attr">animals</span><span>: z.array(z.string()),
</span></span><span>});
</span><span>
</span><span><span></span><span class="hljs-keyword">const</span><span> openai = </span><span class="hljs-keyword">new</span><span> OpenAI();
</span></span><span><span></span><span class="hljs-keyword">const</span><span> stream = openai.responses
</span></span><span>  .stream({
</span><span><span>    </span><span class="hljs-attr">model</span><span>: </span><span class="hljs-string">"gpt-4.1"</span><span>,
</span></span><span><span>    </span><span class="hljs-attr">input</span><span>: [
</span></span><span><span>      { </span><span class="hljs-attr">role</span><span>: </span><span class="hljs-string">"user"</span><span>, </span><span class="hljs-attr">content</span><span>: </span><span class="hljs-string">"What's the weather like in Paris today?"</span><span> },
</span></span><span>    ],
</span><span><span>    </span><span class="hljs-attr">text</span><span>: {
</span></span><span><span>      </span><span class="hljs-attr">format</span><span>: zodTextFormat(EntitiesSchema, </span><span class="hljs-string">"entities"</span><span>),
</span></span><span>    },
</span><span>  })
</span><span><span>  .on(</span><span class="hljs-string">"response.refusal.delta"</span><span>, </span><span class="hljs-function">(</span><span class="hljs-function hljs-params">event</span><span class="hljs-function">) =&gt;</span><span> {
</span></span><span>    process.stdout.write(event.delta);
</span><span>  })
</span><span><span>  .on(</span><span class="hljs-string">"response.output_text.delta"</span><span>, </span><span class="hljs-function">(</span><span class="hljs-function hljs-params">event</span><span class="hljs-function">) =&gt;</span><span> {
</span></span><span>    process.stdout.write(event.delta);
</span><span>  })
</span><span><span>  .on(</span><span class="hljs-string">"response.output_text.done"</span><span>, </span><span class="hljs-function">() =&gt;</span><span> {
</span></span><span><span>    process.stdout.write(</span><span class="hljs-string">"\n"</span><span>);
</span></span><span>  })
</span><span><span>  .on(</span><span class="hljs-string">"response.error"</span><span>, </span><span class="hljs-function">(</span><span class="hljs-function hljs-params">event</span><span class="hljs-function">) =&gt;</span><span> {
</span></span><span><span>    </span><span class="hljs-built_in">console</span><span>.error(event.error);
</span></span><span>  });
</span><span>
</span><span><span></span><span class="hljs-keyword">const</span><span> result = </span><span class="hljs-keyword">await</span><span> stream.finalResponse();
</span></span><span>
</span><span><span></span><span class="hljs-built_in">console</span><span>.log(result);</span></span></code></pre></div></div></div>
<div class="anchor-heading-wrapper"><h2 id="supported-schemas" class="anchor-heading" data-name="supported-schemas">Supported schemas<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h2></div>
<p>Structured Outputs supports a subset of the <a href="https://json-schema.org/docs" target="_blank" rel="noopener noreferrer">JSON Schema</a> language.</p>
<div class="anchor-heading-wrapper"><h4 id="supported-types" class="anchor-heading" data-name="supported-types">Supported types<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h4></div>
<p>The following types are supported for Structured Outputs:</p>
<ul>
<li>String</li>
<li>Number</li>
<li>Boolean</li>
<li>Integer</li>
<li>Object</li>
<li>Array</li>
<li>Enum</li>
<li>anyOf</li>
</ul>
<div class="anchor-heading-wrapper"><h4 id="supported-properties" class="anchor-heading" data-name="supported-properties">Supported properties<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h4></div>
<p>In addition to specifying the type of a property, you can specify a selection of additional constraints:</p>
<p><strong>Supported <code>string</code> properties:</strong></p>
<ul>
<li><code>pattern</code> — A regular expression that the string must match.</li>
<li><code>format</code> — Predefined formats for strings. Currently supported:
<ul>
<li><code>date-time</code></li>
<li><code>time</code></li>
<li><code>date</code></li>
<li><code>duration</code></li>
<li><code>email</code></li>
<li><code>hostname</code></li>
<li><code>ipv4</code></li>
<li><code>ipv6</code></li>
<li><code>uuid</code></li>
</ul>
</li>
</ul>
<p><strong>Supported <code>number</code> properties:</strong></p>
<ul>
<li><code>multipleOf</code> — The number must be a multiple of this value.</li>
<li><code>maximum</code> — The number must be less than or equal to this value.</li>
<li><code>exclusiveMaximum</code> — The number must be less than this value.</li>
<li><code>minimum</code> — The number must be greater than or equal to this value.</li>
<li><code>exclusiveMinimum</code> — The number must be greater than this value.</li>
</ul>
<p><strong>Supported <code>array</code> properties:</strong></p>
<ul>
<li><code>minItems</code> — The array must have at least this many items.</li>
<li><code>maxItems</code> — The array must have at most this many items.</li>
</ul>
<p>Here are some examples on how you can use these type restrictions:</p>
<div class="mt-6"><div class="mb-6 exclude-from-copy"><div class="flex"><div role="group" dir="ltr" class="Z6PRs" data-block="false" data-size="md" data-variant="pill" aria-label="Content switcher" tabindex="0" style="outline: none;"><div class="-X3Ew" data-variant="pill" style="width: 144px; transform: translateX(2px); transition: width var(--segmented-control-transition-duration) var(--cubic-enter), transform var(--segmented-control-transition-duration) var(--cubic-enter);"></div><button type="button" data-state="on" role="radio" aria-checked="true" class="fC8KU" tabindex="-1" data-radix-collection-item=""><span class="JfMyo" aria-hidden="true">String Restrictions</span><span class="ZDw29">String Restrictions</span></button><button type="button" data-state="off" role="radio" aria-checked="false" class="fC8KU" tabindex="-1" data-radix-collection-item=""><span class="JfMyo" aria-hidden="true">Number Restrictions</span><span class="ZDw29">Number Restrictions</span></button></div></div></div><div><div class="hidden">String Restrictions</div><div class=""><div class="code-sample light-mode"><div class="code-sample-header"><div class="code-sample-title body-small"></div><div class="exclude-from-copy"><button id="select-trigger-radix-:r14h:" type="button" class="ICo9Y" data-variant="bare" data-size="sm" data-gutter-size="xs" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:r14j:" data-state="closed"><span class="RWOJJ">json</span><div class="relative flex items-center gap-2"><svg width="8" height="11" viewBox="0 0 10 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="uF-Qb"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.34151 0.747423C4.71854 0.417526 5.28149 0.417526 5.65852 0.747423L9.65852 4.24742C10.0742 4.61111 10.1163 5.24287 9.75259 5.6585C9.38891 6.07414 8.75715 6.11626 8.34151 5.75258L5.00001 2.82877L1.65852 5.75258C1.24288 6.11626 0.61112 6.07414 0.247438 5.6585C-0.116244 5.24287 -0.0741267 4.61111 0.34151 4.24742L4.34151 0.747423ZM0.246065 10.3578C0.608879 9.94139 1.24055 9.89795 1.65695 10.2608L5.00001 13.1737L8.34308 10.2608C8.75948 9.89795 9.39115 9.94139 9.75396 10.3578C10.1168 10.7742 10.0733 11.4058 9.65695 11.7687L5.65695 15.2539C5.28043 15.582 4.7196 15.582 4.34308 15.2539L0.343082 11.7687C-0.0733128 11.4058 -0.116749 10.7742 0.246065 10.3578Z"></path></svg></div></button></div><button type="button" class="Wmjjd Ry4P0" data-color="secondary" data-variant="bare" data-size="sm" data-gutter-size="xs" data-icon-size="sm"><span class="_6jr41"><span class="eRdFc" data-align="start"><span class="block beN8R"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2V5Zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1v2ZM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1H5Z" clip-rule="evenodd"></path></svg></span></span></span></button></div><div class="code-sample-body code-sample-body-small code-sample-body-with-header"><div class="code-block"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-json" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span><span class="react-syntax-highlighter-line-number">24
</span><span class="react-syntax-highlighter-line-number">25
</span><span class="react-syntax-highlighter-line-number">26
</span><span class="react-syntax-highlighter-line-number">27
</span></code><span><span>{
</span></span><span><span>    </span><span class="hljs-attr">"name"</span><span>: </span><span class="hljs-string">"user_data"</span><span>,
</span></span><span><span>    </span><span class="hljs-attr">"strict"</span><span>: </span><span class="hljs-literal">true</span><span>,
</span></span><span><span>    </span><span class="hljs-attr">"schema"</span><span>: {
</span></span><span><span>        </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"object"</span><span>,
</span></span><span><span>        </span><span class="hljs-attr">"properties"</span><span>: {
</span></span><span><span>            </span><span class="hljs-attr">"name"</span><span>: {
</span></span><span><span>                </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"string"</span><span>,
</span></span><span><span>                </span><span class="hljs-attr">"description"</span><span>: </span><span class="hljs-string">"The name of the user"</span><span>
</span></span><span>            },
</span><span><span>            </span><span class="hljs-attr">"username"</span><span>: {
</span></span><span><span>                </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"string"</span><span>,
</span></span><span><span>                </span><span class="hljs-attr">"description"</span><span>: </span><span class="hljs-string">"The username of the user. Must start with @"</span><span>,
</span></span><span data-highlighted-row="true" data-highlighted-row-="true"><span>                </span><span class="hljs-attr">"pattern"</span><span>: </span><span class="hljs-string">"^@[a-zA-Z0-9_]+$"</span><span>
</span></span><span>            },
</span><span><span>            </span><span class="hljs-attr">"email"</span><span>: {
</span></span><span><span>                </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"string"</span><span>,
</span></span><span><span>                </span><span class="hljs-attr">"description"</span><span>: </span><span class="hljs-string">"The email of the user"</span><span>,
</span></span><span data-highlighted-row="true" data-highlighted-row-="true"><span>                </span><span class="hljs-attr">"format"</span><span>: </span><span class="hljs-string">"email"</span><span>
</span></span><span>            }
</span><span>        },
</span><span><span>        </span><span class="hljs-attr">"additionalProperties"</span><span>: </span><span class="hljs-literal">false</span><span>,
</span></span><span><span>        </span><span class="hljs-attr">"required"</span><span>: [
</span></span><span><span>            </span><span class="hljs-string">"name"</span><span>, </span><span class="hljs-string">"username"</span><span>, </span><span class="hljs-string">"email"</span><span>
</span></span><span>        ]
</span><span>    }
</span><span>}</span></code></pre></div></div></div></div></div><div><div class="hidden">Number Restrictions</div><div class="hidden"><div class="code-sample light-mode"><div class="code-sample-header"><div class="code-sample-title body-small"></div><div class="exclude-from-copy"><button id="select-trigger-radix-:r14k:" type="button" class="ICo9Y" data-variant="bare" data-size="sm" data-gutter-size="xs" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:r14m:" data-state="closed"><span class="RWOJJ">json</span><div class="relative flex items-center gap-2"><svg width="8" height="11" viewBox="0 0 10 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="uF-Qb"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.34151 0.747423C4.71854 0.417526 5.28149 0.417526 5.65852 0.747423L9.65852 4.24742C10.0742 4.61111 10.1163 5.24287 9.75259 5.6585C9.38891 6.07414 8.75715 6.11626 8.34151 5.75258L5.00001 2.82877L1.65852 5.75258C1.24288 6.11626 0.61112 6.07414 0.247438 5.6585C-0.116244 5.24287 -0.0741267 4.61111 0.34151 4.24742L4.34151 0.747423ZM0.246065 10.3578C0.608879 9.94139 1.24055 9.89795 1.65695 10.2608L5.00001 13.1737L8.34308 10.2608C8.75948 9.89795 9.39115 9.94139 9.75396 10.3578C10.1168 10.7742 10.0733 11.4058 9.65695 11.7687L5.65695 15.2539C5.28043 15.582 4.7196 15.582 4.34308 15.2539L0.343082 11.7687C-0.0733128 11.4058 -0.116749 10.7742 0.246065 10.3578Z"></path></svg></div></button></div><button type="button" class="Wmjjd Ry4P0" data-color="secondary" data-variant="bare" data-size="sm" data-gutter-size="xs" data-icon-size="sm"><span class="_6jr41"><span class="eRdFc" data-align="start"><span class="block beN8R"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2V5Zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1v2ZM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1H5Z" clip-rule="evenodd"></path></svg></span></span></span></button></div><div class="code-sample-body code-sample-body-small code-sample-body-with-header"><div class="code-block"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-json" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span><span class="react-syntax-highlighter-line-number">24
</span><span class="react-syntax-highlighter-line-number">25
</span><span class="react-syntax-highlighter-line-number">26
</span><span class="react-syntax-highlighter-line-number">27
</span><span class="react-syntax-highlighter-line-number">28
</span></code><span><span>{
</span></span><span><span>    </span><span class="hljs-attr">"name"</span><span>: </span><span class="hljs-string">"weather_data"</span><span>,
</span></span><span><span>    </span><span class="hljs-attr">"strict"</span><span>: </span><span class="hljs-literal">true</span><span>,
</span></span><span><span>    </span><span class="hljs-attr">"schema"</span><span>: {
</span></span><span><span>        </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"object"</span><span>,
</span></span><span><span>        </span><span class="hljs-attr">"properties"</span><span>: {
</span></span><span><span>            </span><span class="hljs-attr">"location"</span><span>: {
</span></span><span><span>                </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"string"</span><span>,
</span></span><span><span>                </span><span class="hljs-attr">"description"</span><span>: </span><span class="hljs-string">"The location to get the weather for"</span><span>
</span></span><span>            },
</span><span><span>            </span><span class="hljs-attr">"unit"</span><span>: {
</span></span><span><span>                </span><span class="hljs-attr">"type"</span><span>: [</span><span class="hljs-string">"string"</span><span>, </span><span class="hljs-string">"null"</span><span>],
</span></span><span><span>                </span><span class="hljs-attr">"description"</span><span>: </span><span class="hljs-string">"The unit to return the temperature in"</span><span>,
</span></span><span><span>                </span><span class="hljs-attr">"enum"</span><span>: [</span><span class="hljs-string">"F"</span><span>, </span><span class="hljs-string">"C"</span><span>]
</span></span><span>            },
</span><span><span>            </span><span class="hljs-attr">"value"</span><span>: {
</span></span><span><span>                </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"number"</span><span>,
</span></span><span><span>                </span><span class="hljs-attr">"description"</span><span>: </span><span class="hljs-string">"The actual temperature value in the location"</span><span>,
</span></span><span data-highlighted-row="true" data-highlighted-row-="true"><span>                </span><span class="hljs-attr">"minimum"</span><span>: </span><span class="hljs-number">-130</span><span>,
</span></span><span data-highlighted-row="true" data-highlighted-row-="true"><span>                </span><span class="hljs-attr">"maximum"</span><span>: </span><span class="hljs-number">130</span><span>
</span></span><span>            }
</span><span>        },
</span><span><span>        </span><span class="hljs-attr">"additionalProperties"</span><span>: </span><span class="hljs-literal">false</span><span>,
</span></span><span><span>        </span><span class="hljs-attr">"required"</span><span>: [
</span></span><span><span>            </span><span class="hljs-string">"location"</span><span>, </span><span class="hljs-string">"unit"</span><span>, </span><span class="hljs-string">"value"</span><span>
</span></span><span>        ]
</span><span>    }
</span><span>}</span></code></pre></div></div></div></div></div></div>
<div class="eyfSy"><div class="kQ2ry" data-variant="neutral"><div class="KtDSh"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path d="M13 12a1 1 0 1 0-2 0v4a1 1 0 1 0 2 0v-4Zm-1-2.5A1.25 1.25 0 1 0 12 7a1.25 1.25 0 0 0 0 2.5Z"></path><path fill-rule="evenodd" d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2ZM4 12a8 8 0 1 1 16 0 8 8 0 0 1-16 0Z" clip-rule="evenodd"></path></svg></div><div class="d3NUC"><div class="hFW1r"><div class="_9ohtt"><p>Note these constraints are <a href="#some-type-specific-keywords-are-not-yet-supported">not yet supported for fine-tuned
models</a>.</p></div></div></div></div></div>
<div class="anchor-heading-wrapper"><h4 id="root-objects-must-not-be-anyof-and-must-be-an-object" class="anchor-heading" data-name="root-objects-must-not-be-anyof-and-must-be-an-object">Root objects must not be <code>anyOf</code> and must be an object<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h4></div>
<p>Note that the root level object of a schema must be an object, and not use <code>anyOf</code>. A pattern that appears in Zod (as one example) is using a discriminated union, which produces an <code>anyOf</code> at the top level. So code such as the following won't work:</p>
<div class="code-sample light-mode"><div class="code-sample-header"><div class="code-sample-title body-small"></div><div class="exclude-from-copy"><button id="select-trigger-radix-:r14n:" type="button" class="ICo9Y" data-variant="bare" data-size="sm" data-gutter-size="xs" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:r14p:" data-state="closed"><span class="RWOJJ">javascript</span><div class="relative flex items-center gap-2"><svg width="8" height="11" viewBox="0 0 10 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="uF-Qb"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.34151 0.747423C4.71854 0.417526 5.28149 0.417526 5.65852 0.747423L9.65852 4.24742C10.0742 4.61111 10.1163 5.24287 9.75259 5.6585C9.38891 6.07414 8.75715 6.11626 8.34151 5.75258L5.00001 2.82877L1.65852 5.75258C1.24288 6.11626 0.61112 6.07414 0.247438 5.6585C-0.116244 5.24287 -0.0741267 4.61111 0.34151 4.24742L4.34151 0.747423ZM0.246065 10.3578C0.608879 9.94139 1.24055 9.89795 1.65695 10.2608L5.00001 13.1737L8.34308 10.2608C8.75948 9.89795 9.39115 9.94139 9.75396 10.3578C10.1168 10.7742 10.0733 11.4058 9.65695 11.7687L5.65695 15.2539C5.28043 15.582 4.7196 15.582 4.34308 15.2539L0.343082 11.7687C-0.0733128 11.4058 -0.116749 10.7742 0.246065 10.3578Z"></path></svg></div></button></div><button type="button" class="Wmjjd Ry4P0" data-color="secondary" data-variant="bare" data-size="sm" data-gutter-size="xs" data-icon-size="sm"><span class="_6jr41"><span class="eRdFc" data-align="start"><span class="block beN8R"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2V5Zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1v2ZM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1H5Z" clip-rule="evenodd"></path></svg></span></span></span></button></div><div class="code-sample-body code-sample-body-small code-sample-body-with-header"><div class="code-block"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-javascript" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span></code><span><span class="hljs-keyword">import</span><span> { z } </span><span class="hljs-keyword">from</span><span> </span><span class="hljs-string">'zod'</span><span>;
</span></span><span><span></span><span class="hljs-keyword">import</span><span> { zodResponseFormat } </span><span class="hljs-keyword">from</span><span> </span><span class="hljs-string">'openai/helpers/zod'</span><span>;
</span></span><span>
</span><span><span></span><span class="hljs-keyword">const</span><span> BaseResponseSchema = z.object({</span><span class="hljs-comment">/* ... */</span><span>});
</span></span><span><span></span><span class="hljs-keyword">const</span><span> UnsuccessfulResponseSchema = z.object({</span><span class="hljs-comment">/* ... */</span><span>});
</span></span><span>
</span><span><span></span><span class="hljs-keyword">const</span><span> finalSchema = z.discriminatedUnion(</span><span class="hljs-string">'status'</span><span>, [
</span></span><span>BaseResponseSchema,
</span><span>UnsuccessfulResponseSchema,
</span><span>]);
</span><span>
</span><span><span></span><span class="hljs-comment">// Invalid JSON Schema for Structured Outputs</span><span>
</span></span><span><span></span><span class="hljs-keyword">const</span><span> json = zodResponseFormat(finalSchema, </span><span class="hljs-string">'final_schema'</span><span>);</span></span></code></pre></div></div></div>
<div class="anchor-heading-wrapper"><h4 id="all-fields-must-be-required" class="anchor-heading" data-name="all-fields-must-be-required">All fields must be <code>required</code><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h4></div>
<p>To use Structured Outputs, all fields or function parameters must be specified as <code>required</code>.</p>
<div class="code-sample light-mode"><div class="code-sample-header"><div class="code-sample-title body-small"></div><div class="exclude-from-copy"><button id="select-trigger-radix-:r14q:" type="button" class="ICo9Y" data-variant="bare" data-size="sm" data-gutter-size="xs" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:r14s:" data-state="closed"><span class="RWOJJ">json</span><div class="relative flex items-center gap-2"><svg width="8" height="11" viewBox="0 0 10 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="uF-Qb"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.34151 0.747423C4.71854 0.417526 5.28149 0.417526 5.65852 0.747423L9.65852 4.24742C10.0742 4.61111 10.1163 5.24287 9.75259 5.6585C9.38891 6.07414 8.75715 6.11626 8.34151 5.75258L5.00001 2.82877L1.65852 5.75258C1.24288 6.11626 0.61112 6.07414 0.247438 5.6585C-0.116244 5.24287 -0.0741267 4.61111 0.34151 4.24742L4.34151 0.747423ZM0.246065 10.3578C0.608879 9.94139 1.24055 9.89795 1.65695 10.2608L5.00001 13.1737L8.34308 10.2608C8.75948 9.89795 9.39115 9.94139 9.75396 10.3578C10.1168 10.7742 10.0733 11.4058 9.65695 11.7687L5.65695 15.2539C5.28043 15.582 4.7196 15.582 4.34308 15.2539L0.343082 11.7687C-0.0733128 11.4058 -0.116749 10.7742 0.246065 10.3578Z"></path></svg></div></button></div><button type="button" class="Wmjjd Ry4P0" data-color="secondary" data-variant="bare" data-size="sm" data-gutter-size="xs" data-icon-size="sm"><span class="_6jr41"><span class="eRdFc" data-align="start"><span class="block beN8R"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2V5Zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1v2ZM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1H5Z" clip-rule="evenodd"></path></svg></span></span></span></button></div><div class="code-sample-body code-sample-body-small code-sample-body-with-header"><div class="code-block"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-json" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span></code><span><span>{
</span></span><span><span>    </span><span class="hljs-attr">"name"</span><span>: </span><span class="hljs-string">"get_weather"</span><span>,
</span></span><span><span>    </span><span class="hljs-attr">"description"</span><span>: </span><span class="hljs-string">"Fetches the weather in the given location"</span><span>,
</span></span><span><span>    </span><span class="hljs-attr">"strict"</span><span>: </span><span class="hljs-literal">true</span><span>,
</span></span><span><span>    </span><span class="hljs-attr">"parameters"</span><span>: {
</span></span><span><span>        </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"object"</span><span>,
</span></span><span><span>        </span><span class="hljs-attr">"properties"</span><span>: {
</span></span><span><span>            </span><span class="hljs-attr">"location"</span><span>: {
</span></span><span><span>                </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"string"</span><span>,
</span></span><span><span>                </span><span class="hljs-attr">"description"</span><span>: </span><span class="hljs-string">"The location to get the weather for"</span><span>
</span></span><span>            },
</span><span><span>            </span><span class="hljs-attr">"unit"</span><span>: {
</span></span><span><span>                </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"string"</span><span>,
</span></span><span><span>                </span><span class="hljs-attr">"description"</span><span>: </span><span class="hljs-string">"The unit to return the temperature in"</span><span>,
</span></span><span><span>                </span><span class="hljs-attr">"enum"</span><span>: [</span><span class="hljs-string">"F"</span><span>, </span><span class="hljs-string">"C"</span><span>]
</span></span><span>            }
</span><span>        },
</span><span><span>        </span><span class="hljs-attr">"additionalProperties"</span><span>: </span><span class="hljs-literal">false</span><span>,
</span></span><span data-highlighted-row="true" data-highlighted-row-="true"><span>        </span><span class="hljs-attr">"required"</span><span>: [</span><span class="hljs-string">"location"</span><span>, </span><span class="hljs-string">"unit"</span><span>]
</span></span><span>    }
</span><span>}</span></code></pre></div></div></div>
<p>Although all fields must be required (and the model will return a 
value for each parameter), it is possible to emulate an optional 
parameter by using a union type with <code>null</code>.</p>
<div class="code-sample light-mode"><div class="code-sample-header"><div class="code-sample-title body-small"></div><div class="exclude-from-copy"><button id="select-trigger-radix-:r14t:" type="button" class="ICo9Y" data-variant="bare" data-size="sm" data-gutter-size="xs" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:r14v:" data-state="closed"><span class="RWOJJ">json</span><div class="relative flex items-center gap-2"><svg width="8" height="11" viewBox="0 0 10 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="uF-Qb"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.34151 0.747423C4.71854 0.417526 5.28149 0.417526 5.65852 0.747423L9.65852 4.24742C10.0742 4.61111 10.1163 5.24287 9.75259 5.6585C9.38891 6.07414 8.75715 6.11626 8.34151 5.75258L5.00001 2.82877L1.65852 5.75258C1.24288 6.11626 0.61112 6.07414 0.247438 5.6585C-0.116244 5.24287 -0.0741267 4.61111 0.34151 4.24742L4.34151 0.747423ZM0.246065 10.3578C0.608879 9.94139 1.24055 9.89795 1.65695 10.2608L5.00001 13.1737L8.34308 10.2608C8.75948 9.89795 9.39115 9.94139 9.75396 10.3578C10.1168 10.7742 10.0733 11.4058 9.65695 11.7687L5.65695 15.2539C5.28043 15.582 4.7196 15.582 4.34308 15.2539L0.343082 11.7687C-0.0733128 11.4058 -0.116749 10.7742 0.246065 10.3578Z"></path></svg></div></button></div><button type="button" class="Wmjjd Ry4P0" data-color="secondary" data-variant="bare" data-size="sm" data-gutter-size="xs" data-icon-size="sm"><span class="_6jr41"><span class="eRdFc" data-align="start"><span class="block beN8R"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2V5Zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1v2ZM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1H5Z" clip-rule="evenodd"></path></svg></span></span></span></button></div><div class="code-sample-body code-sample-body-small code-sample-body-with-header"><div class="code-block"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-json" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span></code><span><span>{
</span></span><span><span>    </span><span class="hljs-attr">"name"</span><span>: </span><span class="hljs-string">"get_weather"</span><span>,
</span></span><span><span>    </span><span class="hljs-attr">"description"</span><span>: </span><span class="hljs-string">"Fetches the weather in the given location"</span><span>,
</span></span><span><span>    </span><span class="hljs-attr">"strict"</span><span>: </span><span class="hljs-literal">true</span><span>,
</span></span><span><span>    </span><span class="hljs-attr">"parameters"</span><span>: {
</span></span><span><span>        </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"object"</span><span>,
</span></span><span><span>        </span><span class="hljs-attr">"properties"</span><span>: {
</span></span><span><span>            </span><span class="hljs-attr">"location"</span><span>: {
</span></span><span><span>                </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"string"</span><span>,
</span></span><span><span>                </span><span class="hljs-attr">"description"</span><span>: </span><span class="hljs-string">"The location to get the weather for"</span><span>
</span></span><span>            },
</span><span><span>            </span><span class="hljs-attr">"unit"</span><span>: {
</span></span><span data-highlighted-row="true" data-highlighted-row-="true"><span>                </span><span class="hljs-attr">"type"</span><span>: [</span><span class="hljs-string">"string"</span><span>, </span><span class="hljs-string">"null"</span><span>],
</span></span><span><span>                </span><span class="hljs-attr">"description"</span><span>: </span><span class="hljs-string">"The unit to return the temperature in"</span><span>,
</span></span><span><span>                </span><span class="hljs-attr">"enum"</span><span>: [</span><span class="hljs-string">"F"</span><span>, </span><span class="hljs-string">"C"</span><span>]
</span></span><span>            }
</span><span>        },
</span><span><span>        </span><span class="hljs-attr">"additionalProperties"</span><span>: </span><span class="hljs-literal">false</span><span>,
</span></span><span><span>        </span><span class="hljs-attr">"required"</span><span>: [
</span></span><span><span>            </span><span class="hljs-string">"location"</span><span>, </span><span class="hljs-string">"unit"</span><span>
</span></span><span>        ]
</span><span>    }
</span><span>}</span></code></pre></div></div></div>
<div class="anchor-heading-wrapper"><h4 id="objects-have-limitations-on-nesting-depth-and-size" class="anchor-heading" data-name="objects-have-limitations-on-nesting-depth-and-size">Objects have limitations on nesting depth and size<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h4></div>
<p>A schema may have up to 100 object properties total, with up to 5 levels of nesting.</p>
<div class="anchor-heading-wrapper"><h4 id="limitations-on-total-string-size" class="anchor-heading" data-name="limitations-on-total-string-size">Limitations on total string size<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h4></div>
<p>In a schema, total string length of all property names, definition 
names, enum values, and const values cannot exceed 15,000 characters.</p>
<div class="anchor-heading-wrapper"><h4 id="limitations-on-enum-size" class="anchor-heading" data-name="limitations-on-enum-size">Limitations on enum size<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h4></div>
<p>A schema may have up to 500 enum values across all enum properties.</p>
<p>For a single enum property with string values, the total string 
length of all enum values cannot exceed 7,500 characters when there are 
more than 250 enum values.</p>
<div class="anchor-heading-wrapper"><h4 id="additionalproperties-false-must-always-be-set-in-objects" class="anchor-heading" data-name="additionalproperties-false-must-always-be-set-in-objects"><code>additionalProperties: false</code> must always be set in objects<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h4></div>
<p><code>additionalProperties</code> controls whether it is allowable for an object to contain additional keys / values that were not defined in the JSON Schema.</p>
<p>Structured Outputs only supports generating specified keys / values, so we require developers to set <code>additionalProperties: false</code> to opt into Structured Outputs.</p>
<div class="code-sample light-mode"><div class="code-sample-header"><div class="code-sample-title body-small"></div><div class="exclude-from-copy"><button id="select-trigger-radix-:r150:" type="button" class="ICo9Y" data-variant="bare" data-size="sm" data-gutter-size="xs" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:r152:" data-state="closed"><span class="RWOJJ">json</span><div class="relative flex items-center gap-2"><svg width="8" height="11" viewBox="0 0 10 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="uF-Qb"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.34151 0.747423C4.71854 0.417526 5.28149 0.417526 5.65852 0.747423L9.65852 4.24742C10.0742 4.61111 10.1163 5.24287 9.75259 5.6585C9.38891 6.07414 8.75715 6.11626 8.34151 5.75258L5.00001 2.82877L1.65852 5.75258C1.24288 6.11626 0.61112 6.07414 0.247438 5.6585C-0.116244 5.24287 -0.0741267 4.61111 0.34151 4.24742L4.34151 0.747423ZM0.246065 10.3578C0.608879 9.94139 1.24055 9.89795 1.65695 10.2608L5.00001 13.1737L8.34308 10.2608C8.75948 9.89795 9.39115 9.94139 9.75396 10.3578C10.1168 10.7742 10.0733 11.4058 9.65695 11.7687L5.65695 15.2539C5.28043 15.582 4.7196 15.582 4.34308 15.2539L0.343082 11.7687C-0.0733128 11.4058 -0.116749 10.7742 0.246065 10.3578Z"></path></svg></div></button></div><button type="button" class="Wmjjd Ry4P0" data-color="secondary" data-variant="bare" data-size="sm" data-gutter-size="xs" data-icon-size="sm"><span class="_6jr41"><span class="eRdFc" data-align="start"><span class="block beN8R"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2V5Zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1v2ZM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1H5Z" clip-rule="evenodd"></path></svg></span></span></span></button></div><div class="code-sample-body code-sample-body-small code-sample-body-with-header"><div class="code-block"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-json" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span></code><span><span>{
</span></span><span><span>    </span><span class="hljs-attr">"name"</span><span>: </span><span class="hljs-string">"get_weather"</span><span>,
</span></span><span><span>    </span><span class="hljs-attr">"description"</span><span>: </span><span class="hljs-string">"Fetches the weather in the given location"</span><span>,
</span></span><span><span>    </span><span class="hljs-attr">"strict"</span><span>: </span><span class="hljs-literal">true</span><span>,
</span></span><span><span>    </span><span class="hljs-attr">"schema"</span><span>: {
</span></span><span><span>        </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"object"</span><span>,
</span></span><span><span>        </span><span class="hljs-attr">"properties"</span><span>: {
</span></span><span><span>            </span><span class="hljs-attr">"location"</span><span>: {
</span></span><span><span>                </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"string"</span><span>,
</span></span><span><span>                </span><span class="hljs-attr">"description"</span><span>: </span><span class="hljs-string">"The location to get the weather for"</span><span>
</span></span><span>            },
</span><span><span>            </span><span class="hljs-attr">"unit"</span><span>: {
</span></span><span><span>                </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"string"</span><span>,
</span></span><span><span>                </span><span class="hljs-attr">"description"</span><span>: </span><span class="hljs-string">"The unit to return the temperature in"</span><span>,
</span></span><span><span>                </span><span class="hljs-attr">"enum"</span><span>: [</span><span class="hljs-string">"F"</span><span>, </span><span class="hljs-string">"C"</span><span>]
</span></span><span>            }
</span><span>        },
</span><span data-highlighted-row="true" data-highlighted-row-="true"><span>        </span><span class="hljs-attr">"additionalProperties"</span><span>: </span><span class="hljs-literal">false</span><span>,
</span></span><span><span>        </span><span class="hljs-attr">"required"</span><span>: [
</span></span><span><span>            </span><span class="hljs-string">"location"</span><span>, </span><span class="hljs-string">"unit"</span><span>
</span></span><span>        ]
</span><span>    }
</span><span>}</span></code></pre></div></div></div>
<div class="anchor-heading-wrapper"><h4 id="key-ordering" class="anchor-heading" data-name="key-ordering">Key ordering<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h4></div>
<p>When using Structured Outputs, outputs will be produced in the same order as the ordering of keys in the schema.</p>
<div class="anchor-heading-wrapper"><h4 id="some-type-specific-keywords-are-not-yet-supported" class="anchor-heading" data-name="some-type-specific-keywords-are-not-yet-supported">Some type-specific keywords are not yet supported<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h4></div>
<ul>
<li><strong>Composition:</strong> <code>allOf</code>, <code>not</code>, <code>dependentRequired</code>, <code>dependentSchemas</code>, <code>if</code>, <code>then</code>, <code>else</code></li>
</ul>
<p>For fine-tuned models, we additionally do not support the following:</p>
<ul>
<li><strong>For strings:</strong> <code>minLength</code>, <code>maxLength</code>, <code>pattern</code>, <code>format</code></li>
<li><strong>For numbers:</strong> <code>minimum</code>, <code>maximum</code>, <code>multipleOf</code></li>
<li><strong>For objects:</strong> <code>patternProperties</code></li>
<li><strong>For arrays:</strong> <code>minItems</code>, <code>maxItems</code></li>
</ul>
<p>If you turn on Structured Outputs by supplying <code>strict: true</code> and call the API with an unsupported JSON Schema, you will receive an error.</p>
<div class="anchor-heading-wrapper"><h4 id="for-anyof-the-nested-schemas-must-each-be-a-valid-json-schema-per-this-subset" class="anchor-heading" data-name="for-anyof-the-nested-schemas-must-each-be-a-valid-json-schema-per-this-subset">For <code>anyOf</code>, the nested schemas must each be a valid JSON Schema per this subset<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h4></div>
<p>Here's an example supported anyOf schema:</p>
<div class="code-sample light-mode"><div class="code-sample-header"><div class="code-sample-title body-small"></div><div class="exclude-from-copy"><button id="select-trigger-radix-:r153:" type="button" class="ICo9Y" data-variant="bare" data-size="sm" data-gutter-size="xs" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:r155:" data-state="closed"><span class="RWOJJ">json</span><div class="relative flex items-center gap-2"><svg width="8" height="11" viewBox="0 0 10 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="uF-Qb"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.34151 0.747423C4.71854 0.417526 5.28149 0.417526 5.65852 0.747423L9.65852 4.24742C10.0742 4.61111 10.1163 5.24287 9.75259 5.6585C9.38891 6.07414 8.75715 6.11626 8.34151 5.75258L5.00001 2.82877L1.65852 5.75258C1.24288 6.11626 0.61112 6.07414 0.247438 5.6585C-0.116244 5.24287 -0.0741267 4.61111 0.34151 4.24742L4.34151 0.747423ZM0.246065 10.3578C0.608879 9.94139 1.24055 9.89795 1.65695 10.2608L5.00001 13.1737L8.34308 10.2608C8.75948 9.89795 9.39115 9.94139 9.75396 10.3578C10.1168 10.7742 10.0733 11.4058 9.65695 11.7687L5.65695 15.2539C5.28043 15.582 4.7196 15.582 4.34308 15.2539L0.343082 11.7687C-0.0733128 11.4058 -0.116749 10.7742 0.246065 10.3578Z"></path></svg></div></button></div><button type="button" class="Wmjjd Ry4P0" data-color="secondary" data-variant="bare" data-size="sm" data-gutter-size="xs" data-icon-size="sm"><span class="_6jr41"><span class="eRdFc" data-align="start"><span class="block beN8R"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2V5Zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1v2ZM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1H5Z" clip-rule="evenodd"></path></svg></span></span></span></button></div><div class="code-sample-body code-sample-body-small code-sample-body-with-header"><div class="code-block"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-json" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span><span class="react-syntax-highlighter-line-number">24
</span><span class="react-syntax-highlighter-line-number">25
</span><span class="react-syntax-highlighter-line-number">26
</span><span class="react-syntax-highlighter-line-number">27
</span><span class="react-syntax-highlighter-line-number">28
</span><span class="react-syntax-highlighter-line-number">29
</span><span class="react-syntax-highlighter-line-number">30
</span><span class="react-syntax-highlighter-line-number">31
</span><span class="react-syntax-highlighter-line-number">32
</span><span class="react-syntax-highlighter-line-number">33
</span><span class="react-syntax-highlighter-line-number">34
</span><span class="react-syntax-highlighter-line-number">35
</span><span class="react-syntax-highlighter-line-number">36
</span><span class="react-syntax-highlighter-line-number">37
</span><span class="react-syntax-highlighter-line-number">38
</span><span class="react-syntax-highlighter-line-number">39
</span><span class="react-syntax-highlighter-line-number">40
</span><span class="react-syntax-highlighter-line-number">41
</span><span class="react-syntax-highlighter-line-number">42
</span><span class="react-syntax-highlighter-line-number">43
</span><span class="react-syntax-highlighter-line-number">44
</span><span class="react-syntax-highlighter-line-number">45
</span><span class="react-syntax-highlighter-line-number">46
</span><span class="react-syntax-highlighter-line-number">47
</span><span class="react-syntax-highlighter-line-number">48
</span><span class="react-syntax-highlighter-line-number">49
</span><span class="react-syntax-highlighter-line-number">50
</span><span class="react-syntax-highlighter-line-number">51
</span><span class="react-syntax-highlighter-line-number">52
</span><span class="react-syntax-highlighter-line-number">53
</span><span class="react-syntax-highlighter-line-number">54
</span><span class="react-syntax-highlighter-line-number">55
</span><span class="react-syntax-highlighter-line-number">56
</span></code><span><span>{
</span></span><span><span>    </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"object"</span><span>,
</span></span><span><span>    </span><span class="hljs-attr">"properties"</span><span>: {
</span></span><span><span>        </span><span class="hljs-attr">"item"</span><span>: {
</span></span><span><span>            </span><span class="hljs-attr">"anyOf"</span><span>: [
</span></span><span>                {
</span><span><span>                    </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"object"</span><span>,
</span></span><span><span>                    </span><span class="hljs-attr">"description"</span><span>: </span><span class="hljs-string">"The user object to insert into the database"</span><span>,
</span></span><span><span>                    </span><span class="hljs-attr">"properties"</span><span>: {
</span></span><span><span>                        </span><span class="hljs-attr">"name"</span><span>: {
</span></span><span><span>                            </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"string"</span><span>,
</span></span><span><span>                            </span><span class="hljs-attr">"description"</span><span>: </span><span class="hljs-string">"The name of the user"</span><span>
</span></span><span>                        },
</span><span><span>                        </span><span class="hljs-attr">"age"</span><span>: {
</span></span><span><span>                            </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"number"</span><span>,
</span></span><span><span>                            </span><span class="hljs-attr">"description"</span><span>: </span><span class="hljs-string">"The age of the user"</span><span>
</span></span><span>                        }
</span><span>                    },
</span><span><span>                    </span><span class="hljs-attr">"additionalProperties"</span><span>: </span><span class="hljs-literal">false</span><span>,
</span></span><span><span>                    </span><span class="hljs-attr">"required"</span><span>: [
</span></span><span><span>                        </span><span class="hljs-string">"name"</span><span>,
</span></span><span><span>                        </span><span class="hljs-string">"age"</span><span>
</span></span><span>                    ]
</span><span>                },
</span><span>                {
</span><span><span>                    </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"object"</span><span>,
</span></span><span><span>                    </span><span class="hljs-attr">"description"</span><span>: </span><span class="hljs-string">"The address object to insert into the database"</span><span>,
</span></span><span><span>                    </span><span class="hljs-attr">"properties"</span><span>: {
</span></span><span><span>                        </span><span class="hljs-attr">"number"</span><span>: {
</span></span><span><span>                            </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"string"</span><span>,
</span></span><span><span>                            </span><span class="hljs-attr">"description"</span><span>: </span><span class="hljs-string">"The number of the address. Eg. for 123 main st, this would be 123"</span><span>
</span></span><span>                        },
</span><span><span>                        </span><span class="hljs-attr">"street"</span><span>: {
</span></span><span><span>                            </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"string"</span><span>,
</span></span><span><span>                            </span><span class="hljs-attr">"description"</span><span>: </span><span class="hljs-string">"The street name. Eg. for 123 main st, this would be main st"</span><span>
</span></span><span>                        },
</span><span><span>                        </span><span class="hljs-attr">"city"</span><span>: {
</span></span><span><span>                            </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"string"</span><span>,
</span></span><span><span>                            </span><span class="hljs-attr">"description"</span><span>: </span><span class="hljs-string">"The city of the address"</span><span>
</span></span><span>                        }
</span><span>                    },
</span><span><span>                    </span><span class="hljs-attr">"additionalProperties"</span><span>: </span><span class="hljs-literal">false</span><span>,
</span></span><span><span>                    </span><span class="hljs-attr">"required"</span><span>: [
</span></span><span><span>                        </span><span class="hljs-string">"number"</span><span>,
</span></span><span><span>                        </span><span class="hljs-string">"street"</span><span>,
</span></span><span><span>                        </span><span class="hljs-string">"city"</span><span>
</span></span><span>                    ]
</span><span>                }
</span><span>            ]
</span><span>        }
</span><span>    },
</span><span><span>    </span><span class="hljs-attr">"additionalProperties"</span><span>: </span><span class="hljs-literal">false</span><span>,
</span></span><span><span>    </span><span class="hljs-attr">"required"</span><span>: [
</span></span><span><span>        </span><span class="hljs-string">"item"</span><span>
</span></span><span>    ]
</span><span>}</span></code></pre></div></div></div>
<div class="anchor-heading-wrapper"><h4 id="definitions-are-supported" class="anchor-heading" data-name="definitions-are-supported">Definitions are supported<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h4></div>
<p>You can use definitions to define subschemas which are referenced throughout your schema. The following is a simple example.</p>
<div class="code-sample light-mode"><div class="code-sample-header"><div class="code-sample-title body-small"></div><div class="exclude-from-copy"><button id="select-trigger-radix-:r156:" type="button" class="ICo9Y" data-variant="bare" data-size="sm" data-gutter-size="xs" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:r158:" data-state="closed"><span class="RWOJJ">json</span><div class="relative flex items-center gap-2"><svg width="8" height="11" viewBox="0 0 10 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="uF-Qb"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.34151 0.747423C4.71854 0.417526 5.28149 0.417526 5.65852 0.747423L9.65852 4.24742C10.0742 4.61111 10.1163 5.24287 9.75259 5.6585C9.38891 6.07414 8.75715 6.11626 8.34151 5.75258L5.00001 2.82877L1.65852 5.75258C1.24288 6.11626 0.61112 6.07414 0.247438 5.6585C-0.116244 5.24287 -0.0741267 4.61111 0.34151 4.24742L4.34151 0.747423ZM0.246065 10.3578C0.608879 9.94139 1.24055 9.89795 1.65695 10.2608L5.00001 13.1737L8.34308 10.2608C8.75948 9.89795 9.39115 9.94139 9.75396 10.3578C10.1168 10.7742 10.0733 11.4058 9.65695 11.7687L5.65695 15.2539C5.28043 15.582 4.7196 15.582 4.34308 15.2539L0.343082 11.7687C-0.0733128 11.4058 -0.116749 10.7742 0.246065 10.3578Z"></path></svg></div></button></div><button type="button" class="Wmjjd Ry4P0" data-color="secondary" data-variant="bare" data-size="sm" data-gutter-size="xs" data-icon-size="sm"><span class="_6jr41"><span class="eRdFc" data-align="start"><span class="block beN8R"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2V5Zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1v2ZM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1H5Z" clip-rule="evenodd"></path></svg></span></span></span></button></div><div class="code-sample-body code-sample-body-small code-sample-body-with-header"><div class="code-block"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-json" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span><span class="react-syntax-highlighter-line-number">24
</span><span class="react-syntax-highlighter-line-number">25
</span><span class="react-syntax-highlighter-line-number">26
</span><span class="react-syntax-highlighter-line-number">27
</span><span class="react-syntax-highlighter-line-number">28
</span><span class="react-syntax-highlighter-line-number">29
</span><span class="react-syntax-highlighter-line-number">30
</span><span class="react-syntax-highlighter-line-number">31
</span><span class="react-syntax-highlighter-line-number">32
</span><span class="react-syntax-highlighter-line-number">33
</span><span class="react-syntax-highlighter-line-number">34
</span><span class="react-syntax-highlighter-line-number">35
</span><span class="react-syntax-highlighter-line-number">36
</span><span class="react-syntax-highlighter-line-number">37
</span></code><span><span>{
</span></span><span><span>    </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"object"</span><span>,
</span></span><span><span>    </span><span class="hljs-attr">"properties"</span><span>: {
</span></span><span><span>        </span><span class="hljs-attr">"steps"</span><span>: {
</span></span><span><span>            </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"array"</span><span>,
</span></span><span><span>            </span><span class="hljs-attr">"items"</span><span>: {
</span></span><span><span>                </span><span class="hljs-attr">"$ref"</span><span>: </span><span class="hljs-string">"#/$defs/step"</span><span>
</span></span><span>            }
</span><span>        },
</span><span><span>        </span><span class="hljs-attr">"final_answer"</span><span>: {
</span></span><span><span>            </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"string"</span><span>
</span></span><span>        }
</span><span>    },
</span><span><span>    </span><span class="hljs-attr">"$defs"</span><span>: {
</span></span><span><span>        </span><span class="hljs-attr">"step"</span><span>: {
</span></span><span><span>            </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"object"</span><span>,
</span></span><span><span>            </span><span class="hljs-attr">"properties"</span><span>: {
</span></span><span><span>                </span><span class="hljs-attr">"explanation"</span><span>: {
</span></span><span><span>                    </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"string"</span><span>
</span></span><span>                },
</span><span><span>                </span><span class="hljs-attr">"output"</span><span>: {
</span></span><span><span>                    </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"string"</span><span>
</span></span><span>                }
</span><span>            },
</span><span><span>            </span><span class="hljs-attr">"required"</span><span>: [
</span></span><span><span>                </span><span class="hljs-string">"explanation"</span><span>,
</span></span><span><span>                </span><span class="hljs-string">"output"</span><span>
</span></span><span>            ],
</span><span><span>            </span><span class="hljs-attr">"additionalProperties"</span><span>: </span><span class="hljs-literal">false</span><span>
</span></span><span>        }
</span><span>    },
</span><span><span>    </span><span class="hljs-attr">"required"</span><span>: [
</span></span><span><span>        </span><span class="hljs-string">"steps"</span><span>,
</span></span><span><span>        </span><span class="hljs-string">"final_answer"</span><span>
</span></span><span>    ],
</span><span><span>    </span><span class="hljs-attr">"additionalProperties"</span><span>: </span><span class="hljs-literal">false</span><span>
</span></span><span>}</span></code></pre></div></div></div>
<div class="anchor-heading-wrapper"><h4 id="recursive-schemas-are-supported" class="anchor-heading" data-name="recursive-schemas-are-supported">Recursive schemas are supported<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h4></div>
<p>Sample recursive schema using <code>#</code> to indicate root recursion.</p>
<div class="code-sample light-mode"><div class="code-sample-header"><div class="code-sample-title body-small"></div><div class="exclude-from-copy"><button id="select-trigger-radix-:r159:" type="button" class="ICo9Y" data-variant="bare" data-size="sm" data-gutter-size="xs" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:r15b:" data-state="closed"><span class="RWOJJ">json</span><div class="relative flex items-center gap-2"><svg width="8" height="11" viewBox="0 0 10 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="uF-Qb"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.34151 0.747423C4.71854 0.417526 5.28149 0.417526 5.65852 0.747423L9.65852 4.24742C10.0742 4.61111 10.1163 5.24287 9.75259 5.6585C9.38891 6.07414 8.75715 6.11626 8.34151 5.75258L5.00001 2.82877L1.65852 5.75258C1.24288 6.11626 0.61112 6.07414 0.247438 5.6585C-0.116244 5.24287 -0.0741267 4.61111 0.34151 4.24742L4.34151 0.747423ZM0.246065 10.3578C0.608879 9.94139 1.24055 9.89795 1.65695 10.2608L5.00001 13.1737L8.34308 10.2608C8.75948 9.89795 9.39115 9.94139 9.75396 10.3578C10.1168 10.7742 10.0733 11.4058 9.65695 11.7687L5.65695 15.2539C5.28043 15.582 4.7196 15.582 4.34308 15.2539L0.343082 11.7687C-0.0733128 11.4058 -0.116749 10.7742 0.246065 10.3578Z"></path></svg></div></button></div><button type="button" class="Wmjjd Ry4P0" data-color="secondary" data-variant="bare" data-size="sm" data-gutter-size="xs" data-icon-size="sm"><span class="_6jr41"><span class="eRdFc" data-align="start"><span class="block beN8R"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2V5Zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1v2ZM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1H5Z" clip-rule="evenodd"></path></svg></span></span></span></button></div><div class="code-sample-body code-sample-body-small code-sample-body-with-header"><div class="code-block"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-json" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span><span class="react-syntax-highlighter-line-number">24
</span><span class="react-syntax-highlighter-line-number">25
</span><span class="react-syntax-highlighter-line-number">26
</span><span class="react-syntax-highlighter-line-number">27
</span><span class="react-syntax-highlighter-line-number">28
</span><span class="react-syntax-highlighter-line-number">29
</span><span class="react-syntax-highlighter-line-number">30
</span><span class="react-syntax-highlighter-line-number">31
</span><span class="react-syntax-highlighter-line-number">32
</span><span class="react-syntax-highlighter-line-number">33
</span><span class="react-syntax-highlighter-line-number">34
</span><span class="react-syntax-highlighter-line-number">35
</span><span class="react-syntax-highlighter-line-number">36
</span><span class="react-syntax-highlighter-line-number">37
</span><span class="react-syntax-highlighter-line-number">38
</span><span class="react-syntax-highlighter-line-number">39
</span><span class="react-syntax-highlighter-line-number">40
</span><span class="react-syntax-highlighter-line-number">41
</span><span class="react-syntax-highlighter-line-number">42
</span><span class="react-syntax-highlighter-line-number">43
</span><span class="react-syntax-highlighter-line-number">44
</span><span class="react-syntax-highlighter-line-number">45
</span><span class="react-syntax-highlighter-line-number">46
</span><span class="react-syntax-highlighter-line-number">47
</span></code><span><span>{
</span></span><span><span>    </span><span class="hljs-attr">"name"</span><span>: </span><span class="hljs-string">"ui"</span><span>,
</span></span><span><span>    </span><span class="hljs-attr">"description"</span><span>: </span><span class="hljs-string">"Dynamically generated UI"</span><span>,
</span></span><span><span>    </span><span class="hljs-attr">"strict"</span><span>: </span><span class="hljs-literal">true</span><span>,
</span></span><span><span>    </span><span class="hljs-attr">"schema"</span><span>: {
</span></span><span><span>        </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"object"</span><span>,
</span></span><span><span>        </span><span class="hljs-attr">"properties"</span><span>: {
</span></span><span><span>            </span><span class="hljs-attr">"type"</span><span>: {
</span></span><span><span>                </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"string"</span><span>,
</span></span><span><span>                </span><span class="hljs-attr">"description"</span><span>: </span><span class="hljs-string">"The type of the UI component"</span><span>,
</span></span><span><span>                </span><span class="hljs-attr">"enum"</span><span>: [</span><span class="hljs-string">"div"</span><span>, </span><span class="hljs-string">"button"</span><span>, </span><span class="hljs-string">"header"</span><span>, </span><span class="hljs-string">"section"</span><span>, </span><span class="hljs-string">"field"</span><span>, </span><span class="hljs-string">"form"</span><span>]
</span></span><span>            },
</span><span><span>            </span><span class="hljs-attr">"label"</span><span>: {
</span></span><span><span>                </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"string"</span><span>,
</span></span><span><span>                </span><span class="hljs-attr">"description"</span><span>: </span><span class="hljs-string">"The label of the UI component, used for buttons or form fields"</span><span>
</span></span><span>            },
</span><span><span>            </span><span class="hljs-attr">"children"</span><span>: {
</span></span><span><span>                </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"array"</span><span>,
</span></span><span><span>                </span><span class="hljs-attr">"description"</span><span>: </span><span class="hljs-string">"Nested UI components"</span><span>,
</span></span><span><span>                </span><span class="hljs-attr">"items"</span><span>: {
</span></span><span><span>                    </span><span class="hljs-attr">"$ref"</span><span>: </span><span class="hljs-string">"#"</span><span>
</span></span><span>                }
</span><span>            },
</span><span><span>            </span><span class="hljs-attr">"attributes"</span><span>: {
</span></span><span><span>                </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"array"</span><span>,
</span></span><span><span>                </span><span class="hljs-attr">"description"</span><span>: </span><span class="hljs-string">"Arbitrary attributes for the UI component, suitable for any element"</span><span>,
</span></span><span><span>                </span><span class="hljs-attr">"items"</span><span>: {
</span></span><span><span>                    </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"object"</span><span>,
</span></span><span><span>                    </span><span class="hljs-attr">"properties"</span><span>: {
</span></span><span><span>                        </span><span class="hljs-attr">"name"</span><span>: {
</span></span><span><span>                            </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"string"</span><span>,
</span></span><span><span>                            </span><span class="hljs-attr">"description"</span><span>: </span><span class="hljs-string">"The name of the attribute, for example onClick or className"</span><span>
</span></span><span>                        },
</span><span><span>                        </span><span class="hljs-attr">"value"</span><span>: {
</span></span><span><span>                            </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"string"</span><span>,
</span></span><span><span>                            </span><span class="hljs-attr">"description"</span><span>: </span><span class="hljs-string">"The value of the attribute"</span><span>
</span></span><span>                        }
</span><span>                    },
</span><span><span>                    </span><span class="hljs-attr">"additionalProperties"</span><span>: </span><span class="hljs-literal">false</span><span>,
</span></span><span><span>                    </span><span class="hljs-attr">"required"</span><span>: [</span><span class="hljs-string">"name"</span><span>, </span><span class="hljs-string">"value"</span><span>]
</span></span><span>                }
</span><span>            }
</span><span>        },
</span><span><span>        </span><span class="hljs-attr">"required"</span><span>: [</span><span class="hljs-string">"type"</span><span>, </span><span class="hljs-string">"label"</span><span>, </span><span class="hljs-string">"children"</span><span>, </span><span class="hljs-string">"attributes"</span><span>],
</span></span><span><span>        </span><span class="hljs-attr">"additionalProperties"</span><span>: </span><span class="hljs-literal">false</span><span>
</span></span><span>    }
</span><span>}</span></code></pre></div></div></div>
<p>Sample recursive schema using explicit recursion:</p>
<div class="code-sample light-mode"><div class="code-sample-header"><div class="code-sample-title body-small"></div><div class="exclude-from-copy"><button id="select-trigger-radix-:r15c:" type="button" class="ICo9Y" data-variant="bare" data-size="sm" data-gutter-size="xs" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:r15e:" data-state="closed"><span class="RWOJJ">json</span><div class="relative flex items-center gap-2"><svg width="8" height="11" viewBox="0 0 10 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="uF-Qb"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.34151 0.747423C4.71854 0.417526 5.28149 0.417526 5.65852 0.747423L9.65852 4.24742C10.0742 4.61111 10.1163 5.24287 9.75259 5.6585C9.38891 6.07414 8.75715 6.11626 8.34151 5.75258L5.00001 2.82877L1.65852 5.75258C1.24288 6.11626 0.61112 6.07414 0.247438 5.6585C-0.116244 5.24287 -0.0741267 4.61111 0.34151 4.24742L4.34151 0.747423ZM0.246065 10.3578C0.608879 9.94139 1.24055 9.89795 1.65695 10.2608L5.00001 13.1737L8.34308 10.2608C8.75948 9.89795 9.39115 9.94139 9.75396 10.3578C10.1168 10.7742 10.0733 11.4058 9.65695 11.7687L5.65695 15.2539C5.28043 15.582 4.7196 15.582 4.34308 15.2539L0.343082 11.7687C-0.0733128 11.4058 -0.116749 10.7742 0.246065 10.3578Z"></path></svg></div></button></div><button type="button" class="Wmjjd Ry4P0" data-color="secondary" data-variant="bare" data-size="sm" data-gutter-size="xs" data-icon-size="sm"><span class="_6jr41"><span class="eRdFc" data-align="start"><span class="block beN8R"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2V5Zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1v2ZM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1H5Z" clip-rule="evenodd"></path></svg></span></span></span></button></div><div class="code-sample-body code-sample-body-small code-sample-body-with-header"><div class="code-block"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-json" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span><span class="react-syntax-highlighter-line-number">24
</span><span class="react-syntax-highlighter-line-number">25
</span><span class="react-syntax-highlighter-line-number">26
</span><span class="react-syntax-highlighter-line-number">27
</span><span class="react-syntax-highlighter-line-number">28
</span><span class="react-syntax-highlighter-line-number">29
</span><span class="react-syntax-highlighter-line-number">30
</span><span class="react-syntax-highlighter-line-number">31
</span><span class="react-syntax-highlighter-line-number">32
</span><span class="react-syntax-highlighter-line-number">33
</span><span class="react-syntax-highlighter-line-number">34
</span><span class="react-syntax-highlighter-line-number">35
</span><span class="react-syntax-highlighter-line-number">36
</span><span class="react-syntax-highlighter-line-number">37
</span></code><span><span>{
</span></span><span><span>    </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"object"</span><span>,
</span></span><span><span>    </span><span class="hljs-attr">"properties"</span><span>: {
</span></span><span><span>        </span><span class="hljs-attr">"linked_list"</span><span>: {
</span></span><span><span>            </span><span class="hljs-attr">"$ref"</span><span>: </span><span class="hljs-string">"#/$defs/linked_list_node"</span><span>
</span></span><span>        }
</span><span>    },
</span><span><span>    </span><span class="hljs-attr">"$defs"</span><span>: {
</span></span><span><span>        </span><span class="hljs-attr">"linked_list_node"</span><span>: {
</span></span><span><span>            </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"object"</span><span>,
</span></span><span><span>            </span><span class="hljs-attr">"properties"</span><span>: {
</span></span><span><span>                </span><span class="hljs-attr">"value"</span><span>: {
</span></span><span><span>                    </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"number"</span><span>
</span></span><span>                },
</span><span><span>                </span><span class="hljs-attr">"next"</span><span>: {
</span></span><span><span>                    </span><span class="hljs-attr">"anyOf"</span><span>: [
</span></span><span>                        {
</span><span><span>                            </span><span class="hljs-attr">"$ref"</span><span>: </span><span class="hljs-string">"#/$defs/linked_list_node"</span><span>
</span></span><span>                        },
</span><span>                        {
</span><span><span>                            </span><span class="hljs-attr">"type"</span><span>: </span><span class="hljs-string">"null"</span><span>
</span></span><span>                        }
</span><span>                    ]
</span><span>                }
</span><span>            },
</span><span><span>            </span><span class="hljs-attr">"additionalProperties"</span><span>: </span><span class="hljs-literal">false</span><span>,
</span></span><span><span>            </span><span class="hljs-attr">"required"</span><span>: [
</span></span><span><span>                </span><span class="hljs-string">"next"</span><span>,
</span></span><span><span>                </span><span class="hljs-string">"value"</span><span>
</span></span><span>            ]
</span><span>        }
</span><span>    },
</span><span><span>    </span><span class="hljs-attr">"additionalProperties"</span><span>: </span><span class="hljs-literal">false</span><span>,
</span></span><span><span>    </span><span class="hljs-attr">"required"</span><span>: [
</span></span><span><span>        </span><span class="hljs-string">"linked_list"</span><span>
</span></span><span>    ]
</span><span>}</span></code></pre></div></div></div>
<div class="anchor-heading-wrapper"><h2 id="json-mode" class="anchor-heading" data-name="json-mode">JSON mode<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h2></div>
<div class="eyfSy"><div class="kQ2ry" data-variant="neutral"><div class="KtDSh"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path d="M13 12a1 1 0 1 0-2 0v4a1 1 0 1 0 2 0v-4Zm-1-2.5A1.25 1.25 0 1 0 12 7a1.25 1.25 0 0 0 0 2.5Z"></path><path fill-rule="evenodd" d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2ZM4 12a8 8 0 1 1 16 0 8 8 0 0 1-16 0Z" clip-rule="evenodd"></path></svg></div><div class="d3NUC"><div class="hFW1r"><div class="_9ohtt"><p>JSON
 mode is a more basic version of the Structured Outputs feature. While 
JSON mode ensures that model output is valid JSON, Structured Outputs 
reliably matches the model's output to the schema you specify.
We recommend you use Structured Outputs if it is supported for your use 
case.</p></div></div></div></div></div>
<p>When JSON mode is turned on, the model's output is ensured to be 
valid JSON, except for in some edge cases that you should detect and 
handle appropriately.</p>

<p>To turn on JSON mode with the Responses API you can set the <code>text.format</code> to <code>{ "type": "json_object" }</code>. If you are using function calling, JSON mode is always turned on.</p>
<p>Important notes:</p>
<ul>
<li>When using JSON mode, you must always instruct the model to produce 
JSON via some message in the conversation, for example via your system 
message. If you don't include an explicit instruction to generate JSON, 
the model may generate an unending stream of whitespace and the request 
may run continually until it reaches the token limit. To help ensure you
 don't forget, the API will throw an error if the string "JSON" does not
 appear somewhere in the context.</li>
<li>JSON mode will not guarantee the output matches any specific schema,
 only that it is valid and parses without errors. You should use 
Structured Outputs to ensure it matches your schema, or if that is not 
possible, you should use a validation library and potentially retries to
 ensure that the output matches your desired schema.</li>
<li>Your application must detect and handle the edge cases that can 
result in the model output not being a complete JSON object (see below)</li>
</ul>
<div class="expn"><div class="expn-title" role="button" aria-expanded="false" aria-controls="expander-8"><div class="expn-icon"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M8.293 4.293a1 1 0 0 1 1.414 0l7 7a1 1 0 0 1 0 1.414l-7 7a1 1 0 0 1-1.414-1.414L14.586 12 8.293 5.707a1 1 0 0 1 0-1.414Z" clip-rule="evenodd"></path></svg></div><div class="expn-label">Handling edge cases</div></div><div class="expn-content hidden" id="expander-8">
<div class="code-sample light-mode"><div class="code-sample-header"><div class="code-sample-title body-small"></div><div class="exclude-from-copy"><button id="select-trigger-radix-:r15f:" type="button" class="ICo9Y" data-variant="bare" data-size="sm" data-gutter-size="xs" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:r15h:" data-state="closed"><span class="RWOJJ">python</span><div class="relative flex items-center gap-2"><svg width="8" height="11" viewBox="0 0 10 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="uF-Qb"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.34151 0.747423C4.71854 0.417526 5.28149 0.417526 5.65852 0.747423L9.65852 4.24742C10.0742 4.61111 10.1163 5.24287 9.75259 5.6585C9.38891 6.07414 8.75715 6.11626 8.34151 5.75258L5.00001 2.82877L1.65852 5.75258C1.24288 6.11626 0.61112 6.07414 0.247438 5.6585C-0.116244 5.24287 -0.0741267 4.61111 0.34151 4.24742L4.34151 0.747423ZM0.246065 10.3578C0.608879 9.94139 1.24055 9.89795 1.65695 10.2608L5.00001 13.1737L8.34308 10.2608C8.75948 9.89795 9.39115 9.94139 9.75396 10.3578C10.1168 10.7742 10.0733 11.4058 9.65695 11.7687L5.65695 15.2539C5.28043 15.582 4.7196 15.582 4.34308 15.2539L0.343082 11.7687C-0.0733128 11.4058 -0.116749 10.7742 0.246065 10.3578Z"></path></svg></div></button></div><button type="button" class="Wmjjd Ry4P0" data-color="secondary" data-variant="bare" data-size="sm" data-gutter-size="xs" data-icon-size="sm"><span class="_6jr41"><span class="eRdFc" data-align="start"><span class="block beN8R"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2V5Zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1v2ZM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1H5Z" clip-rule="evenodd"></path></svg></span></span></span></button></div><div class="code-sample-body code-sample-body-small code-sample-body-with-header"><div class="code-block hidden"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-javascript" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span><span class="react-syntax-highlighter-line-number">24
</span><span class="react-syntax-highlighter-line-number">25
</span><span class="react-syntax-highlighter-line-number">26
</span><span class="react-syntax-highlighter-line-number">27
</span><span class="react-syntax-highlighter-line-number">28
</span><span class="react-syntax-highlighter-line-number">29
</span><span class="react-syntax-highlighter-line-number">30
</span><span class="react-syntax-highlighter-line-number">31
</span><span class="react-syntax-highlighter-line-number">32
</span><span class="react-syntax-highlighter-line-number">33
</span><span class="react-syntax-highlighter-line-number">34
</span><span class="react-syntax-highlighter-line-number">35
</span><span class="react-syntax-highlighter-line-number">36
</span><span class="react-syntax-highlighter-line-number">37
</span><span class="react-syntax-highlighter-line-number">38
</span><span class="react-syntax-highlighter-line-number">39
</span><span class="react-syntax-highlighter-line-number">40
</span><span class="react-syntax-highlighter-line-number">41
</span><span class="react-syntax-highlighter-line-number">42
</span><span class="react-syntax-highlighter-line-number">43
</span><span class="react-syntax-highlighter-line-number">44
</span><span class="react-syntax-highlighter-line-number">45
</span><span class="react-syntax-highlighter-line-number">46
</span><span class="react-syntax-highlighter-line-number">47
</span></code><span><span class="hljs-keyword">const</span><span> we_did_not_specify_stop_tokens = </span><span class="hljs-literal">true</span><span>;
</span></span><span>
</span><span><span></span><span class="hljs-keyword">try</span><span> {
</span></span><span><span>  </span><span class="hljs-keyword">const</span><span> response = </span><span class="hljs-keyword">await</span><span> openai.responses.create({
</span></span><span><span>    </span><span class="hljs-attr">model</span><span>: </span><span class="hljs-string">"gpt-3.5-turbo-0125"</span><span>,
</span></span><span><span>    </span><span class="hljs-attr">input</span><span>: [
</span></span><span>      {
</span><span><span>        </span><span class="hljs-attr">role</span><span>: </span><span class="hljs-string">"system"</span><span>,
</span></span><span><span>        </span><span class="hljs-attr">content</span><span>: </span><span class="hljs-string">"You are a helpful assistant designed to output JSON."</span><span>,
</span></span><span>      },
</span><span><span>      { </span><span class="hljs-attr">role</span><span>: </span><span class="hljs-string">"user"</span><span>, </span><span class="hljs-attr">content</span><span>: </span><span class="hljs-string">"Who won the world series in 2020? Please respond in the format {winner: ...}"</span><span> },
</span></span><span>    ],
</span><span><span>    </span><span class="hljs-attr">text</span><span>: { </span><span class="hljs-attr">format</span><span>: { </span><span class="hljs-attr">type</span><span>: </span><span class="hljs-string">"json_object"</span><span> } },
</span></span><span>  });
</span><span>
</span><span><span>  </span><span class="hljs-comment">// Check if the conversation was too long for the context window, resulting in incomplete JSON </span><span>
</span></span><span><span>  </span><span class="hljs-keyword">if</span><span> (response.status === </span><span class="hljs-string">"incomplete"</span><span> &amp;&amp; response.incomplete_details.reason === </span><span class="hljs-string">"max_output_tokens"</span><span>) {
</span></span><span><span>    </span><span class="hljs-comment">// your code should handle this error case</span><span>
</span></span><span>  }
</span><span>
</span><span><span>  </span><span class="hljs-comment">// Check if the OpenAI safety system refused the request and generated a refusal instead</span><span>
</span></span><span><span>  </span><span class="hljs-keyword">if</span><span> (response.output[</span><span class="hljs-number">0</span><span>].content[</span><span class="hljs-number">0</span><span>].type === </span><span class="hljs-string">"refusal"</span><span>) {
</span></span><span><span>    </span><span class="hljs-comment">// your code should handle this error case</span><span>
</span></span><span><span>    </span><span class="hljs-comment">// In this case, the .content field will contain the explanation (if any) that the model generated for why it is refusing</span><span>
</span></span><span><span>    </span><span class="hljs-built_in">console</span><span>.log(response.output[</span><span class="hljs-number">0</span><span>].content[</span><span class="hljs-number">0</span><span>].refusal)
</span></span><span>  }
</span><span>
</span><span><span>  </span><span class="hljs-comment">// Check if the model's output included restricted content, so the generation of JSON was halted and may be partial</span><span>
</span></span><span><span>  </span><span class="hljs-keyword">if</span><span> (response.status === </span><span class="hljs-string">"incomplete"</span><span> &amp;&amp; response.incomplete_details.reason === </span><span class="hljs-string">"content_filter"</span><span>) {
</span></span><span><span>    </span><span class="hljs-comment">// your code should handle this error case</span><span>
</span></span><span>  }
</span><span>
</span><span><span>  </span><span class="hljs-keyword">if</span><span> (response.status === </span><span class="hljs-string">"completed"</span><span>) {
</span></span><span><span>    </span><span class="hljs-comment">// In this case the model has either successfully finished generating the JSON object according to your schema, or the model generated one of the tokens you provided as a "stop token"</span><span>
</span></span><span>
</span><span><span>    </span><span class="hljs-keyword">if</span><span> (we_did_not_specify_stop_tokens) {
</span></span><span><span>      </span><span class="hljs-comment">// If you didn't specify any stop tokens, then the generation is complete and the content key will contain the serialized JSON object</span><span>
</span></span><span><span>      </span><span class="hljs-comment">// This will parse successfully and should now contain  {"winner": "Los Angeles Dodgers"}</span><span>
</span></span><span><span>      </span><span class="hljs-built_in">console</span><span>.log(</span><span class="hljs-built_in">JSON</span><span>.parse(response.output_text))
</span></span><span><span>    } </span><span class="hljs-keyword">else</span><span> {
</span></span><span><span>      </span><span class="hljs-comment">// Check if the response.output_text ends with one of your stop tokens and handle appropriately</span><span>
</span></span><span>    }
</span><span>  }
</span><span><span>} </span><span class="hljs-keyword">catch</span><span> (e) {
</span></span><span><span>  </span><span class="hljs-comment">// Your code should handle errors here, for example a network error calling the API</span><span>
</span></span><span><span>  </span><span class="hljs-built_in">console</span><span>.error(e)
</span></span><span>}</span></code></pre></div><div class="code-block"><pre class="hljs syntax-highlighter light-mode code-sample-pre"><code class="language-python" style="white-space: pre;"><code style="float: left; padding-right: 10px;"><span class="react-syntax-highlighter-line-number">1
</span><span class="react-syntax-highlighter-line-number">2
</span><span class="react-syntax-highlighter-line-number">3
</span><span class="react-syntax-highlighter-line-number">4
</span><span class="react-syntax-highlighter-line-number">5
</span><span class="react-syntax-highlighter-line-number">6
</span><span class="react-syntax-highlighter-line-number">7
</span><span class="react-syntax-highlighter-line-number">8
</span><span class="react-syntax-highlighter-line-number">9
</span><span class="react-syntax-highlighter-line-number">10
</span><span class="react-syntax-highlighter-line-number">11
</span><span class="react-syntax-highlighter-line-number">12
</span><span class="react-syntax-highlighter-line-number">13
</span><span class="react-syntax-highlighter-line-number">14
</span><span class="react-syntax-highlighter-line-number">15
</span><span class="react-syntax-highlighter-line-number">16
</span><span class="react-syntax-highlighter-line-number">17
</span><span class="react-syntax-highlighter-line-number">18
</span><span class="react-syntax-highlighter-line-number">19
</span><span class="react-syntax-highlighter-line-number">20
</span><span class="react-syntax-highlighter-line-number">21
</span><span class="react-syntax-highlighter-line-number">22
</span><span class="react-syntax-highlighter-line-number">23
</span><span class="react-syntax-highlighter-line-number">24
</span><span class="react-syntax-highlighter-line-number">25
</span><span class="react-syntax-highlighter-line-number">26
</span><span class="react-syntax-highlighter-line-number">27
</span><span class="react-syntax-highlighter-line-number">28
</span><span class="react-syntax-highlighter-line-number">29
</span><span class="react-syntax-highlighter-line-number">30
</span><span class="react-syntax-highlighter-line-number">31
</span><span class="react-syntax-highlighter-line-number">32
</span><span class="react-syntax-highlighter-line-number">33
</span><span class="react-syntax-highlighter-line-number">34
</span><span class="react-syntax-highlighter-line-number">35
</span><span class="react-syntax-highlighter-line-number">36
</span><span class="react-syntax-highlighter-line-number">37
</span><span class="react-syntax-highlighter-line-number">38
</span><span class="react-syntax-highlighter-line-number">39
</span><span class="react-syntax-highlighter-line-number">40
</span><span class="react-syntax-highlighter-line-number">41
</span></code><span><span>we_did_not_specify_stop_tokens = </span><span class="hljs-literal">True</span><span>
</span></span><span>
</span><span><span></span><span class="hljs-keyword">try</span><span>:
</span></span><span>    response = client.responses.create(
</span><span><span>        model=</span><span class="hljs-string">"gpt-3.5-turbo-0125"</span><span>,
</span></span><span><span>        </span><span class="hljs-built_in">input</span><span>=[
</span></span><span><span>            {</span><span class="hljs-string">"role"</span><span>: </span><span class="hljs-string">"system"</span><span>, </span><span class="hljs-string">"content"</span><span>: </span><span class="hljs-string">"You are a helpful assistant designed to output JSON."</span><span>},
</span></span><span><span>            {</span><span class="hljs-string">"role"</span><span>: </span><span class="hljs-string">"user"</span><span>, </span><span class="hljs-string">"content"</span><span>: </span><span class="hljs-string">"Who won the world series in 2020? Please respond in the format {winner: ...}"</span><span>}
</span></span><span>        ],
</span><span><span>        text={</span><span class="hljs-string">"format"</span><span>: {</span><span class="hljs-string">"type"</span><span>: </span><span class="hljs-string">"json_object"</span><span>}}
</span></span><span>    )
</span><span>
</span><span><span>    </span><span class="hljs-comment"># Check if the conversation was too long for the context window, resulting in incomplete JSON </span><span>
</span></span><span><span>    </span><span class="hljs-keyword">if</span><span> response.status == </span><span class="hljs-string">"incomplete"</span><span> </span><span class="hljs-keyword">and</span><span> response.incomplete_details.reason == </span><span class="hljs-string">"max_output_tokens"</span><span>:
</span></span><span><span>        </span><span class="hljs-comment"># your code should handle this error case</span><span>
</span></span><span><span>        </span><span class="hljs-keyword">pass</span><span>
</span></span><span>
</span><span><span>    </span><span class="hljs-comment"># Check if the OpenAI safety system refused the request and generated a refusal instead</span><span>
</span></span><span><span>    </span><span class="hljs-keyword">if</span><span> response.output[</span><span class="hljs-number">0</span><span>].content[</span><span class="hljs-number">0</span><span>].</span><span class="hljs-built_in">type</span><span> == </span><span class="hljs-string">"refusal"</span><span>:
</span></span><span><span>        </span><span class="hljs-comment"># your code should handle this error case</span><span>
</span></span><span><span>        </span><span class="hljs-comment"># In this case, the .content field will contain the explanation (if any) that the model generated for why it is refusing</span><span>
</span></span><span><span>        </span><span class="hljs-built_in">print</span><span>(response.output[</span><span class="hljs-number">0</span><span>].content[</span><span class="hljs-number">0</span><span>][</span><span class="hljs-string">"refusal"</span><span>])
</span></span><span>
</span><span><span>    </span><span class="hljs-comment"># Check if the model's output included restricted content, so the generation of JSON was halted and may be partial</span><span>
</span></span><span><span>    </span><span class="hljs-keyword">if</span><span> response.status == </span><span class="hljs-string">"incomplete"</span><span> </span><span class="hljs-keyword">and</span><span> response.incomplete_details.reason == </span><span class="hljs-string">"content_filter"</span><span>:
</span></span><span><span>        </span><span class="hljs-comment"># your code should handle this error case</span><span>
</span></span><span><span>        </span><span class="hljs-keyword">pass</span><span>
</span></span><span>
</span><span><span>    </span><span class="hljs-keyword">if</span><span> response.status == </span><span class="hljs-string">"completed"</span><span>:
</span></span><span><span>        </span><span class="hljs-comment"># In this case the model has either successfully finished generating the JSON object according to your schema, or the model generated one of the tokens you provided as a "stop token"</span><span>
</span></span><span>
</span><span><span>        </span><span class="hljs-keyword">if</span><span> we_did_not_specify_stop_tokens:
</span></span><span><span>            </span><span class="hljs-comment"># If you didn't specify any stop tokens, then the generation is complete and the content key will contain the serialized JSON object</span><span>
</span></span><span><span>            </span><span class="hljs-comment"># This will parse successfully and should now contain  "{"winner": "Los Angeles Dodgers"}"</span><span>
</span></span><span><span>            </span><span class="hljs-built_in">print</span><span>(response.output_text)
</span></span><span><span>        </span><span class="hljs-keyword">else</span><span>:
</span></span><span><span>            </span><span class="hljs-comment"># Check if the response.output_text ends with one of your stop tokens and handle appropriately</span><span>
</span></span><span><span>            </span><span class="hljs-keyword">pass</span><span>
</span></span><span><span></span><span class="hljs-keyword">except</span><span> Exception </span><span class="hljs-keyword">as</span><span> e:
</span></span><span><span>    </span><span class="hljs-comment"># Your code should handle errors here, for example a network error calling the API</span><span>
</span></span><span><span>    </span><span class="hljs-built_in">print</span><span>(e)</span></span></code></pre></div></div></div></div></div>
<div class="anchor-heading-wrapper"><h2 id="resources" class="anchor-heading" data-name="resources">Resources<svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" fill="currentColor" viewBox="0 0 24 24" class="anchor-heading-icon" role="presentation"><path fill-rule="evenodd" d="M18.293 5.707a4.657 4.657 0 0 0-6.586 0l-1 1a1 1 0 1 1-1.414-1.414l1-1a6.657 6.657 0 1 1 9.414 9.414l-1 1a1 1 0 0 1-1.414-1.414l1-1a4.657 4.657 0 0 0 0-6.586Zm-2.586 2.586a1 1 0 0 1 0 1.414l-6 6a1 1 0 0 1-1.414-1.414l6-6a1 1 0 0 1 1.414 0Zm-9 1a1 1 0 0 1 0 1.414l-1 1a4.657 4.657 0 0 0 6.586 6.586l1-1a1 1 0 0 1 1.414 1.414l-1 1a6.657 6.657 0 1 1-9.414-9.414l1-1a1 1 0 0 1 1.414 0Z" clip-rule="evenodd"></path></svg></h2></div>
<p>To learn more about Structured Outputs, we recommend browsing the following resources:</p>
<ul>
<li>Check out our <a href="https://cookbook.openai.com/examples/structured_outputs_intro" target="_blank" rel="noopener noreferrer">introductory cookbook</a> on Structured Outputs</li>
<li>Learn <a href="https://cookbook.openai.com/examples/structured_outputs_multi_agent" target="_blank" rel="noopener noreferrer">how to build multi-agent systems</a> with Structured Outputs</li>
</ul></div></div><div class="XhE37"><div class="flex flex-col gap-2 lg:min-w-[200px] -mr-2 lg:mr-0"><div data-state="closed"><button id="select-trigger-radix-:r15k:" type="button" class="ICo9Y" data-block="" data-variant="fill" data-size="md" data-gutter-size="md" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:r15m:" data-state="closed"><span class="RWOJJ">Responses</span><div class="relative flex items-center gap-2"><svg width="8" height="11" viewBox="0 0 10 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="uF-Qb"><path fill-rule="evenodd" clip-rule="evenodd" d="M4.34151 0.747423C4.71854 0.417526 5.28149 0.417526 5.65852 0.747423L9.65852 4.24742C10.0742 4.61111 10.1163 5.24287 9.75259 5.6585C9.38891 6.07414 8.75715 6.11626 8.34151 5.75258L5.00001 2.82877L1.65852 5.75258C1.24288 6.11626 0.61112 6.07414 0.247438 5.6585C-0.116244 5.24287 -0.0741267 4.61111 0.34151 4.24742L4.34151 0.747423ZM0.246065 10.3578C0.608879 9.94139 1.24055 9.89795 1.65695 10.2608L5.00001 13.1737L8.34308 10.2608C8.75948 9.89795 9.39115 9.94139 9.75396 10.3578C10.1168 10.7742 10.0733 11.4058 9.65695 11.7687L5.65695 15.2539C5.28043 15.582 4.7196 15.582 4.34308 15.2539L0.343082 11.7687C-0.0733128 11.4058 -0.116749 10.7742 0.246065 10.3578Z"></path></svg></div></button></div></div><nav class="PnGij"><div class="saDyQ"><div class="_8Szd1"><div class="NXaXx" style="--active-track-top: 136px; --active-track-height: 24px;"></div></div><ul class="x--yJ"><li class="MuoWh"><a class="hgAgD" data-active="false" href="#introduction"><span class="tkrBK" aria-hidden="true">Introduction</span>Introduction</a></li><li class="MuoWh"><a class="hgAgD" data-active="false" href="#examples"><span class="tkrBK" aria-hidden="true">Examples</span>Examples</a></li><li class="MuoWh"><a class="hgAgD" data-active="false" href="#how-to-use"><span class="tkrBK" aria-hidden="true">How to use</span>How to use</a></li><li class="MuoWh"><a class="hgAgD" data-active="false" href="#streaming"><span class="tkrBK" aria-hidden="true">Streaming</span>Streaming</a></li><li class="MuoWh"><a class="hgAgD" data-active="true" href="#supported-schemas"><span class="tkrBK" aria-hidden="true">Supported schemas</span>Supported schemas</a></li><li class="MuoWh"><a class="hgAgD" data-active="false" href="#json-mode"><span class="tkrBK" aria-hidden="true">JSON mode</span>JSON mode</a></li></ul></div></nav></div></div></div></div></div></div></span></div></div></div></div></div></main><div data-testid="compliance-management-wrapper"></div></div><div class="layers-root"></div></div>
      <script nonce="" nomodule="">!function(){var e=document,t=e.createElement("script");if(!("noModule"in t)&&"onbeforeload"in t){var n=!1;e.addEventListener("beforeload",(function(e){if(e.target===t)n=!0;else if(!e.target.hasAttribute("nomodule")||!n)return;e.preventDefault()}),!0),t.type="module",t.src=".",e.head.appendChild(t),t.remove()}}();</script>
      <script nonce="" nomodule="" crossorigin="" id="vite-legacy-polyfill" src="Structured%20Outputs%20-%20OpenAI%20API_files/polyfills-legacy-BWkGfYoW.js"></script>
      <script nonce="" nomodule="" crossorigin="" id="vite-legacy-entry" data-src="/static/index-legacy-CBBR9Zdl.js">System.import(document.getElementById('vite-legacy-entry').getAttribute('data-src'))</script>
    <script nonce="">(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.nonce='b25c82a7fac81dd0f3f77ee703989b11';d.innerHTML="window.__CF$cv$params={r:'9526bb407e44762e',t:'MTc1MDM3NDk1OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='b25c82a7fac81dd0f3f77ee703989b11';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script><iframe height="1" width="1" style="position: absolute; top: 0px; left: 0px; border: medium; visibility: hidden;"></iframe>

<div class="CRjGu"></div><iframe id="intercom-frame" style="position: absolute !important; opacity: 0 !important; width: 1px !important; height: 1px !important; top: 0 !important; left: 0 !important; border: none !important; display: block !important; z-index: -1 !important; pointer-events: none;" aria-hidden="true" tabindex="-1" title="Intercom"></iframe><div class="intercom-lightweight-app"><style id="intercom-lightweight-app-style" type="text/css">
  @keyframes intercom-lightweight-app-launcher {
    from {
      opacity: 0;
      transform: scale(0.5);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes intercom-lightweight-app-gradient {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes intercom-lightweight-app-messenger {
    0% {
      opacity: 0;
      transform: scale(0);
    }
    40% {
      opacity: 1;
    }
    100% {
      transform: scale(1);
    }
  }

  .intercom-lightweight-app {
    position: fixed;
    z-index: 2147483001;
    width: 0;
    height: 0;
    font-family: intercom-font, "Helvetica Neue", "Apple Color Emoji", Helvetica, Arial, sans-serif;
  }

  .intercom-lightweight-app-gradient {
    position: fixed;
    z-index: 2147483002;
    width: 500px;
    height: 500px;
    bottom: 0;
    right: 0;
    pointer-events: none;
    background: radial-gradient(
      ellipse at bottom right,
      rgba(29, 39, 54, 0.16) 0%,
      rgba(29, 39, 54, 0) 72%);
    animation: intercom-lightweight-app-gradient 200ms ease-out;
  }

  .intercom-lightweight-app-launcher {
    position: fixed;
    z-index: 2147483003;
    padding: 0 !important;
    margin: 0 !important;
    border: none;
    bottom: 20px;
    right: 20px;
    max-width: 48px;
    width: 48px;
    max-height: 48px;
    height: 48px;
    border-radius: 50%;
    background: #202123;
    cursor: pointer;
    box-shadow: 0 1px 6px 0 rgba(0, 0, 0, 0.06), 0 2px 32px 0 rgba(0, 0, 0, 0.16);
    transition: transform 167ms cubic-bezier(0.33, 0.00, 0.00, 1.00);
    box-sizing: content-box;
  }


  .intercom-lightweight-app-launcher:hover {
    transition: transform 250ms cubic-bezier(0.33, 0.00, 0.00, 1.00);
    transform: scale(1.1)
  }

  .intercom-lightweight-app-launcher:active {
    transform: scale(0.85);
    transition: transform 134ms cubic-bezier(0.45, 0, 0.2, 1);
  }


  .intercom-lightweight-app-launcher:focus {
    outline: none;

    
  }

  .intercom-lightweight-app-launcher-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: 0;
    left: 0;
    width: 48px;
    height: 48px;
    transition: transform 100ms linear, opacity 80ms linear;
  }

  .intercom-lightweight-app-launcher-icon-open {
    
        opacity: 1;
        transform: rotate(0deg) scale(1);
      
  }

  .intercom-lightweight-app-launcher-icon-open svg {
    width: 24px;
    height: 24px;
  }

  .intercom-lightweight-app-launcher-icon-open svg path {
    fill: rgb(255, 255, 255);
  }

  .intercom-lightweight-app-launcher-icon-self-serve {
    
        opacity: 1;
        transform: rotate(0deg) scale(1);
      
  }

  .intercom-lightweight-app-launcher-icon-self-serve svg {
    height: 44px;
  }

  .intercom-lightweight-app-launcher-icon-self-serve svg path {
    fill: rgb(255, 255, 255);
  }

  .intercom-lightweight-app-launcher-custom-icon-open {
    max-height: 24px;
    max-width: 24px;

    
        opacity: 1;
        transform: rotate(0deg) scale(1);
      
  }

  .intercom-lightweight-app-launcher-icon-minimize {
    
        opacity: 0;
        transform: rotate(-60deg) scale(0);
      
  }

  .intercom-lightweight-app-launcher-icon-minimize svg path {
    fill: rgb(255, 255, 255);
  }

  .intercom-lightweight-app-messenger {
    position: fixed;
    z-index: 2147483003;
    overflow: hidden;
    background-color: #ffffff;
    animation: intercom-lightweight-app-messenger 250ms cubic-bezier(0, 1, 1, 1);
    transform-origin: bottom right;

    
        width: 400px;
        height: calc(100% - 40px);
        max-height: 704px;
        min-height: 250px;
        right: 20px;
        bottom: 20px;
        box-shadow: 0 5px 40px rgba(0,0,0,0.16);
      

    border-radius: 16px;
  }

  .intercom-lightweight-app-messenger-header {
    height: 64px;
    border-bottom: none;
    background: #ffffff;
  }

  .intercom-lightweight-app-messenger-footer{
    position:absolute;
    bottom:0;
    width: 100%;
    height: 80px;
    background: #ffffff;
    font-size: 14px;
    line-height: 21px;
    border-top: 1px solid rgba(0, 0, 0, 0.05);
    box-shadow: 0px 0px 25px rgba(0, 0, 0, 0.05);
  }

  @media print {
    .intercom-lightweight-app {
      display: none;
    }
  }
</style></div></body></html>